(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-322ff073"],{"356b":function(t,e,n){"use strict";var r=n("77d4"),i=n.n(r);i.a},"56ae":function(t,e,n){"use strict";var r=n("a840"),i=n.n(r);i.a},7358:function(t,e,n){"use strict";var r=n("9ab4"),i=n("60a3"),a=n("bc3a"),o=n.n(a),c=n("2fe1"),s=n("2ef0"),u=n.n(s),l=n("2e75");function f(t){return f="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function v(t,e,n){return e&&d(t.prototype,e),n&&d(t,n),t}function m(t,e){return!e||"object"!==f(e)&&"function"!==typeof e?h(t):e}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(t){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},y(t)}function b(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}function g(t,e){return g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},g(t,e)}var _=function(t){function e(){return p(this,e),m(this,y(e).apply(this,arguments))}return b(e,t),v(e,[{key:"removeUndefined",value:function(t){return Object.keys(t).forEach((function(e){void 0===t[e]&&delete t[e]})),t}},{key:"toQuery",value:function(t){return t=this.removeUndefined(t),Object.keys(t).map((function(e){return"".concat(u.a.snakeCase(e),"=").concat(encodeURIComponent(t[e]))})).join("&")}},{key:"getList",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";return o.a.get("".concat("http://localhost:8000/api","/").concat(e,"/?").concat(n,"&limit=").concat(i,"&offset=").concat(r*i,"&").concat(a)).then((function(e){return i>0?{data:t.uRecursiveCamel(e.data.results),count:e.data.count}:{data:t.uRecursiveCamel(e.data),count:e.data.length}})).catch((function(e){return t.uRequestErrorHandler(e),{data:[],count:0}}))}},{key:"get",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0;return o.a.get("".concat("http://localhost:8000/api","/").concat(e,"/").concat(n,"/")).then((function(e){return t.uRecursiveCamel(e.data)})).catch((function(e){t.uRequestErrorHandler(e)}))}},{key:"delete",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0;return o.a.delete("".concat("http://localhost:8000/api","/").concat(e,"/").concat(n,"/")).then().catch((function(e){t.uRequestErrorHandler(e)}))}},{key:"post",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0;return o.a.post("".concat("http://localhost:8000/api","/").concat(e,"/"),n).then((function(e){return t.uRecursiveCamel(e.data)})).catch((function(e){t.uRequestErrorHandler(e)}))}},{key:"put",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;return o.a.put("".concat("http://localhost:8000/api","/").concat(e,"/").concat(n,"/"),r).then((function(e){return t.uRecursiveCamel(e.data)})).catch((function(e){t.uRequestErrorHandler(e)}))}},{key:"patch",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;return o.a.patch("".concat("http://localhost:8000/api","/").concat(e,"/").concat(n,"/"),r).then((function(e){return t.uRecursiveCamel(e.data)})).catch((function(e){t.uRequestErrorHandler(e)}))}},{key:"downloadInvoice",value:function(t,e,n){var r=this;o()({method:"get",url:"".concat("http://localhost:8000/api","/report-invoice/").concat(t,"/"),responseType:"blob"}).then((function(t){r.uDownloadBlobRequest(t.data,"".concat(n," Invoice #").concat(e,".pdf"))})).catch((function(t){r.uRequestErrorHandler(t)}))}}]),e}(Object(c["c"])(l["a"]));_=Object(r["a"])([Object(i["a"])({})],_),e["a"]=_},"77d4":function(t,e,n){},"9ac6":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"container form-container parent-page-container no-header-container"},[n("router-link",{staticClass:"btn secondary-action-btn form-back-btn",attrs:{tag:"button",to:{name:"filingStart",params:{menuState:"1",participantId:t.participantId}}}},[n("font-awesome-icon",{attrs:{icon:"angle-left"}})],1),n("FilingForm",{attrs:{participantId:t.participantId}})],1)])},i=[],a=n("9ab4"),o=n("60a3"),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("p",{staticClass:"form-title"},[t._v(t._s(t.$t("createFiling")))]),n("form",[n("div",{staticClass:"form-group"},[n("label",[t._v(" "+t._s(t.$t("remitter"))+" ")]),n("select",{directives:[{name:"model",rawName:"v-model",value:t.remitter,expression:"remitter"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"custom-select",attrs:{name:"remitter"},on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.remitter=e.target.multiple?n:n[0]},function(e){return e.preventDefault(),t.getFilingPeriod()}]}},[n("option",{attrs:{disabled:"",value:""}},[t._v(t._s(t.$t("selectRemitter")))]),t._l(t.remitters,(function(e){return n("option",{key:e.id,domProps:{value:e}},[t._v(" "+t._s(t.uFormatRegistrationNo(e))+" Â· "+t._s(e.participant.businessName)+" ")])}))],2),n("span",{staticClass:"form-error-message"},[t._v(t._s(t.errors.first("remitter")))])]),n("div",{staticClass:"form-group"},[n("label",[t._v(" "+t._s(t.$t("filingType"))+" ")]),n("select",{directives:[{name:"model",rawName:"v-model",value:t.filingType,expression:"filingType"},{name:"validate",rawName:"v-validate",value:"required|min_value:0",expression:"'required|min_value:0'"}],staticClass:"custom-select",attrs:{name:"filingType",disabled:!t.remitter},on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.filingType=e.target.multiple?n:n[0]},function(e){return t.getFilingPeriod()}]}},[n("option",{attrs:{disabled:"",value:"-1"}},[t._v(t._s(t.$t("selectFilingType")))]),t._l(Object.keys(t.filingTypes),(function(e){return n("option",{key:e,domProps:{value:e}},[t._v(" "+t._s(t.filingTypes[e])+" ")])}))],2),n("span",{staticClass:"form-error-message"},[t._v(t._s(t.errors.first("filingType")))])]),n("div",{staticClass:"form-group"},[n("label",[t._v(t._s(t.$t("invoiceReason")))]),n("b-form-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"custom-select",attrs:{options:t.uConstants(t.INVOICE_REASONS_MASTER,t.uConfig(t.INVOICE_REASONS)),name:"invoiceReason"},scopedSlots:t._u([{key:"first",fn:function(){return[n("option",{attrs:{disabled:""},domProps:{value:-1}},[t._v(t._s(t.$t("selectReason")))])]},proxy:!0}]),model:{value:t.filingReason,callback:function(e){t.filingReason=e},expression:"filingReason"}}),n("span",{staticClass:"form-error-message"},[t._v(t._s(t.errors.first("invoiceReason")))])],1),n("div",{staticClass:"form-group"},[n("label",[t._v(" "+t._s(t.uFindInstruction(this.DISPLAY_FILING_PERIOD_NAME))+" ")]),n("select",{directives:[{name:"model",rawName:"v-model",value:t.filingPeriod,expression:"filingPeriod"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"custom-select",attrs:{multiple:"",name:"filingPeriod",disabled:!t.remitter||-1===t.filingType},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.filingPeriod=e.target.multiple?n:n[0]}}},t._l(t.filingPeriods,(function(e){return n("option",{key:e.id,domProps:{value:e}},[t._v(" "+t._s(e.name)+" ")])})),0),n("span",{staticClass:"form-error-message"},[t._v(t._s(t.errors.first("filingPeriod")))])]),n("div",[t.remitter.filingFrequency?n("div",{staticClass:"detail-list"},[n("p",[n("span",{staticClass:"list-label"},[t._v(t._s(t.$t("filingFrequency"))+":")]),t._v(" "+t._s(t.FILING_FREQUENCIES_MASTER[t.remitter.filingFrequency])+" ")]),6===t.remitter.filingFrequency?n("p",{staticClass:"form-warning-message"},[t._v(" "+t._s(t.$t("cannotCreateFilingWarningMsg"))+" ")]):t._e()]):t._e()]),n("button",{staticClass:"btn primary-action-btn",attrs:{disabled:t.submitted||t.errors.any()||!t.currentUser.agencyUser||!t.uHasGroup(t.USER_GROUP_AGENCY_FILING),type:"submit"},on:{click:function(e){return e.preventDefault(),t.submitForm()}}},[t._v(" "+t._s(t.$t("create"))+" ")]),n("router-link",{staticClass:"btn secondary-action-btn",attrs:{tag:"button",to:{name:"filingStart",params:{menuState:"1",participantId:t.participantId}}}},[t._v(" "+t._s(t.$t("cancel"))+" ")])],1)])},s=[],u=n("a34a"),l=n.n(u),f=n("2fe1"),p=n("bc3a"),d=n.n(p),v=n("2f62"),m=n("2e75"),h=n("7358");function y(t){return y="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(t)}function b(t,e){return R(t)||w(t,e)||_(t,e)||g()}function g(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _(t,e){if(t){if("string"===typeof t)return O(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(t,e):void 0}}function O(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function w(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,a=void 0;try{for(var o,c=t[Symbol.iterator]();!(r=(o=c.next()).done);r=!0)if(n.push(o.value),e&&n.length===e)break}catch(s){i=!0,a=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(i)throw a}}return n}}function R(t){if(Array.isArray(t))return t}function I(t,e,n,r,i,a,o){try{var c=t[a](o),s=c.value}catch(u){return void n(u)}c.done?e(s):Promise.resolve(s).then(r,i)}function S(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){I(a,r,i,o,c,"next",t)}function c(t){I(a,r,i,o,c,"throw",t)}o(void 0)}))}}function P(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function C(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function E(t,e,n){return e&&C(t.prototype,e),n&&C(t,n),t}function j(t,e){return!e||"object"!==y(e)&&"function"!==typeof e?k(t):e}function k(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function F(t){return F=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},F(t)}function T(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&x(t,e)}function x(t,e){return x=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},x(t,e)}var N=function(t){function e(){var t;return P(this,e),t=j(this,F(e).apply(this,arguments)),t.submitted=!1,t.filingReason=-1,t.filingTypes=[],t.remitters=[],t.filingPeriods=[],t.remitter="",t.filingPeriod=[],t.filingType=-1,t}return T(e,t),E(e,[{key:"mounted",value:function(){var t=S(l.a.mark((function t(){return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.getRemitterData(),this.filingTypes=this.FILING_TYPES,this.filingTypes[1]=this.uFindInstruction(this.DISPLAY_SPECIAL_FILER);case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getRemitterData",value:function(){var t=S(l.a.mark((function t(){var e,n,r,i,a=this;return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.currentUser.agencyUser){t.next=9;break}return t.next=3,this.getList("remitters","parent_participant=".concat(this.participantId));case 3:e=t.sent,n=e.data,r=e.count,this.remitters=n,1===r&&(i=b(this.remitters,1),this.remitter=i[0],this.getFilingPeriod()),this.remitters=this.remitters.filter((function(t){return t.jurisdiction.agency.id===a.currentUser.agencyUser.agency.id}));case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getFilingPeriod",value:function(){var t=this,e=this.uMonthStart(this.remitter.operationsStartDate);Number(this.filingType)===this.FILING_TYPES_REGULAR?e=this.uConfig(this.REGULAR_FILING_FROM_DATE):Number(this.filingType)===this.FILING_TYPES_SPECIAL&&(e=this.uConfig(this.SPECIAL_FILING_FROM_DATE)),d.a.get("".concat("http://localhost:8000/api","/filing-periods/?type=").concat(this.remitter.filingFrequency,"\n        &end_date=").concat(this.uCurrentDate(),"&start_date=").concat(e,"&filing_type=").concat(this.filingType,"&remitter=").concat(this.remitter.id)).then((function(e){t.filingPeriods=t.uRecursiveCamel(e.data)})).catch((function(e){t.uRequestErrorHandler(e)}))}},{key:"submitForm",value:function(){var t=S(l.a.mark((function t(){var e,n,r,i;return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.submitted=!0,t.next=3,this.$validator.validate();case 3:if(e=t.sent,e){t.next=8;break}this.submitted=!1,t.next=25;break;case 8:t.prev=8,n=0;case 10:if(!(n<this.filingPeriod.length)){t.next=18;break}return r=this.filingPeriod[n],i={filing_period_id:r.id,participant_id:this.remitter.participant.id,reason:this.filingReason>-1?this.filingReason:null,type:this.filingType,created_date:this.uCurrentDate()},t.next=15,d.a.post("".concat("http://localhost:8000/api","/filings/"),i);case 15:n+=1,t.next=10;break;case 18:this.submitted=!1,this.$router.push({name:"filingStart",params:{menuState:"1",participantId:String(this.participantId)}}),t.next=25;break;case 22:t.prev=22,t.t0=t["catch"](8),this.uRequestErrorHandler(t.t0);case 25:case"end":return t.stop()}}),t,this,[[8,22]])})));function e(){return t.apply(this,arguments)}return e}()}]),e}(Object(f["c"])(m["a"],h["a"]));Object(a["a"])([Object(o["b"])()],N.prototype,"participantId",void 0),N=Object(a["a"])([Object(o["a"])({computed:Object(v["b"])(["currentUser"])})],N);var A=N,q=A,L=(n("56ae"),n("2877")),$=Object(L["a"])(q,c,s,!1,null,"ca40a2d2",null),U=$.exports;function D(t){return D="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},D(t)}function G(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function H(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function M(t,e,n){return e&&H(t.prototype,e),n&&H(t,n),t}function Y(t,e){return!e||"object"!==D(e)&&"function"!==typeof e?J(t):e}function J(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Q(t){return Q=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Q(t)}function V(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&B(t,e)}function B(t,e){return B=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},B(t,e)}var W=function(t){function e(){var t;return G(this,e),t=Y(this,Q(e).apply(this,arguments)),t.participantId=0,t}return V(e,t),M(e,[{key:"created",value:function(){this.participantId=Number(this.$route.params.participantId)}},{key:"updateRouteParams",value:function(t){this.participantId=Number(t.params.participantId)}}]),e}(o["c"]);Object(a["a"])([Object(o["d"])("$route")],W.prototype,"updateRouteParams",null),W=Object(a["a"])([Object(o["a"])({components:{FilingForm:U}})],W);var z=W,K=z,X=(n("356b"),Object(L["a"])(K,r,i,!1,null,"702ef76e",null));e["default"]=X.exports},a840:function(t,e,n){}}]);