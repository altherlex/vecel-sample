(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6de39259"],{1058:function(t,e,r){"use strict";var a=r("19fe"),o=r.n(a);o.a},"19fe":function(t,e,r){},"66e6":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"container parent-page-container"},[r("div",{staticClass:"table-header"},[r("p",{staticClass:"table-title"},[t._v(t._s(t.$t("catalogueItems")))]),t.uHasGroup(t.USER_GROUP_AGENCY_ADMIN)?r("router-link",{staticClass:"btn primary-action-btn",attrs:{tag:"button",to:{name:"newProduct"}}},[r("font-awesome-icon",{attrs:{icon:"plus"}}),t._v(" "+t._s(t.$t("createCatalogueItem"))+" ")],1):t._e()],1),r("div",{staticClass:"recursive-table"},[r("div",{staticClass:"table-filter-bar"},[r("div",{staticClass:"table-filter-icon"},[r("font-awesome-icon",{attrs:{icon:"search"}})],1),r("div",{staticClass:"table-filter"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"form-control",class:{inputActive:""!==t.name},attrs:{type:"text",name:"Name",placeholder:t.$t("name")},domProps:{value:t.name},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.createFilter())},input:function(e){e.target.composing||(t.name=e.target.value)}}})]),r("div",{staticClass:"table-filter"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.code,expression:"code"}],staticClass:"form-control",class:{inputActive:""!==t.code},attrs:{type:"text",name:"Code",placeholder:t.$t("code")},domProps:{value:t.code},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.createFilter())},input:function(e){e.target.composing||(t.code=e.target.value)}}})]),r("div",{staticClass:"table-filter-clear"},[t.defaultFilter!==t.filter?r("font-awesome-icon",{attrs:{icon:"times",title:t.$t("clearFilter")},on:{click:function(e){return t.removeFilter()}}}):t._e()],1)]),r("div",{staticClass:"recursive-table-header"},[r("div",{staticClass:"recursive-table-header-data left-align",style:{flex:1.5,indent:t.indent}},[t._v(" "+t._s(t.$t("name"))+" ")]),r("div",{staticClass:"recursive-table-header-data left-align",style:{flex:.5}},[t._v(" "+t._s(t.$t("code"))+" ")]),r("div",{staticClass:"recursive-table-header-data left-align",style:{flex:.5}},[t._v(" "+t._s(t.$t("unit"))+" ")]),r("div",{staticClass:"recursive-table-header-data",style:{flex:.5}},[t._v(" "+t._s(t.$t("order"))+" ")]),r("div",{staticClass:"recursive-table-header-data left-align",style:{flex:2}},[t._v(" "+t._s(t.$t("description"))+" ")]),r("div",{staticClass:"recursive-table-header-data table-data-icon-width"})]),t.productReady?r("div",{ref:"recursiveTableBody",staticClass:"recursive-table-body"},t._l(t.productCategories,(function(t){return r("div",{key:t.id,staticClass:"parent-recursive-table-block"},[r("RecursiveProductCatalogueTable",{attrs:{productCategory:t,depth:0}})],1)})),0):t._e(),r("div",{staticClass:"table-empty-loading-state"},[t.productReady?t._e():r("div",{staticClass:"table-loading"},[r("LoadingIcon")],1),r("div",{directives:[{name:"show",rawName:"v-show",value:t.noResults&&t.productReady,expression:"noResults && productReady"}],staticClass:"table-empty-state large-text"},[t._v(" "+t._s(t.$t("emptyState.productCategories"))+" ")])])])])])},o=[],n=r("a34a"),i=r.n(n),s=r("9ab4"),c=r("2fe1"),l=r("60a3"),u=r("bc3a"),d=r.n(u),f=r("2e75"),p=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t.uCategoryWillHaveProducts(t.productCategory)?r("div",{staticClass:"recursive-table-block-header",style:t.indent,on:{click:t.toggleChildren}},[r("font-awesome-icon",{directives:[{name:"show",rawName:"v-show",value:!t.showChildren,expression:"!showChildren"}],attrs:{icon:"plus-square"}}),r("font-awesome-icon",{directives:[{name:"show",rawName:"v-show",value:t.showChildren,expression:"showChildren"}],attrs:{icon:"minus-square"}}),t._v(" "+t._s(t.productCategory.name[t.uLangFromLocale(t.$i18n.locale)])+" ")],1):t._e(),r("div",{directives:[{name:"show",rawName:"v-show",value:t.productCategory.products&&t.showChildren,expression:"productCategory.products && showChildren"}]},t._l(t.productCategory.products,(function(e){return r("div",{key:e.code,staticClass:"recursive-table-body-row"},[r("div",{staticClass:"recursive-table-body-data left-align",style:{flex:1.5}},[r("span",{style:t.indent},[t._v(t._s(e.name[t.uLangFromLocale(t.$i18n.locale)]))])]),r("div",{staticClass:"recursive-table-body-data left-align",style:{flex:.5}},[t._v(" "+t._s(e.code)+" ")]),r("div",{staticClass:"recursive-table-body-data left-align",style:{flex:.5}},[t._v(" "+t._s(t.PRODUCT_UNITS_MASTER[e.quantityUnit])+" ")]),r("div",{staticClass:"recursive-table-body-data",style:{flex:.5}},[t._v(" "+t._s(e.displayOrder)+" ")]),r("div",{staticClass:"recursive-table-body-data left-align",style:{flex:2},domProps:{innerHTML:t._s(e.description[t.uLangFromLocale(t.$i18n.locale)])}}),r("div",{staticClass:"recursive-table-body-data left-align table-data-icon-width"},[r("router-link",{staticClass:"btn icon-btn",attrs:{tag:"button",to:{name:"product",params:{productId:e.id}}}},[t.uHasGroup(t.USER_GROUP_AGENCY_ADMIN)?[r("font-awesome-icon",{attrs:{icon:["fa","edit"],title:t.$t("update")}})]:[r("font-awesome-icon",{attrs:{icon:["fa","eye"],title:t.$t("view")}})]],2)],1)])})),0),t._l(t.productCategory.productCategories,(function(e){return r("RecursiveProductCatalogueTable",{directives:[{name:"show",rawName:"v-show",value:t.showChildren,expression:"showChildren"}],key:e.id,attrs:{productCategory:e,depth:t.depth+1}})}))],2)},v=[];function y(t){return y="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(t)}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function b(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function m(t,e,r){return e&&b(t.prototype,e),r&&b(t,r),t}function g(t,e){return!e||"object"!==y(e)&&"function"!==typeof e?C(t):e}function C(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function w(t){return w=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},w(t)}function _(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&O(t,e)}function O(t,e){return O=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},O(t,e)}var k=function(t){function e(){var t;return h(this,e),t=g(this,w(e).apply(this,arguments)),t.showChildren=!0,t}return _(e,t),m(e,[{key:"toggleChildren",value:function(){this.showChildren=!this.showChildren}},{key:"indent",get:function(){return{paddingLeft:"".concat(30*this.depth,"px")}}}]),e}(Object(c["c"])(f["a"]));Object(s["a"])([Object(l["b"])()],k.prototype,"productCategory",void 0),Object(s["a"])([Object(l["b"])()],k.prototype,"depth",void 0),k=Object(s["a"])([Object(l["a"])({name:"RecursiveProductCatalogueTable"})],k);var P=k,x=P,R=(r("1058"),r("2877")),j=Object(R["a"])(x,p,v,!1,null,"7bbc160f",null),S=j.exports,$=r("c5af"),T=r("2f62");function E(t){return E="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E(t)}function N(t,e,r,a,o,n,i){try{var s=t[n](i),c=s.value}catch(l){return void r(l)}s.done?e(c):Promise.resolve(c).then(a,o)}function L(t){return function(){var e=this,r=arguments;return new Promise((function(a,o){var n=t.apply(e,r);function i(t){N(n,a,o,i,s,"next",t)}function s(t){N(n,a,o,i,s,"throw",t)}i(void 0)}))}}function F(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function U(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function A(t,e,r){return e&&U(t.prototype,e),r&&U(t,r),t}function D(t,e){return!e||"object"!==E(e)&&"function"!==typeof e?I(t):e}function I(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function G(t){return G=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},G(t)}function H(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&q(t,e)}function q(t,e){return q=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},q(t,e)}var M=function(t){function e(){var t;return F(this,e),t=D(this,G(e).apply(this,arguments)),t.productCategories={},t.products=[],t.productCategoryDepth=1,t.name="",t.code="",t.productReady=!1,t.defaultFilter="?",t.filter="?",t.noResults=!1,t}return H(e,t),A(e,[{key:"mounted",value:function(){this.uSetSupportToggle(this.SUPPORT_PANEL_PRODUCTS),this.getProducts()}},{key:"updated",value:function(){this.hasResults()}},{key:"createFilter",value:function(){var t=L(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.filter="?",this.name&&(this.filter+="name=".concat(this.name,"&")),this.code&&(this.filter+="code=".concat(this.code,"&")),this.getProducts();case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"removeFilter",value:function(){var t=L(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.name="",this.code="",this.filter="?",this.getProducts();case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getProducts",value:function(){var t=this;this.productReady=!1,d.a.get("".concat("http://localhost:8000/api","/list-products/").concat(this.filter)).then((function(e){t.productCategories=t.uRecursiveCamel(e.data);for(var r=0;r<t.productCategories.length;r+=1)t.populateProductCategory(t.productCategories[r])})).catch((function(e){t.uRequestErrorHandler(e)})).finally((function(){t.productReady=!0}))}},{key:"populateProductCategory",value:function(t){if(t.productCategories&&t.productCategories.length>0)for(var e=t.productCategories.sort((function(t,e){return t.displayOrder-e.displayOrder})),r=0;r<e.length;r+=1)this.populateProductCategory(e[r])}},{key:"hasResults",value:function(){this.$refs.recursiveTableBody&&(this.noResults=this.$refs.recursiveTableBody.clientHeight<10)}},{key:"indent",get:function(){return{marginLeft:"".concat(30*this.productCategoryDepth,"px")}}}]),e}(Object(c["c"])(f["a"]));M=Object(s["a"])([Object(l["a"])({components:{RecursiveProductCatalogueTable:S,LoadingIcon:$["a"]},computed:Object(T["b"])(["instructions"])})],M);var B=M,J=B,Y=(r("6a09"),Object(R["a"])(J,a,o,!1,null,"209b2aec",null));e["default"]=Y.exports},"6a09":function(t,e,r){"use strict";var a=r("92f4"),o=r.n(a);o.a},"92f4":function(t,e,r){}}]);