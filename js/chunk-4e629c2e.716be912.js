(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4e629c2e"],{"019a":function(t,e,a){},"07e0":function(t,e,a){},"07e4":function(t,e,a){"use strict";var i=a("f10e"),s=a.n(i);s.a},"08e7":function(t,e,a){},"09fb":function(t,e,a){},"14ac":function(t,e,a){},"19be":function(t,e,a){"use strict";var i=a("4a57"),s=a.n(i);s.a},"19f1":function(t,e,a){},"1eac":function(t,e,a){"use strict";var i=a("14ac"),s=a.n(i);s.a},"238e":function(t,e,a){"use strict";var i=a("717e"),s=a.n(i);s.a},"25ac":function(t,e,a){},2674:function(t,e,a){"use strict";var i=a("e62e"),s=a.n(i);s.a},"29af":function(t,e,a){},"2c6e":function(t,e,a){"use strict";var i=a("19f1"),s=a.n(i);s.a},"31c9":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.showModal?a("transition",{attrs:{name:"modal"}},[a("div",{staticClass:"modal-mask"},[a("div",{staticClass:"modal-wrapper modal-dialog"},[a("div",{staticClass:"modal-container modal-content"},[a("div",{staticClass:"modal-header"},[a("p",{staticClass:"modal-title"},[t._v(" "+t._s(t.$t("updateUserRoles"))+" ")])]),a("div",{staticClass:"modal-body"},[a("form",[t.user.contact?a("div",{staticClass:"detail-list"},[a("p",[a("span",{staticClass:"list-label"},[t._v(t._s(t.$t("name"))+":")]),t._v(" "+t._s(t.user.contact.firstName)+" "+t._s(t.user.contact.lastName)+" ")])]):t._e(),a("div",{staticClass:"detail-list"},[a("p",[a("span",{staticClass:"list-label"},[t._v(t._s(t.$t("email"))+":")]),t._v(" "+t._s(t.user.emailAddress)+" ")])]),a("div",{staticClass:"detail-list"},[a("p",[a("span",{staticClass:"list-label"},[t._v(t._s(t.$t("lastLogin"))+":")]),t._v(" "+t._s(t.user.lastLogin?t.uFormatDate(new Date(t.user.lastLogin)):t.$t("noRecord"))+" ")])]),t.user.status===t.USER_STATUS_INACTIVE?a("div",{staticClass:"detail-list"},[a("p",[a("span",{staticClass:"list-label"},[t._v(t._s(t.$t("status"))+":")]),a("span",{staticClass:"state--error"},[t._v(" "+t._s(t.$t("deactivated"))+" ")])])]):t._e(),t.participantId?a("div",{staticClass:"form-group"},[a("div",{staticClass:"form-check"},[a("b-form-checkbox",{staticClass:"form-check-input",attrs:{type:"checkbox"},on:{change:function(e){t.memberUnchanged=!1}},model:{value:t.memberOfOrg,callback:function(e){t.memberOfOrg=e},expression:"memberOfOrg"}}),a("label",{staticClass:"form-check-label"},[t._v(" "+t._s(t.$t("memberOfOrg"))+" ")]),a("Tooltip",{attrs:{tooltip:t.uFindInstruction(this.INVITEFORM_INVITE_ORG)}})],1)]):t._e(),t.participantId?a("div",{staticClass:"form-group"},[a("label",[t._v(" "+t._s(t.$t("businesses"))+" ")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedRemitters,expression:"selectedRemitters"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"custom-select",attrs:{multiple:"",disabled:t.memberOfOrg,name:"remitters"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selectedRemitters=e.target.multiple?a:a[0]}}},t._l(t.participants,(function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(" "+t._s(e.registrationNo)+" "+t._s(e.businessName)+" ")])})),0)]):t._e(),a("div",[a("div",{staticClass:"form-group",style:{"margin-right":"10px",display:"inline-block"}},[a("div",{staticClass:"detail-list"},[a("span",{staticClass:"list-label"},[t._v(t._s(t.$t("roles"))+":")])]),t._l(t.groups,(function(e){return a("div",{key:e.id,staticClass:"form-group"},[a("div",{staticClass:"form-check"},[a("b-form-checkbox",{staticClass:"form-check-input",attrs:{id:e.name,value:e,type:"checkbox"},model:{value:t.selectedGroups,callback:function(e){t.selectedGroups=e},expression:"selectedGroups"}}),a("label",{staticClass:"form-check-label",attrs:{for:e}},[t._v(" "+t._s(t.uShowGroupName(e.name))+" ")])],1)])}))],2),t.selectedGroups.some((function(e){return e.name===t.USER_GROUP_PARTICIPANT_DATA||e.name===t.USER_GROUP_PARTICIPANT_APPROVER}))&&t.uConfig(t.SPECIAL_FILER_ENABLED)?a("div",{staticClass:"form-group",style:{display:"inline-block"}},[a("div",{staticClass:"detail-list"},[a("span",{staticClass:"list-label"},[t._v(t._s(t.$t("filingRoles"))+":")])]),t._l(t.FILING_TYPES,(function(e,i){return a("div",{key:i.id,staticClass:"form-group"},[a("div",{staticClass:"form-check"},[a("b-form-checkbox",{staticClass:"form-check-input",attrs:{id:e,value:i,type:"checkbox"},model:{value:t.filingTypesSelected,callback:function(e){t.filingTypesSelected=e},expression:"filingTypesSelected"}}),a("label",{staticClass:"form-check-label",attrs:{for:i}},[t._v(" "+t._s("Special"===t.FILING_TYPES[i]?t.uFindInstruction(t.DISPLAY_SPECIAL_FILER):t.FILING_TYPES[i])+" ")])],1)])}))],2):t._e()])])]),a("div",{staticClass:"modal-footer"},[a("div",{staticClass:"modal-footer-success-message"},[t._v(" "+t._s(t.successMessage)+" ")]),!t.closeButtonEnabled&&(t.uIsMasterUser()&&t.uCanModifyParticipantData(t.participantId)||t.currentUser.agencyUser&&t.uIsMasterUser())?a("button",{staticClass:"btn secondary-action-btn",on:{click:function(e){return e.preventDefault(),t.openRemoveModal()}}},[t._v(" "+t._s(t.deactivateButton?t.$t("deactivate"):t.$t("remove"))+" ")]):t._e(),a("div",{staticClass:"flex-spacer"}),t.closeButtonEnabled?a("button",{staticClass:"btn primary-action-btn",on:{click:function(e){e.preventDefault(),t.$emit("hideModal"),t.$emit("updateUsers"),t.closeButtonEnabled=!1,t.submitted=!1,t.successMessage=""}}},[t._v(" "+t._s(t.$t("close"))+" ")]):t._e(),t.closeButtonEnabled?t._e():a("button",{staticClass:"btn secondary-action-btn",on:{click:function(e){return e.preventDefault(),t.$emit("hideModal")}}},[t._v(" "+t._s(t.$t("cancel"))+" ")]),t.closeButtonEnabled||!t.uIsMasterUser()||t.participantId&&!t.uCanModifyParticipantData(t.participantId)?t._e():a("button",{staticClass:"btn primary-action-btn",attrs:{disabled:t.submitted||t.errors.any(),type:"submit"},on:{click:function(e){return e.preventDefault(),t.checkGroups()}}},[t._v(" "+t._s(t.$t("update"))+" ")])])])])])]):t._e(),a("ConfirmationModal",{attrs:{showModal:t.showConfirmationModal,okDisabled:t.submitted},on:{ok:t.update,cancel:t.cancelModal}},[a("h3",{attrs:{slot:"header"},slot:"header"},[t._v(t._s(t.$t("updateUserRoles")))]),a("div",{attrs:{slot:"body"},slot:"body"},[t._v(" "+t._s(t.$t("giveMasterUserConfirmation"))+" ")])]),a("ConfirmationModal",{attrs:{showModal:t.showRemoveUserModal},on:{ok:t.removeUser,cancel:t.cancelModal}},[a("h3",{attrs:{slot:"header"},slot:"header"},[t._v(t._s(t.deactivateButton?t.$t("deactivateUser"):t.$t("removeUser")))]),a("div",{attrs:{slot:"body"},slot:"body"},[t._v(" "+t._s(t.participantId?t.deactivateButton?t.$t("deactivateUserConfirmation"):t.$t("removeUserConfirmation"):t.$t("removeUserConfirmationAgency"))+" ")])])],1)},s=[],r=a("a34a"),n=a.n(r),o=a("9ab4"),c=a("2fe1"),l=a("60a3"),u=a("2f62"),p=a("bc3a"),d=a.n(p),f=a("2e75"),m=a("0f7b"),v=a("1f24");function h(t){return h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function _(t,e,a,i,s,r,n){try{var o=t[r](n),c=o.value}catch(l){return void a(l)}o.done?e(c):Promise.resolve(c).then(i,s)}function b(t){return function(){var e=this,a=arguments;return new Promise((function(i,s){var r=t.apply(e,a);function n(t){_(r,i,s,n,o,"next",t)}function o(t){_(r,i,s,n,o,"throw",t)}n(void 0)}))}}function y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function C(t,e,a){return e&&g(t.prototype,e),a&&g(t,a),t}function T(t,e){return!e||"object"!==h(e)&&"function"!==typeof e?E(t):e}function E(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function O(t){return O=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},O(t)}function R(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&I(t,e)}function I(t,e){return I=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},I(t,e)}var P=function(t){function e(){var t;return y(this,e),t=T(this,O(e).apply(this,arguments)),t.submitted=!1,t.showRemoveUserModal=!1,t.showConfirmationModal=!1,t.deactivateButton=!1,t.closeButtonEnabled=!1,t.successMessage="",t.participantId=0,t.memberOfOrg=!1,t.selectedGroups=[],t.selectedRemitters=[],t.remainingRemitters=[],t.filingTypesSelected=[],t}return R(e,t),C(e,[{key:"setParticipantId",value:function(t){t&&t.id&&(this.participantId=t.id)}},{key:"updateShowModal",value:function(){var t=this;this.memberOfOrg=!1;for(var e=[],a=[],i=0;i<this.user.participantUsers.length;i+=1)this.user.participantUsers[i].participant.participant===this.participantId?e.push(this.user.participantUsers[i].participant.id):this.user.participantUsers[i].participant.id!==this.participantId&&a.push(this.user.participantUsers[i].participant.id),this.user.memberOfOrg&&(this.memberOfOrg=!0);this.selectedRemitters=e,this.remainingRemitters=a,this.selectedGroups=this.user.groups,this.filingTypesSelected=[],this.user.filingTypes.length&&this.user.filingTypes.forEach((function(e){return t.filingTypesSelected.push(String(e))})),this.setRemoveOrDeactivate()}},{key:"mounted",value:function(){var t=this;this.setParticipantId(this.participant),this.currentUser.filingTypes.length&&this.currentUser.filingTypes.forEach((function(e){return t.filingTypesSelected.push(String(e))}))}},{key:"checkGroups",value:function(){this.user.groups.find((function(t){return"Participant-Master User"===t.name}))||this.user.groups.find((function(t){return"Agency-Master User"===t.name}))?this.update():this.selectedGroups.find((function(t){return"Participant-Master User"===t.name}))||this.selectedGroups.find((function(t){return"Agency-Master User"===t.name}))?this.openConfirmationModal():this.update()}},{key:"setRemoveOrDeactivate",value:function(){this.remainingRemitters.length>0?this.deactivateButton=!1:null==this.user.agencyUser&&(this.deactivateButton=!0)}},{key:"update",value:function(){var t=b(n.a.mark((function t(){var e,a,i=this;return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.submitted=!0,e=this.selectedGroups.map((function(t){return t.id})),a={group_ids:e,participant_ids:this.memberOfOrg?[this.participantId]:this.selectedRemitters,filing_types:this.filingTypesSelected},this.participantId&&(a.organization=this.participantId),d.a.patch("".concat("http://localhost:8000/api","/custom-users/").concat(this.user.id,"/"),a).then((function(t){if(i.user.id===i.currentUser.id){var e=i.uRecursiveCamel(t.data);i.$store.dispatch("update_user",e)}i.successMessage=t.data.message,i.closeButtonEnabled=!0,i.showConfirmationModal=!1})).catch((function(t){i.submitted=!1,i.$emit("hideModal"),i.uRequestErrorHandler(t)}));case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"removeUser",value:function(){var t=b(n.a.mark((function t(){var e=this;return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.participantId?d.a.patch("".concat("http://localhost:8000/api","/custom-users/").concat(this.user.id,"/"),{organization:this.participantId,remove:!0}).then(function(){var t=b(n.a.mark((function t(a){var i;return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.showRemoveUserModal=!1,e.$emit("hideModal"),e.$emit("updateUsers"),e.user.id===e.currentUser.id&&(i=e.uRecursiveCamel(a.data),e.$store.dispatch("update_user",i));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.showRemoveUserModal=!1,e.$emit("hideModal"),e.uRequestErrorHandler(t)})):d.a.delete("".concat("http://localhost:8000/api","/agency-users/").concat(this.user.agencyUser.id,"/")).then(function(){var t=b(n.a.mark((function t(a){var i;return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.showRemoveUserModal=!1,e.$emit("hideModal"),e.$emit("updateUsers"),e.user.id===e.currentUser.id&&(i=e.uRecursiveCamel(a.data),e.$store.dispatch("update_user",i));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.showRemoveUserModal=!1,e.$emit("hideModal"),e.uRequestErrorHandler(t)}));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"openConfirmationModal",value:function(){this.showConfirmationModal=!0}},{key:"openRemoveModal",value:function(){this.showRemoveUserModal=!0}},{key:"cancelModal",value:function(){this.showConfirmationModal=!1,this.showRemoveUserModal=!1}}]),e}(Object(c["c"])(f["a"]));Object(o["a"])([Object(l["b"])()],P.prototype,"showModal",void 0),Object(o["a"])([Object(l["b"])()],P.prototype,"groups",void 0),Object(o["a"])([Object(l["b"])()],P.prototype,"user",void 0),Object(o["a"])([Object(l["b"])()],P.prototype,"participant",void 0),Object(o["a"])([Object(l["b"])()],P.prototype,"participants",void 0),Object(o["a"])([Object(l["d"])("participant")],P.prototype,"setParticipantId",null),Object(o["a"])([Object(l["d"])("showModal")],P.prototype,"updateShowModal",null),P=Object(o["a"])([Object(l["a"])({components:{ConfirmationModal:m["a"],Tooltip:v["a"]},computed:Object(u["b"])(["currentUser"])})],P);var S=P,N=S,w=(a("60bc"),a("2c6e"),a("2877")),A=Object(w["a"])(N,i,s,!1,null,"2e69b617",null);e["a"]=A.exports},4410:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.type!==t.PARTICIPANT_TYPES_REMITTER||t.businessLoading?t._e():a("RemitterBlock",{attrs:{participant:t.participant,remitter:t.business,parentParticipant:t.parentParticipant},on:{participantHeaderUpdated:t.getParticipantData}}),t.type!==t.PARTICIPANT_TYPES_GENERATOR||t.businessLoading?t._e():a("GeneratorBlock",{attrs:{participant:t.participant,generator:t.business,parentParticipant:t.parentParticipant},on:{participantHeaderUpdated:t.getParticipantData}}),t.type===t.PARTICIPANT_TYPES_GROUP?a("OrganizationBlock",{attrs:{participant:t.participant},on:{participantHeaderUpdated:t.getParticipantData}}):t._e()],1)},s=[],r=a("a34a"),n=a.n(r),o=a("9ab4"),c=a("2fe1"),l=a("2f62"),u=a("60a3"),p=a("2e75"),d=a("7358"),f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.remitter?a("ParticipantTemplate",{attrs:{blockState:t.menuState,businessStatus:t.remitter.status,business:t.remitter,participant:t.participant,parentParticipant:t.parentParticipant,instructionId:t.REMITTERFORM_INSTRUC_INTRO},on:{stateUpdated:t.setBlockState,participantDataUpdated:t.setParticipantDataUpdated}},[a("template",{slot:"main-form-title"},[t._v(" "+t._s(t.$t("remitter"))+" ")]),a("template",{slot:"main-form"},[a("RemitterForm",{attrs:{updating:!0,remitterId:t.remitter.id,participant:t.participant,parentParticipant:t.parentParticipant},on:{remitterUpdated:t.updateParticipantHeader,historyUpdated:t.getHistoryRecords}})],1),a("template",{slot:"tabs-one"}),a("template",{slot:"content-one"}),a("template",{slot:"tabs-two"},[a("b-nav-item",[a("div",{staticClass:"router-tab",class:{"router-link-active":10===t.menuState},on:{click:function(e){return t.setState(10,t.HISTORYTABLE_INSTRUC_INTRO)}}},[t._v(" "+t._s(t.$t("history"))+" ")])])],1),10===t.menuState?a("template",{slot:"content-two"},[a("div",{staticClass:"table-header"},[a("p",{staticClass:"table-title"},[t._v(t._s(t.$t("history")))])]),a("CustomTable",{attrs:{data:t.historyRecords,columns:[[t.$t("effectiveDate"),"","effectiveDate",1,"left"],[t.$t("status"),"","status",.6,"left"],[t.$t("reasonCode"),"","reason",.6,"center"],[t.$t("filingFrequency"),"","filingFrequency",.6,"left"],[t.$t("isRegularFiler"),"","isRegularFiler",.6,"left"],[t.uFindInstruction(this.DISPLAY_SPECIAL_FILER),"","isSpecialFiler",.6,"left"],[t.uFindInstruction(this.DISPLAY_RETURN_TO_REMITTER),"","returnToRemitter",1,"left"],[t.$t("taxExempt"),"","taxExempt",.6,"left"],[t.$t("organization"),"","organization",1,"left"],[t.$t("changedBy"),"","changedBy",.6,"left"],[t.$t("changeDate"),"","changeDate",1,"center"]],loading:t.historyLoading,emptyStateMessage:t.$t("emptyState.history"),totalData:t.totalHistoryRecords,scrollWidth:1120,noActions:!0,highlightRow:t.highlightRow},on:{dataRequest:t.getHistoryRecords}})],1):t._e()],2):t._e()],1)},m=[],v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Navbar",{attrs:{participant:t.participant,parentParticipant:t.parentParticipant,business:t.business,backButton:{name:"participants"}}},[a("template",{slot:"router-tabs"},[a("b-nav-item",[a("div",{staticClass:"router-tab",class:{"router-link-active":1===t.menuState},on:{click:function(e){return t.setState(1)}}},[t._t("main-form-title")],2)]),t._t("tabs-one"),a("b-nav-item",[a("div",{staticClass:"router-tab",class:{"router-link-active":2===t.menuState},on:{click:function(e){return t.setState(2)}}},[t._v(" "+t._s(t.$t("addresses"))+" ")])]),a("b-nav-item",[a("div",{staticClass:"router-tab",class:{"router-link-active":3===t.menuState},on:{click:function(e){return t.setState(3)}}},[t._v(" "+t._s(t.$t("contacts"))+" ")])]),a("b-nav-item",[a("div",{staticClass:"router-tab",class:{"router-link-active":4===t.menuState},on:{click:function(e){return t.setState(4)}}},[t._v(" "+t._s(t.$t("notes&Files"))+" ")])]),t._t("tabs-two"),a("div",{staticClass:"flex-spacer"})],2)],2),a("div",{staticClass:"container parent-page-container business-container action-navbar-container"},[t.participant.type===t.PARTICIPANT_TYPES_GROUP||t.businessStatus!==t.PARTICIPANT_STATUS_IN_PROGRESS&&t.businessStatus!==t.PARTICIPANT_STATUS_NEW?t._e():a("div",{staticClass:"participant-submit-bar"},[Number(t.uConfig(t.PHYSICAL_ADDRESS_REQUIRED))!==t.PARTICIPANT_RULE_LEVEL_NOT_REQUIRED?a("div",{staticClass:"submit-bar-requirement"},[a("span",[t._v(" "+t._s(t.$t("physicalAddress"))+" "+t._s(t.PARTICIPANT_RULE_LEVEL[t.uConfig(t.PHYSICAL_ADDRESS_REQUIRED)]))]),t.physicalAddress?a("font-awesome-icon",{attrs:{icon:"check-circle"}}):t._e(),t.physicalAddress?t._e():a("font-awesome-icon",{attrs:{icon:"exclamation-circle"}})],1):t._e(),Number(t.uConfig(t.OWNER_MANAGER_CONTACT_REQUIRED))!==t.PARTICIPANT_RULE_LEVEL_NOT_REQUIRED?a("div",{staticClass:"submit-bar-requirement"},[a("span",[t._v(" "+t._s(t.$t("ownerOrManagerContact"))+" "+t._s(t.PARTICIPANT_RULE_LEVEL[t.uConfig(t.OWNER_MANAGER_CONTACT_REQUIRED)]))]),t.ownerOrManagerContact?a("font-awesome-icon",{attrs:{icon:"check-circle"}}):t._e(),t.ownerOrManagerContact?t._e():a("font-awesome-icon",{attrs:{icon:"exclamation-circle"}})],1):t._e(),Number(t.uConfig(t.REGISTRATION_FILE_REQUIRED))!==t.PARTICIPANT_RULE_LEVEL_NOT_REQUIRED?a("div",{staticClass:"submit-bar-requirement"},[a("span",[t._v(t._s(t.$t("fileOn"))+" > "+t._s(t.uFindInstruction(this.DISPLAY_MEMBERSHIP_AGREEMENT))+" on "+t._s(t.PARTICIPANT_RULE_LEVEL[t.uConfig(t.REGISTRATION_FILE_REQUIRED)])+" ")]),t.uploadedAgreement?a("font-awesome-icon",{attrs:{icon:"check-circle"}}):t._e(),t.uploadedAgreement?t._e():a("font-awesome-icon",{attrs:{icon:"exclamation-circle"}})],1):t._e(),Number(t.uConfig(t.PHYSICAL_ADDRESS_REQUIRED))===this.PARTICIPANT_RULE_LEVEL_NOT_REQUIRED&&Number(t.uConfig(t.OWNER_MANAGER_CONTACT_REQUIRED))===this.PARTICIPANT_RULE_LEVEL_NOT_REQUIRED&&Number(t.uConfig(t.REGISTRATION_FILE_REQUIRED))===this.PARTICIPANT_RULE_LEVEL_NOT_REQUIRED?a("div",{style:{lineHeight:"40px"}},[t._v(" "+t._s(t.$t("noBusinessRequirements"))+" ")]):t._e(),a("div",{staticClass:"flex-spacer"}),a("Tooltip",{attrs:{tooltip:t.uFindInstruction(this.PARTICIPANTFORM_INFOTIP_SUBMIT)}}),a("button",{staticClass:"btn primary-action-btn",attrs:{disabled:!((t.ownerOrManagerContact||Number(t.uConfig(t.OWNER_MANAGER_CONTACT_REQUIRED))===this.PARTICIPANT_RULE_LEVEL_NOT_REQUIRED)&&(t.physicalAddress||Number(t.uConfig(t.PHYSICAL_ADDRESS_REQUIRED))===this.PARTICIPANT_RULE_LEVEL_NOT_REQUIRED)&&(t.uploadedAgreement||Number(t.uConfig(t.REGISTRATION_FILE_REQUIRED))===this.PARTICIPANT_RULE_LEVEL_NOT_REQUIRED)),type:"submit"},on:{click:function(e){return t.submitForm()}}},[t._v(" "+t._s(t.$t("submit"))+" ")])],1),t.uIsParticipantUser()&&t.uHasGroup(t.USER_GROUP_PARTICIPANT_MASTER)&&t.businessStatus===t.PARTICIPANT_STATUS_SUBMITTED?a("div",{staticClass:"table-error-message--permissions"},[t._v(" "+t._s(t.$t("editDisabledWhileSubmitted"))+" ")]):t._e(),t.uIsParticipantUser()&&t.uHasGroup(t.USER_GROUP_PARTICIPANT_MASTER)&&t.businessStatus===t.PARTICIPANT_STATUS_INACTIVE?a("div",{staticClass:"table-error-message--permissions"},[t._v(" "+t._s(t.$t("editDisabledWhileInactive"))+" ")]):t._e(),a("div",[1===t.menuState?a("div",[t._t("main-form")],2):t._e(),t._t("content-one"),2===t.menuState?a("div",[a("AddressTable",{attrs:{orgTable:t.participant.type===t.PARTICIPANT_TYPES_GROUP,businessStatus:t.businessStatus,participant:t.participant,parentParticipant:t.parentParticipant,addresses:t.addresses,addressesLoading:t.addressesLoading},on:{updateAddress:t.getAddresses}})],1):t._e(),3===t.menuState?a("div",[a("div",{staticClass:"table-header"},[a("p",{staticClass:"table-title"},[t._v(t._s(t.$t("contacts")))]),t.uIsMasterUser()&&t.uCanModifyParticipantData(t.participant.id)&&t.uBusinessInEditableState(t.businessStatus)?a("button",{staticClass:"btn primary-action-btn",on:{click:function(e){return t.showContactFormModal()}}},[t._v(" "+t._s(t.$t("createContact"))+" ")]):t._e()]),a("CustomTable",{attrs:{data:t.contacts,columns:[[t.$t("level"),"","level",.4,"left"],[t.$t("name"),"","name",1,"left"],[t.$t("email"),"","emailAddress",1.7,"left"],[t.$t("telephoneNo"),"","telephoneNo",1.2,"left"],[t.$t("type"),"","type",1.2,"left"],[t.$t("roles"),"","roles",1.2,"left"]],loading:t.contactsLoading,emptyStateMessage:t.$t("emptyState.contacts"),totalData:t.totalContactData,scrollWidth:600},on:{toggleOptions:t.toggleOptions,actionCall:t.showContactFormModal,dataRequest:t.getContacts}})],1):t._e(),4===t.menuState?a("div",[a("ParticipantNotesTable",{attrs:{orgTable:t.participant.type===t.PARTICIPANT_TYPES_GROUP,businessStatus:t.businessStatus,participant:t.participant,parentParticipant:t.parentParticipant,participantNotes:t.notes,notesLoading:t.notesLoading},on:{updateNote:t.getNotes}})],1):t._e(),t._t("content-two")],2)]),a("ContactFormModal",{attrs:{businessStatus:t.businessStatus,showModal:t.showContactModal,updating:t.updatingContact,contact:t.selectedContact,participant:t.participant,parentParticipant:t.parentParticipant},on:{hideModal:function(e){t.showContactModal=!1},updateContacts:function(e){return t.getContacts(0,"",!0)}}})],1)},h=[],_=a("bc3a"),b=a.n(_),y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",[a("div",{staticClass:"table-header"},[a("p",{staticClass:"table-title"},[t._v(t._s(t.$t("notes&Files")))]),t.uIsMasterUser()&&t.uBusinessInEditableState(t.businessStatus)&&t.uCanModifyParticipantData(t.participant.id)?a("button",{staticClass:"btn primary-action-btn",on:{click:function(e){return t.openUpdateNoteForm()}}},[t._v(" "+t._s(t.$t("createParticipantNote"))+" ")]):t._e()]),a("div",{staticClass:"custom-table"},[a("div",{staticClass:"table-filter-bar"},[a("div",{staticClass:"table-filter-icon"},[a("font-awesome-icon",{attrs:{icon:"search"}})],1),a("div",{staticClass:"table-filter"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],staticClass:"form-control",class:{inputActive:""!==t.text},attrs:{type:"text",name:"Text",placeholder:t.$t("text")},domProps:{value:t.text},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.createFilter())},input:function(e){e.target.composing||(t.text=e.target.value)}}})]),a("div",{staticClass:"table-filter"},[a("b-form-select",{staticClass:"custom-select",attrs:{options:t.noteTypes,name:"Type"},on:{change:function(e){return t.createFilter()}},scopedSlots:t._u([{key:"first",fn:function(){return[a("option",{domProps:{value:-1}},[t._v(t._s(t.$t("type")))])]},proxy:!0}]),model:{value:t.type,callback:function(e){t.type=e},expression:"type"}})],1),a("div",{staticClass:"table-filter"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.category,expression:"category"}],staticClass:"custom-select",attrs:{name:"Category"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.category=e.target.multiple?a:a[0]},function(e){return e.preventDefault(),t.createFilter()}]}},[a("option",{attrs:{value:"-1"}},[t._v(t._s(t.$t("category")))]),t._l(Object.keys(t.NOTE_CATEGORIES),(function(e){return a("option",{key:e,domProps:{value:e}},[t._v(" "+t._s(t.NOTE_CATEGORIES[e])+" ")])}))],2)]),t.defaultFilter!==t.filter?a("div",{staticClass:"table-filter-clear"},[a("font-awesome-icon",{attrs:{icon:"times",title:t.$t("clearFilter")},on:{click:function(e){return t.removeFilter()}}})],1):t._e()]),a("div",{staticClass:"custom-table-header"},[t.orgTable?t._e():a("div",{staticClass:"custom-table-header-data left-align",style:{flex:.4}},[t._v(" "+t._s(t.$t("level"))+" ")]),a("div",{staticClass:"custom-table-header-data",style:{flex:.5}},[a("a",{staticClass:"ordering-link",on:{click:function(e){return t.setOrdering("date")}}},[t._v(" "+t._s(t.$t("date"))+" ")])]),a("div",{staticClass:"custom-table-header-data left-align"},[a("a",{staticClass:"ordering-link",on:{click:function(e){return t.setOrdering("type")}}},[t._v(" "+t._s(t.$t("type"))+" ")])]),a("div",{staticClass:"custom-table-header-data left-align",style:{flex:1.4}},[t._v(" "+t._s(t.$t("text"))+" ")]),a("div",{staticClass:"custom-table-header-data left-align"},[t._v(" "+t._s(t.$t("attachment"))+" ")]),a("div",{staticClass:"custom-table-header-data left-align",style:{flex:.5}},[a("a",{staticClass:"ordering-link",on:{click:function(e){return t.setOrdering("category")}}},[t._v(" "+t._s(t.$t("category"))+" ")])]),a("div",{staticClass:"custom-table-header-data table-data-icon-width"})]),a("div",{staticClass:"custom-table-body"},t._l(t.participantNotes,(function(e){return a("div",{key:e.id,staticClass:"custom-table-body-row"},[t.orgTable?t._e():a("div",{staticClass:"custom-table-body-data left-align",style:{flex:.4}},[t._v(" "+t._s(t.parentParticipant&&t.parentParticipant.id===e.sourceId?t.$t("org"):t.$t("business"))+" ")]),a("div",{staticClass:"custom-table-body-data",style:{flex:.5}},[t._v(" "+t._s(e.date)+" ")]),a("div",{staticClass:"custom-table-body-data left-align"},[t._v(" "+t._s(t.MASTER_NOTE_TYPES[e.type])+" ")]),a("div",{staticClass:"custom-table-body-data left-align",style:{flex:1.4}},[t._v(" "+t._s(e.text)+" ")]),a("div",{staticClass:"custom-table-body-data left-align"},[null!==e.fileName?a("div",{staticClass:"table-link",on:{click:function(a){return a.preventDefault(),t.downloadAttachment(e.id,e.fileName)}}},[t._v(" "+t._s(e.fileName)+" ")]):t._e()]),a("div",{staticClass:"custom-table-body-data left-align",style:{flex:.5}},[t._v(" "+t._s(t.uFirstWord(t.NOTE_CATEGORIES[e.category]))+" ")]),a("div",{staticClass:"custom-table-body-data table-data-icon-width"},[a("button",{staticClass:"btn icon-btn",on:{click:function(a){return t.openUpdateNoteForm(e.id,e.sourceId)}}},[!t.uIsMasterUser()||!t.uCanModifyParticipantData(e.sourceId)||e.noteReviewed&&t.uIsParticipantUser()||!t.uBusinessInEditableState(t.businessStatus)?[a("font-awesome-icon",{attrs:{icon:["fa","eye"],title:t.$t("view")}})]:[a("font-awesome-icon",{attrs:{icon:["fa","edit"],title:t.$t("update")}})]],2)])])})),0),t.notesLoading?a("div",{staticClass:"table-loading"},[a("LoadingIcon")],1):t._e(),0!==t.participantNotes.length||t.notesLoading?t._e():a("div",{staticClass:"table-empty-state large-text"},[t._v(" "+t._s(t.$t("emptyState.participantNotes"))+" ")])]),a("ParticipantNoteModalForm",{attrs:{businessStatus:t.businessStatus,showForm:t.showForm,updating:t.updating,participant:t.participant,participantNote:t.participantNote,selectedParticipantId:t.selectedParticipantId,parentParticipant:t.parentParticipant},on:{addNote:t.addNote,cancel:t.cancelForm}})],1)])},g=[],C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.showForm?a("div",[a("transition",{attrs:{name:"modal"}},[a("div",{staticClass:"modal-mask"},[a("div",{staticClass:"modal-wrapper modal-dialog"},[a("div",{staticClass:"modal-container modal-content"},[a("div",{staticClass:"modal-header"},[t.uIsMasterUser()&&t.uBusinessInEditableState(t.businessStatus)?[t.updating?t._e():a("p",{staticClass:"modal-title"},[t._v(t._s(t.$t("createParticipantNote")))]),t.updating?a("p",{staticClass:"modal-title"},[t._v(t._s(t.$t("updateParticipantNote")))]):t._e()]:[a("p",{staticClass:"modal-title"},[t._v(t._s(t.$t("viewParticipantNote")))])]],2),a("div",{staticClass:"modal-body"},[a("form",[t.updating?a("div",{staticClass:"detail-list"},[a("p",[a("span",{staticClass:"list-label"},[t._v(t._s(t.$t("date"))+":")]),t._v(" "+t._s(t.date)+" ")])]):t._e(),t.updating?t._e():a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("date")))]),a("Datepicker",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{lang:"en","value-type":"format",type:"text",name:"Date","data-vv-name":"Date",placeholder:t.$t("dateFormat")},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}),a("span",{staticClass:"form-error-message"},[t._v(t._s(t.errors.first("Date")))])],1),t.updating?a("div",{staticClass:"detail-list"},[a("p",[a("span",{staticClass:"list-label"},[t._v(t._s(t.$t("createdBy"))+":")]),t.createdBy?[t.createdBy.contact?[t._v(" "+t._s(t.createdBy.contact.firstName)+" "+t._s(t.createdBy.contact.lastName)+" ")]:[t._v(" "+t._s(t.createdBy.emailAddress)+" ")]]:[t._v(" "+t._s(t.$t("unknown"))+" ")]],2)]):t._e(),t.currentUser.agencyUser&&t.updating&&t.noteCategory===t.NOTE_CATEGORIES_USER?a("div",{staticClass:"form-group"},[a("div",{staticClass:"form-check"},[a("b-form-checkbox",{staticClass:"form-check-input",attrs:{type:"checkbox"},model:{value:t.noteReviewed,callback:function(e){t.noteReviewed=e},expression:"noteReviewed"}}),a("label",{staticClass:"form-check-label"},[t._v(" "+t._s(t.$t("noteReviewed"))+" ")]),a("Tooltip",{attrs:{tooltip:t.uFindInstruction(this.PARTICIPANTNOTEMODALFORM_INFOTIP_REVIEWED)}})],1)]):t._e(),t.uIsParticipantUser()?a("div",{staticClass:"detail-list"},[a("p",[a("span",{staticClass:"list-label"},[t._v(t._s(t.$t("noteCategory"))+":")]),t._v(" "+t._s(t.NOTE_CATEGORIES[t.noteCategory])+" ")]),t.updating?a("p",[a("span",{staticClass:"list-label"},[t._v(" "+t._s(t.$t("noteReviewed"))+": ")]),t._v(" "+t._s(t.noteReviewed?t.$t("yes"):t.$t("no"))+" "),a("Tooltip",{attrs:{tooltip:t.uFindInstruction(this.PARTICIPANTNOTEMODALFORM_INFOTIP_REVIEWED)}})],1):t._e()]):t._e(),t.currentUser.agencyUser?a("div",{staticClass:"form-group"},[a("label",[t._v(" "+t._s(t.$t("noteCategory"))+" "),a("Tooltip",{attrs:{tooltip:t.uFindInstruction(this.PARTICIPANTNOTEMODALFORM_INFOTIP_CATEGORY)}})],1),a("select",{directives:[{name:"model",rawName:"v-model",value:t.noteCategory,expression:"noteCategory"},{name:"validate",rawName:"v-validate",value:"required|min_value:0",expression:"'required|min_value:0'"}],staticClass:"custom-select",attrs:{name:"noteCategory"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.noteCategory=e.target.multiple?a:a[0]},function(e){return t.setNoteTypes()}]}},[a("option",{attrs:{disabled:"",value:"-1"}},[t._v(t._s(t.$t("selectNoteCategory")))]),t._l(Object.keys(t.NOTE_CATEGORIES),(function(e){return a("option",{key:e,domProps:{value:Number(e)}},[t._v(" "+t._s(t.NOTE_CATEGORIES[e])+" ")])}))],2),a("span",{staticClass:"form-error-message"},[t._v(t._s(t.errors.first("noteCategory")))])]):t._e(),a("div",{staticClass:"form-group"},[a("label",[t._v(" "+t._s(t.$t("noteType"))+" "),a("Tooltip",{attrs:{tooltip:t.uFindInstruction(this.PARTICIPANTNOTEMODALFORM_INFOTIP_NOTETYPE)}})],1),a("b-form-select",{directives:[{name:"validate",rawName:"v-validate",value:"required|min_value:0",expression:"'required|min_value:0'"}],staticClass:"custom-select",attrs:{disabled:t.noteReviewed&&t.uIsParticipantUser()||-1===t.noteCategory,options:t.noteTypes,name:"noteType"},scopedSlots:t._u([{key:"first",fn:function(){return[a("option",{attrs:{disabled:""},domProps:{value:-1}},[t._v(t._s(t.$t("selectNoteType")))])]},proxy:!0}],null,!1,1092721446),model:{value:t.noteType,callback:function(e){t.noteType=e},expression:"noteType"}}),a("span",{staticClass:"form-error-message"},[t._v(t._s(t.errors.first("noteType")))])],1),a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("fileAsNoun")))]),a("input",{directives:[{name:"validate",rawName:"v-validate"}],staticClass:"form-control input-file",style:{opacity:0},attrs:{disabled:t.noteReviewed&&t.uIsParticipantUser(),"data-vv-rules":"size|size:5000",type:"file",name:"file"},on:{change:t.getFile}}),a("input",{staticClass:"form-control",style:{marginTop:"-38px",zIndex:"-1"},attrs:{placeholder:t.fileName?t.fileName:t.$t("selectFile")}}),a("span",{staticClass:"form-error-message"},[t._v(t._s(t.errors.first("file")))])]),a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("text")))]),a("textarea",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.text,expression:"text"}],staticClass:"form-control",attrs:{disabled:t.noteReviewed&&t.uIsParticipantUser(),type:"text",name:"Text"},domProps:{value:t.text},on:{input:function(e){e.target.composing||(t.text=e.target.value)}}}),a("span",{staticClass:"form-error-message"},[t._v(t._s(t.errors.first("Text")))])])])]),a("div",{staticClass:"modal-footer"},[t.updating&&t.uIsMasterUser()&&t.uCanModifyParticipantData(t.participantNote.sourceId)&&(!t.participantNote.wasReviewed||!t.uIsParticipantUser())&&t.uBusinessInEditableState(t.businessStatus)?a("button",{staticClass:"btn secondary-action-btn",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.openDeleteModal(t.participantNote.id)}}},[t._v(" "+t._s(t.$t("remove"))+" ")]):t._e(),a("div",{staticClass:"flex-spacer"}),a("button",{staticClass:"btn secondary-action-btn",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.$emit("cancel")}}},[t._v(" "+t._s(t.$t("cancel"))+" ")]),a("button",{staticClass:"btn primary-action-btn",attrs:{disabled:t.uDisableParticipantDataForm(t.submitted,t.errors.any(),t.businessStatus,t.participant.id,t.updating,t.parentParticipantId,t.participantNote.onGroup)||t.noteReviewed&&t.uIsParticipantUser(),type:"submit"},on:{click:function(e){return e.preventDefault(),t.submitForm(e)}}},[t._v(" "+t._s(t.updating?t.$t("update"):t.$t("create"))+" ")])]),t.uIsMasterUser()?t._e():a("div",{staticClass:"form-error-message--permissions"},[t._v(" "+t._s(t.$t("higherPermissionsRequired"))+" ")])])])])]),a("ConfirmationModal",{attrs:{showModal:t.showDeleteNoteModal,removeId:t.noteRemoveId},on:{delete:t.removeNote,cancel:t.cancelModal}},[a("h3",{attrs:{slot:"header"},slot:"header"},[t._v(t._s(t.$t("removeNote")))]),a("div",{attrs:{slot:"body"},slot:"body"},[t._v(" "+t._s(t.$t("removeNoteConfirmation"))+" ")])])],1):t._e()},T=[],E=a("ea76"),O=a.n(E),R=a("0f7b"),I=a("1f24");function P(t){return P="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P(t)}function S(t,e){return D(t)||k(t,e)||w(t,e)||N()}function N(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function w(t,e){if(t){if("string"===typeof t)return A(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?A(t,e):void 0}}function A(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,i=new Array(e);a<e;a++)i[a]=t[a];return i}function k(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var a=[],i=!0,s=!1,r=void 0;try{for(var n,o=t[Symbol.iterator]();!(i=(n=o.next()).done);i=!0)if(a.push(n.value),e&&a.length===e)break}catch(c){s=!0,r=c}finally{try{i||null==o["return"]||o["return"]()}finally{if(s)throw r}}return a}}function D(t){if(Array.isArray(t))return t}function x(t,e,a,i,s,r,n){try{var o=t[r](n),c=o.value}catch(l){return void a(l)}o.done?e(c):Promise.resolve(c).then(i,s)}function j(t){return function(){var e=this,a=arguments;return new Promise((function(i,s){var r=t.apply(e,a);function n(t){x(r,i,s,n,o,"next",t)}function o(t){x(r,i,s,n,o,"throw",t)}n(void 0)}))}}function M(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function U(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function $(t,e,a){return e&&U(t.prototype,e),a&&U(t,a),t}function F(t,e){return!e||"object"!==P(e)&&"function"!==typeof e?L(t):e}function L(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function G(t){return G=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},G(t)}function B(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Y(t,e)}function Y(t,e){return Y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Y(t,e)}var q=function(t){function e(){var t;return M(this,e),t=F(this,G(e).apply(this,arguments)),t.submitted=!1,t.noteReviewed=!1,t.noteReady=!1,t.showDeleteNoteModal=!1,t.date="",t.text="",t.createdBy={},t.noteCategory=-1,t.noteType=-1,t.file="",t.fileName="",t.noteParticipantId=-1,t.noteRemoveId=0,t.parentParticipantId=-1,t.noteTypes=[],t.newFile=!1,t}return B(e,t),$(e,[{key:"updateShowForm",value:function(t){this.parentParticipantId=this.parentParticipant?this.parentParticipant.id:-1,this.showForm=t,this.date=this.uCurrentDate(),this.text="",this.noteType=-1,this.noteCategory=-1,this.file="",this.fileName="",this.createdBy={},this.noteReady=!1,this.submitted=!1,this.newFile=!1,this.noteReviewed=!1,this.uIsParticipantUser()&&(this.noteCategory=this.NOTE_CATEGORIES_USER),this.updating&&null!==this.participantNote&&this.setParticipantNoteDetails(this.participantNote),this.setNoteTypes()}},{key:"mounted",value:function(){this.setNoteTypes()}},{key:"setNoteTypes",value:function(){this.uIsParticipantUser()||this.noteCategory&&this.noteCategory===this.NOTE_CATEGORIES_USER?this.noteTypes=this.uConstants(this.MASTER_NOTE_TYPES,this.uConfig(this.NOTE_TYPES_REMITTER)):this.currentUser.agencyUser&&(this.noteTypes=this.uConstants(this.MASTER_NOTE_TYPES,this.uConfig(this.NOTE_TYPES)))}},{key:"setParticipantNoteDetails",value:function(t){t&&(this.date=t.date,this.text=t.text,this.noteCategory=t.category,this.noteParticipantId=t.sourceId,this.noteType=t.type,this.fileName=t.fileName,this.noteReviewed=t.wasReviewed,this.createdBy=t.createdBy,this.noteReady=!0)}},{key:"submitForm",value:function(){var t=j(n.a.mark((function t(){var e,a,i=this;return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.submitted=!0,t.next=3,this.$validator.validate();case 3:e=t.sent,e?(a=new FormData,a.append("source",this.NOTE_SOURCES_PARTICIPANT.toString()),a.append("date",this.date),a.append("text",this.text),a.append("category",this.noteCategory.toString()),a.append("type",this.noteType.toString()),a.append("source_id",this.participant.id.toString()),this.newFile&&a.append("file",this.file),this.newFile=!1,this.updating?(a.append("participant_id",this.noteParticipantId.toString()),this.noteReviewed&&a.append("was_reviewed","true"),b.a.put("".concat("http://localhost:8000/api","/notes/").concat(this.participantNote.id,"/"),a).then((function(){i.$emit("addNote")})).catch((function(t){i.submitted=!1,i.uRequestErrorHandler(t)}))):b.a.post("".concat("http://localhost:8000/api","/notes/"),a).then((function(){i.$emit("addNote")})).catch((function(t){i.submitted=!1,i.uRequestErrorHandler(t)}))):this.submitted=!1;case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getFile",value:function(t){var e=t.target.files||t.dataTransfer.files;if(e.length){var a=S(e,1);this.file=a[0],this.fileName=this.file.name,this.newFile=!0}}},{key:"openDeleteModal",value:function(t){this.showDeleteNoteModal=!0,this.noteRemoveId=t}},{key:"removeNote",value:function(){var t=j(n.a.mark((function t(){var e=this;return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:b.a.delete("".concat("http://localhost:8000/api","/notes/").concat(this.participantNote.id,"/")).then((function(){e.$emit("addNote")})).catch((function(t){e.uRequestErrorHandler(t)})),this.showDeleteNoteModal=!1;case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"cancelModal",value:function(){this.showDeleteNoteModal=!1}}]),e}(Object(c["c"])(p["a"]));Object(o["a"])([Object(u["b"])()],q.prototype,"showForm",void 0),Object(o["a"])([Object(u["b"])()],q.prototype,"updating",void 0),Object(o["a"])([Object(u["b"])()],q.prototype,"participant",void 0),Object(o["a"])([Object(u["b"])()],q.prototype,"businessStatus",void 0),Object(o["a"])([Object(u["b"])()],q.prototype,"parentParticipant",void 0),Object(o["a"])([Object(u["b"])()],q.prototype,"selectedParticipantId",void 0),Object(o["a"])([Object(u["b"])()],q.prototype,"participantNote",void 0),Object(o["a"])([Object(u["d"])("showForm")],q.prototype,"updateShowForm",null),q=Object(o["a"])([Object(u["a"])({components:{ConfirmationModal:R["a"],Datepicker:O.a,Tooltip:I["a"]},computed:Object(l["b"])(["currentUser"])})],q);var H=q,V=H,Q=(a("8e70"),a("2877")),z=Object(Q["a"])(V,C,T,!1,null,"1ae80a5c",null),W=z.exports,J=a("c5af");function X(t){return X="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},X(t)}function K(t,e,a,i,s,r,n){try{var o=t[r](n),c=o.value}catch(l){return void a(l)}o.done?e(c):Promise.resolve(c).then(i,s)}function Z(t){return function(){var e=this,a=arguments;return new Promise((function(i,s){var r=t.apply(e,a);function n(t){K(r,i,s,n,o,"next",t)}function o(t){K(r,i,s,n,o,"throw",t)}n(void 0)}))}}function tt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function et(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function at(t,e,a){return e&&et(t.prototype,e),a&&et(t,a),t}function it(t,e){return!e||"object"!==X(e)&&"function"!==typeof e?st(t):e}function st(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function rt(t){return rt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},rt(t)}function nt(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ot(t,e)}function ot(t,e){return ot=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},ot(t,e)}var ct=function(t){function e(){var t;return tt(this,e),t=it(this,rt(e).apply(this,arguments)),t.showForm=!1,t.updating=!1,t.participantNote={},t.selectedParticipantId=0,t.category=-1,t.type=-1,t.text="",t.noteTypes=[],t.ordering="ordering=",t.defaultFilter="?",t.filter="?",t}return nt(e,t),at(e,[{key:"mounted",value:function(){this.setNoteTypes()}},{key:"setNoteTypes",value:function(){this.uIsParticipantUser()?this.noteTypes=this.uConstants(this.MASTER_NOTE_TYPES,this.uConfig(this.NOTE_TYPES_REMITTER)):this.currentUser.agencyUser&&(this.noteTypes=this.uConstants(this.MASTER_NOTE_TYPES,this.uConfig(this.NOTE_TYPES)))}},{key:"addNote",value:function(){this.showForm=!1,this.$emit("updateNote")}},{key:"openUpdateNoteForm",value:function(t,e){t?(this.updating=!0,this.participantNote=this.participantNotes.find((function(e){return e.id===t}))):(this.updating=!1,this.participantNote={}),this.selectedParticipantId=e,this.showForm=!0}},{key:"cancelForm",value:function(){this.showForm=!1}},{key:"downloadAttachment",value:function(){var t=Z(n.a.mark((function t(e,a){var i;return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b.a.get("".concat("http://localhost:8000/api","/note-attachments/").concat(e,"/"),{responseType:"blob"});case 3:i=t.sent,this.uDownloadBlobRequest(i.data,a),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),this.uRequestErrorHandler(t.t0);case 10:case"end":return t.stop()}}),t,this,[[0,7]])})));function e(e,a){return t.apply(this,arguments)}return e}()},{key:"createFilter",value:function(){var t=Z(n.a.mark((function t(){return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.filter="?",this.category>-1&&(this.filter+="category=".concat(this.category,"&")),this.type>-1&&(this.filter+="type=".concat(this.type,"&")),this.text&&(this.filter+="text=".concat(this.text,"&")),this.$emit("updateNote",this.filter);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"removeFilter",value:function(){var t=Z(n.a.mark((function t(){return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.category=-1,this.type=-1,this.text="",this.filter="?",this.$emit("updateNote",this.filter,this.ordering);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"setOrdering",value:function(t,e){this.ordering=this.uSetOrdering(this.ordering,t,e),this.$emit("updateNote",this.filter,this.ordering)}},{key:"removeOrdering",value:function(){this.ordering="ordering=",this.$emit("updateNote",this.filter,this.ordering)}}]),e}(Object(c["c"])(p["a"]));Object(o["a"])([Object(u["b"])()],ct.prototype,"participant",void 0),Object(o["a"])([Object(u["b"])()],ct.prototype,"parentParticipant",void 0),Object(o["a"])([Object(u["b"])()],ct.prototype,"participantNotes",void 0),Object(o["a"])([Object(u["b"])()],ct.prototype,"businessStatus",void 0),Object(o["a"])([Object(u["b"])()],ct.prototype,"orgTable",void 0),Object(o["a"])([Object(u["b"])()],ct.prototype,"notesLoading",void 0),ct=Object(o["a"])([Object(u["a"])({components:{ParticipantNoteModalForm:W,LoadingIcon:J["a"]}})],ct);var lt,ut,pt=ct,dt=pt,ft=(a("c0fe"),Object(Q["a"])(dt,y,g,!1,null,"1c508d00",null)),mt=ft.exports,vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"table-header"},[a("p",{staticClass:"table-title"},[t._v(t._s(t.$t("addresses")))]),t.uIsMasterUser()&&t.uBusinessInEditableState(t.businessStatus)&&t.uCanModifyParticipantData(t.participant.id)?a("button",{staticClass:"btn primary-action-btn",on:{click:function(e){return t.showAddressFormModal()}}},[t._v(" "+t._s(t.$t("createAddress"))+" ")]):t._e()]),a("div",{staticClass:"custom-table"},[a("div",{staticClass:"custom-table-header"},[t.orgTable?t._e():a("div",{staticClass:"custom-table-header-data left-align",style:{flex:.4}},[t._v(" "+t._s(t.$t("level"))+" ")]),a("div",{staticClass:"custom-table-header-data left-align"},[t._v(t._s(t.$t("address")))]),a("div",{staticClass:"custom-table-header-data left-align"},[t._v(t._s(t.$t("town")))]),a("div",{staticClass:"custom-table-header-data left-align"},[t._v(" "+t._s(t.uFindInstruction(this.DISPLAY_JURISDICTION))+" ")]),a("div",{staticClass:"custom-table-header-data left-align",style:{flex:1.5}},[t._v(" "+t._s(t.$t("type")))]),a("div",{staticClass:"custom-table-header-data left-align",style:{flex:1.5}},[t._v(" "+t._s(t.$t("location")))]),a("div",{staticClass:"custom-table-header-data table-data-icon-width"})]),a("div",{staticClass:"custom-table-body"},t._l(t.addresses,(function(e){return a("div",{key:e.id,staticClass:"custom-table-body-row"},[t.orgTable?t._e():a("div",{staticClass:"custom-table-body-data left-align",style:{flex:.4}},[t._v(" "+t._s(e.participant.type===t.PARTICIPANT_TYPES_GROUP?t.$t("org"):t.$t("business"))+" ")]),a("div",{staticClass:"custom-table-body-data left-align"},[t._v(" "+t._s(e.line1)+" "),e.line2?[t._v(" · ")]:t._e(),t._v(" "+t._s(e.line2))],2),a("div",{staticClass:"custom-table-body-data left-align"},[t._v(t._s(e.town))]),a("div",{staticClass:"custom-table-body-data left-align"},[t._v(t._s(e.province))]),a("div",{staticClass:"custom-table-body-data left-align",style:{flex:1.5}},[t._v(" "+t._s(e.type.map((function(e){return t.ADDRESS_TYPES_MASTER[e]})).join(", ")))]),a("div",{staticClass:"custom-table-body-data left-align",style:{flex:1.5}},[t._v(" "+t._s((e.latitude?e.latitude:"")+" "+(e.longitude?e.longitude:""))+" ")]),a("div",{staticClass:"custom-table-body-data table-data-icon-width"},[a("button",{staticClass:"btn icon-btn",on:{click:function(a){return a.preventDefault(),t.showAddressFormModal(e.id,e.participant.id)}}},[t.uIsMasterUser()&&t.uCanModifyParticipantData(e.participant.id)&&t.uBusinessInEditableState(t.businessStatus)&&t.uCanEditPhysicalAddress(t.businessStatus,e.type)?a("div",{staticClass:"edit"},[a("font-awesome-icon",{attrs:{icon:["fa","edit"],title:t.$t("update")}})],1):a("div",{staticClass:"view"},[a("font-awesome-icon",{attrs:{icon:["fa","eye"],title:t.$t("view")}})],1)])])])})),0),t.addressesLoading?a("div",{staticClass:"table-loading"},[a("LoadingIcon")],1):t._e(),0!==t.addresses.length||t.addressesLoading?t._e():a("div",{staticClass:"table-empty-state large-text"},[t._v(" "+t._s(t.$t("emptyState.addresses"))+" ")])]),a("AddressFormModal",{attrs:{businessStatus:t.businessStatus,address:t.selectedAddress,showModal:t.showModal,participant:t.participant,selectedParticipantId:t.selectedParticipantId,parentParticipant:t.parentParticipant,updating:t.updating},on:{hideModal:function(e){t.showModal=!1},addressChange:t.updateAddressTable}})],1)},ht=[],_t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"show",rawName:"v-show",value:t.showModal,expression:"showModal"}]},[a("transition",{attrs:{name:"modal"}},[a("div",{staticClass:"modal-mask"},[a("div",{staticClass:"modal-wrapper modal-dialog"},[a("div",{staticClass:"modal-container modal-content"},[a("div",{staticClass:"modal-header"},[t.uIsMasterUser()&&t.uBusinessInEditableState(t.businessStatus)?[t.updating?t._e():a("p",{staticClass:"modal-title"},[t._v(t._s(t.$t("createAddress")))]),t.updating?a("p",{staticClass:"modal-title"},[t._v(t._s(t.$t("updateAddress")))]):t._e()]:[a("p",{staticClass:"modal-title"},[t._v(t._s(t.$t("viewAddress")))])]],2),a("div",{staticClass:"modal-body"},[a("div",{domProps:{innerHTML:t._s(t.uFindInstruction(this.ADDRESS_NO_CHANGE_PHYSICAL))}}),a("form",[a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("line1")))]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:50",expression:"'required|max:50'"},{name:"model",rawName:"v-model",value:t.line1,expression:"line1"}],ref:"autocomplete",staticClass:"form-control",attrs:{type:"text",placeholder:"",name:"line1"},domProps:{value:t.line1},on:{input:function(e){e.target.composing||(t.line1=e.target.value)}}}),a("span",{staticClass:"form-error-message"},[t._v(t._s(t.errors.first("line1")))])]),a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("line2")))]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"max:50",expression:"'max:50'"},{name:"model",rawName:"v-model",value:t.line2,expression:"line2"}],staticClass:"form-control",attrs:{type:"text",name:"line2"},domProps:{value:t.line2},on:{input:function(e){e.target.composing||(t.line2=e.target.value)}}}),a("span",{staticClass:"form-error-message"},[t._v(t._s(t.errors.first("line2")))])]),a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("country")))]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.country,expression:"country"}],staticClass:"form-control",attrs:{type:"text",name:"Country"},domProps:{value:t.country},on:{input:function(e){e.target.composing||(t.country=e.target.value)}}}),a("span",{staticClass:"form-error-message"},[t._v(t._s(t.errors.first("Country")))])]),a("div",{staticClass:"form-group"},[a("label",[t._v(" "+t._s(t.uFindInstruction(this.DISPLAY_JURISDICTION))+" ")]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.province,expression:"province"}],staticClass:"form-control",attrs:{type:"text",name:"Province"},domProps:{value:t.province},on:{input:function(e){e.target.composing||(t.province=e.target.value)}}}),a("span",{staticClass:"form-error-message"},[t._v(t._s(t.errors.first("Province")))])]),t.useTownDropdown?a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("town")))]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.city,expression:"city"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"custom-select",attrs:{disabled:!t.province,name:"city"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.city=e.target.multiple?a:a[0]}}},[a("option",{attrs:{disabled:"",value:""}},[t._v(" "+t._s(t.$t("selectTown"))+" ")]),t._l(t.cities,(function(e){return a("option",{key:e.id,domProps:{value:e}},[t._v(" "+t._s(e.name)+" ")])}))],2),a("span",{staticClass:"form-error-message"},[t._v(t._s(t.errors.first("city")))])]):a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("town")))]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:40",expression:"'required|max:40'"},{name:"model",rawName:"v-model",value:t.town,expression:"town"}],staticClass:"form-control",attrs:{disabled:!t.province,type:"text",name:"Town"},domProps:{value:t.town},on:{input:function(e){e.target.composing||(t.town=e.target.value)}}}),a("span",{staticClass:"form-error-message"},[t._v(t._s(t.errors.first("Town")))])]),a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("postalCode")))]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:10",expression:"'required|max:10'"},{name:"model",rawName:"v-model",value:t.postalCode,expression:"postalCode"}],staticClass:"form-control",attrs:{type:"text",name:"Postal"},domProps:{value:t.postalCode},on:{input:function(e){e.target.composing||(t.postalCode=e.target.value)}}}),a("span",{staticClass:"form-error-message"},[t._v(t._s(t.errors.first("Postal")))])]),a("div",{staticClass:"form-group"},[a("label",[t._v(" "+t._s(t.$t("type"))+" "),a("Tooltip",{attrs:{tooltip:t.uFindInstruction(this.ADDRESSFORMMODAL_INFOTIP_TYPE)}})],1),a("b-form-select",{directives:[{name:"validate",rawName:"v-validate",value:"required|min_value:0",expression:"'required|min_value:0'"}],staticClass:"custom-select",attrs:{disabled:!(t.participantType===this.PARTICIPANT_TYPES_GROUP||t.uCanEditPhysicalAddress(t.businessStatus,t.type)),multiple:"",options:t.uConstants(t.ADDRESS_TYPES_MASTER,t.uConfig(t.ADDRESS_TYPES)),"select-size":t.uConstants(t.ADDRESS_TYPES_MASTER,t.uConfig(t.ADDRESS_TYPES)).length,name:"addressType"},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}}),a("span",{staticClass:"form-error-message"},[t._v(t._s(t.errors.first("addressType")))])],1),""!==t.latitude&&""!==t.longitude?a("div",{staticClass:"form-group"},[a("div",{staticClass:"section-label"},[t._v(t._s(t.$t("location")))]),a("div",{staticClass:"standard-text"},[t._v(" "+t._s(t.latitude)+", "+t._s(t.longitude))])]):t._e()])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn secondary-action-btn",on:{click:function(e){return e.preventDefault(),t.$emit("hideModal")}}},[t._v(" "+t._s(t.$t("cancel"))+" ")]),a("button",{staticClass:"btn primary-action-btn",attrs:{disabled:t.uDisableParticipantDataForm(t.submitted,t.errors.any(),t.businessStatus,t.participant.id,t.updating,t.parentParticipantId,t.address.onGroup)||!t.uCanEditPhysicalAddress(t.businessStatus,t.type),type:"submit"},on:{click:function(e){return e.preventDefault(),t.submitForm(e)}}},[t._v(" "+t._s(t.updating?t.$t("update"):t.$t("create"))+" ")])]),t.uIsMasterUser()?t._e():a("div",{staticClass:"form-error-message--permissions"},[t._v(" "+t._s(t.$t("higherPermissionsRequired"))+" ")])])])])])],1)},bt=[],yt=Object({NODE_ENV:"production",VUE_APP_API:"http://localhost:8000/api",VUE_APP_I18N_LOCALE:"en-ca",VUE_APP_I18N_FALLBACK_LOCALE:"en-ca",VUE_APP_SITE_ENV:"LOCAL",VUE_APP_FILING_APP_ENABLED:"true",VUE_APP_REMITTANCE_APP_ENABLED:"true",VUE_APP_CLAIMS_APP_ENABLED:"true",VUE_APP_PRODUCTION:"false",VUE_APP_EXPECTED_PAYMENT_DATE_DAYS:"30",VUE_APP_PHYSICAL_ADDRESS_REQUIRES_AGENCY:"true",VUE_APP_MUST_SELECT_CITY_IN_JURISDICTION:"true",VUE_APP_VERSION:"latest",VUE_APP_COLOR:"#BDD290",VUE_APP_LANGUAGES:"en,frqc",VUE_APP_HIDE_CREATE_REMITTER:"false",BASE_URL:"/"}).VUE_APP_GOOGLE_API_KEY||"",gt="googleApiInit",Ct=!!window.google,Tt=new Promise((function(t,e){lt=t,ut=e}));function Et(){if(Ct)return Tt;Ct=!0,window[gt]=function(){return lt(window.google)};var t=document.createElement("script");return t.async=!0,t.defer=!0,t.src="https://maps.googleapis.com/maps/api/js?key=".concat(yt,"&libraries=places&callback=").concat(gt),t.onerror=ut,document.querySelector("head").appendChild(t),Tt}function Ot(t){return Ot="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ot(t)}function Rt(t,e,a,i,s,r,n){try{var o=t[r](n),c=o.value}catch(l){return void a(l)}o.done?e(c):Promise.resolve(c).then(i,s)}function It(t){return function(){var e=this,a=arguments;return new Promise((function(i,s){var r=t.apply(e,a);function n(t){Rt(r,i,s,n,o,"next",t)}function o(t){Rt(r,i,s,n,o,"throw",t)}n(void 0)}))}}function Pt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function St(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Nt(t,e,a){return e&&St(t.prototype,e),a&&St(t,a),t}function wt(t,e){return!e||"object"!==Ot(e)&&"function"!==typeof e?At(t):e}function At(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function kt(t){return kt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},kt(t)}function Dt(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&xt(t,e)}function xt(t,e){return xt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},xt(t,e)}var jt=function(t){function e(){var t;return Pt(this,e),t=wt(this,kt(e).apply(this,arguments)),t.submitted=!1,t.line1="",t.line2="",t.town="",t.province="",t.country="",t.postalCode="",t.latitude="",t.longitude="",t.type=[-1],t.whiteList=[],t.remitter={},t.cities=[],t.city="",t.selectCity=!1,t.jurisdictionCode="",t.participantType=-1,t.parentParticipantId=-1,t.autocomplete=null,t}return Dt(e,t),Nt(e,[{key:"mounted",value:function(){var t=It(n.a.mark((function t(){var e,a,i;return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.participantType=this.participant.type,this.uConfig(this.COUNTRIES)&&(this.whiteList=this.uConfig(this.COUNTRIES).split(",")),this.selectCity=this.uConfig(this.MUST_SELECT_CITY_IN_JURISDICTION),this.getCities(),this.participantType!==this.PARTICIPANT_TYPES_REMITTER){t.next=11;break}return t.next=7,this.getList("remitters","participant=".concat(this.participant.id));case 7:e=t.sent,a=e.data,i=a[0],this.jurisdictionCode=i.jurisdiction.code;case 11:this.initGoogleApi();case 12:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"updateShowModal",value:function(t){this.parentParticipantId=this.parentParticipant?this.parentParticipant.id:-1,this.showModal=t,this.submitted=!1,this.line1="",this.line2="",this.town="",this.city="",this.province="",this.country="",this.postalCode="",this.type=[-1],this.latitude="",this.longitude="",this.updating&&null!==this.address&&this.setAddressDetails(this.address)}},{key:"initGoogleApi",value:function(){var t=It(n.a.mark((function t(){var e;return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Et();case 2:e=t.sent,this.autocomplete=new e.maps.places.Autocomplete(this.$refs.autocomplete,{types:["geocode"]}),this.autocomplete.setComponentRestrictions({country:["ca","us"]}),this.autocomplete.setFields(["address_component","geometry"]),this.autocomplete.addListener("place_changed",this.fillAddressForm);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"beforeDestroy",value:function(){this.$validator.pause()}},{key:"clearAddressForm",value:function(){this.line1="",this.line2="",this.town="",this.city="",this.province="",this.country="",this.postalCode="",this.latitude="",this.longitude=""}},{key:"fillAddressForm",value:function(){var t=It(n.a.mark((function t(){var e,a=this;return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.autocomplete.getPlace(),e.address_components){t.next=3;break}return t.abrupt("return");case 3:this.clearAddressForm(),this.$nextTick((function(){var t=a.uGetGoogleAddressPart(e,"street_number","long_name"),i=a.uGetGoogleAddressPart(e,"route","short_name");a.line1="".concat(t," ").concat(i),a.country=a.uGetGoogleAddressPart(e,"country","long_name"),a.province=a.uGetGoogleAddressPart(e,"administrative_area_level_1","short_name"),a.town=a.uGetGoogleAddressPart(e,"locality","long_name"),a.useTownDropdown&&(a.city=a.cities.find((function(t){return t.name===a.town}))||""),a.postalCode=a.uGetGoogleAddressPart(e,"postal_code","long_name"),a.latitude=e.geometry.location.lat(),a.longitude=e.geometry.location.lng()}));case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"setAddressDetails",value:function(t){t&&(this.line1=t.line1,this.line2=t.line2,this.province=t.province,this.country=t.country,this.postalCode=t.postalCode,this.type=t.type,this.participantType=t.participant.type,null!==t.city?(this.city=t.city,this.town=t.town):(this.town=t.town,this.city=""),this.latitude=t.latitude?t.latitude:"",this.longitude=t.longitude?t.longitude:"")}},{key:"getCities",value:function(){var t=this;b.a.get("".concat("http://localhost:8000/api","/cities/")).then((function(e){t.cities=t.uRecursiveCamel(e.data)})).catch((function(e){t.uRequestErrorHandler(e)}))}},{key:"submitForm",value:function(){var t=It(n.a.mark((function t(){var e,a,i=this;return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.submitted=!0,e={line_1:this.line1,line_2:this.line2,province:this.province,country:this.country,postal_code:this.postalCode,type:this.type,participant_id:0},""!==this.latitude&&""!==this.longitude&&(e.latitude=this.latitude,e.longitude=this.longitude),this.jurisdictionCode===this.province&&this.selectCity&&this.participantType===this.PARTICIPANT_TYPES_REMITTER?(e.town=this.city.name,e.city_id=this.city.id):e.town=this.town,t.next=6,this.$validator.validate();case 6:a=t.sent,a?this.updating?(e.participant_id=this.selectedParticipantId,b.a.put("".concat("http://localhost:8000/api","/addresses/").concat(this.address.id,"/"),e).then((function(){i.$emit("hideModal"),i.$emit("addressChange")})).catch((function(t){i.uRequestErrorHandler(t),i.submitted=!1}))):(e.participant_id=this.participant.id,b.a.post("".concat("http://localhost:8000/api","/addresses/"),e).then((function(){i.$emit("hideModal"),i.$emit("addressChange")})).catch((function(t){i.uRequestErrorHandler(t),i.submitted=!1}))):this.submitted=!1;case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"useTownDropdown",get:function(){return this.jurisdictionCode===this.province&&this.selectCity&&this.participantType===this.PARTICIPANT_TYPES_REMITTER}}]),e}(Object(c["c"])(p["a"],d["a"]));Object(o["a"])([Object(u["b"])()],jt.prototype,"showModal",void 0),Object(o["a"])([Object(u["b"])()],jt.prototype,"address",void 0),Object(o["a"])([Object(u["b"])()],jt.prototype,"selectedParticipantId",void 0),Object(o["a"])([Object(u["b"])()],jt.prototype,"updating",void 0),Object(o["a"])([Object(u["b"])()],jt.prototype,"participant",void 0),Object(o["a"])([Object(u["b"])()],jt.prototype,"businessStatus",void 0),Object(o["a"])([Object(u["b"])()],jt.prototype,"parentParticipant",void 0),Object(o["a"])([Object(u["d"])("showModal")],jt.prototype,"updateShowModal",null),jt=Object(o["a"])([Object(u["a"])({components:{Tooltip:I["a"]},computed:Object(l["b"])(["isLoggedIn","currentUser"])})],jt);var Mt=jt,Ut=Mt,$t=(a("4c00"),Object(Q["a"])(Ut,_t,bt,!1,null,"0a128012",null)),Ft=$t.exports;function Lt(t){return Lt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lt(t)}function Gt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Bt(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Yt(t,e,a){return e&&Bt(t.prototype,e),a&&Bt(t,a),t}function qt(t,e){return!e||"object"!==Lt(e)&&"function"!==typeof e?Ht(t):e}function Ht(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Vt(t){return Vt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Vt(t)}function Qt(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&zt(t,e)}function zt(t,e){return zt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},zt(t,e)}var Wt=function(t){function e(){var t;return Gt(this,e),t=qt(this,Vt(e).apply(this,arguments)),t.showModal=!1,t.selectedAddress={},t.updating=!1,t.selectedParticipantId=0,t}return Qt(e,t),Yt(e,[{key:"showAddressFormModal",value:function(t,e){t?(this.updating=!0,this.selectedAddress=this.addresses.find((function(e){return e.id===t}))):(this.updating=!1,this.selectedAddress={}),this.selectedParticipantId=e,this.showModal=!0}},{key:"updateAddressTable",value:function(){this.$emit("updateAddress")}}]),e}(Object(c["c"])(p["a"]));Object(o["a"])([Object(u["b"])()],Wt.prototype,"addresses",void 0),Object(o["a"])([Object(u["b"])()],Wt.prototype,"participant",void 0),Object(o["a"])([Object(u["b"])()],Wt.prototype,"parentParticipant",void 0),Object(o["a"])([Object(u["b"])()],Wt.prototype,"businessStatus",void 0),Object(o["a"])([Object(u["b"])()],Wt.prototype,"orgTable",void 0),Object(o["a"])([Object(u["b"])()],Wt.prototype,"addressesLoading",void 0),Wt=Object(o["a"])([Object(u["a"])({components:{AddressFormModal:Ft,LoadingIcon:J["a"]}})],Wt);var Jt=Wt,Xt=Jt,Kt=(a("b986"),Object(Q["a"])(Xt,vt,ht,!1,null,null,null)),Zt=Kt.exports,te=a("d178"),ee=a("88c3"),ae=a("25bf"),ie=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.showModal?a("div",[a("transition",{attrs:{name:"modal"}},[a("div",{staticClass:"modal-mask"},[a("div",{staticClass:"modal-wrapper modal-dialog"},[a("div",{staticClass:"modal-container modal-content"},[a("div",{staticClass:"modal-header"},[(t.uIsMasterUser()||t.updating&&t.currentUser.contact&&t.currentUser.contact.id===t.contact.id)&&t.uBusinessInEditableState(t.businessStatus)?[t.updating?t._e():a("p",{staticClass:"modal-title"},[t._v(t._s(t.$t("createContact")))]),t.updating?a("p",{staticClass:"modal-title"},[t._v(t._s(t.$t("updateContact")))]):t._e()]:[a("p",{staticClass:"modal-title"},[t._v(t._s(t.$t("viewContact")))])]],2),a("div",{staticClass:"modal-body"},[a("form",[t.updating&&t.contact.customUserId?a("div",{staticClass:"detail-list"},[a("p",[a("span",{staticClass:"list-label"},[t._v(t._s(t.$t("email")+":"))]),t._v(" "+t._s(t.currentEmailAddress)+" ")])]):a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("email")))]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"email",expression:"'email'"},{name:"model",rawName:"v-model",value:t.currentEmailAddress,expression:"currentEmailAddress"}],staticClass:"form-control",attrs:{type:"email",name:"Email"},domProps:{value:t.currentEmailAddress},on:{input:function(e){e.target.composing||(t.currentEmailAddress=e.target.value)}}}),a("span",{staticClass:"form-error-message"},[t._v(t._s(t.errors.first("Email")))])]),a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("firstName")))]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:40",expression:"'required|max:40'"},{name:"model",rawName:"v-model",value:t.firstName,expression:"firstName"}],staticClass:"form-control",attrs:{type:"text",name:"First Name"},domProps:{value:t.firstName},on:{input:function(e){e.target.composing||(t.firstName=e.target.value)}}}),a("span",{staticClass:"form-error-message"},[t._v(t._s(t.errors.first("First Name")))])]),a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("lastName")))]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:40",expression:"'required|max:40'"},{name:"model",rawName:"v-model",value:t.lastName,expression:"lastName"}],staticClass:"form-control",attrs:{type:"text",name:"Last Name"},domProps:{value:t.lastName},on:{input:function(e){e.target.composing||(t.lastName=e.target.value)}}}),a("span",{staticClass:"form-error-message"},[t._v(t._s(t.errors.first("Last Name")))])]),a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("telephoneNo")))]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:30",expression:"'required|max:30'"},{name:"model",rawName:"v-model",value:t.telephoneNo,expression:"telephoneNo"}],staticClass:"form-control",attrs:{type:"text",name:"Telephone No",placeholder:t.$t("phoneNoExample")},domProps:{value:t.telephoneNo},on:{input:function(e){e.target.composing||(t.telephoneNo=e.target.value)}}}),a("span",{staticClass:"form-error-message"},[t._v(t._s(t.errors.first("Telephone No")))])]),a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("faxNo")))]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"max:30",expression:"'max:30'"},{name:"model",rawName:"v-model",value:t.faxNo,expression:"faxNo"}],staticClass:"form-control",attrs:{type:"text",name:"Fax No",placeholder:t.$t("faxNoExample")},domProps:{value:t.faxNo},on:{input:function(e){e.target.composing||(t.faxNo=e.target.value)}}}),a("span",{staticClass:"form-error-message"},[t._v(t._s(t.errors.first("Fax No")))])]),a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("cellphoneNo")))]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"max:30",expression:"'max:30'"},{name:"model",rawName:"v-model",value:t.cellphoneNo,expression:"cellphoneNo"}],staticClass:"form-control",attrs:{type:"text",name:"Cellphone No",placeholder:t.$t("phoneNoExample")},domProps:{value:t.cellphoneNo},on:{input:function(e){e.target.composing||(t.cellphoneNo=e.target.value)}}}),a("span",{staticClass:"form-error-message"},[t._v(t._s(t.errors.first("Cellphone No")))])]),a("div",{staticClass:"form-group"},[a("label",[t._v(" "+t._s(t.$t("type"))+" "),a("Tooltip",{attrs:{tooltip:t.uFindInstruction(this.CONTACTFORM_INFOTIP_TYPE)}})],1),a("b-form-select",{directives:[{name:"validate",rawName:"v-validate",value:"required|min_value:0",expression:"'required|min_value:0'"}],staticClass:"custom-select",attrs:{multiple:"",options:t.uConstants(t.CONTACT_TYPES_MASTER,t.uConfig(t.CONTACT_TYPES)),"select-size":t.uConstants(t.CONTACT_TYPES_MASTER,t.uConfig(t.CONTACT_TYPES)).length,name:"contactType"},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}}),a("span",{staticClass:"form-error-message"},[t._v(t._s(t.errors.first("contactType")))])],1)])]),a("div",{staticClass:"modal-footer"},[t.updating&&t.uIsMasterUser()&&t.uCanModifyParticipantData(t.participant.id)&&t.uBusinessInEditableState(t.businessStatus)&&null===t.contact.customUserId?[t.deleteButton?t._e():a("button",{staticClass:"btn secondary-action-btn",on:{click:function(e){return e.preventDefault(),t.openRemoveModal(t.contact.id)}}},[t._v(" "+t._s(t.$t("remove"))+" ")]),t.deleteButton?a("button",{staticClass:"btn secondary-action-btn",on:{click:function(e){return e.preventDefault(),t.openDeleteModal(t.contact.id)}}},[t._v(" "+t._s(t.$t("delete"))+" ")]):t._e()]:t._e(),a("div",{staticClass:"flex-spacer"}),a("button",{staticClass:"btn secondary-action-btn",on:{click:function(e){return e.preventDefault(),t.$emit("hideModal")}}},[t._v(" "+t._s(t.$t("cancel"))+" ")]),a("button",{staticClass:"btn primary-action-btn",attrs:{disabled:t.uDisableParticipantDataForm(t.submitted,t.errors.any(),t.businessStatus,t.participant.id,t.updating,t.parentParticipantId,t.contact.onGroup),type:"submit"},on:{click:function(e){return e.preventDefault(),t.submitForm(e)}}},[t._v(" "+t._s(t.updating?t.$t("update"):t.$t("create"))+" ")])],2),t.uIsMasterUser()||t.updating&&t.currentUser.contact&&t.currentUser.contact.id===t.contact.id?t._e():a("div",{staticClass:"form-error-message--permissions"},[t._v(" "+t._s(t.$t("higherPermissionsRequired"))+" ")])])])])]),a("ConfirmationModal",{attrs:{showModal:t.showRemoveModal,removeId:t.contactRemoveId},on:{delete:t.removeContact,cancel:t.cancelModal}},[a("h3",{attrs:{slot:"header"},slot:"header"},[t._v(t._s(t.$t("removeContact")))]),a("div",{attrs:{slot:"body"},slot:"body"},[t._v(" "+t._s(t.$t("removeContactConfirmation"))+" ")])]),a("ConfirmationModal",{attrs:{showModal:t.showDeleteModal,deleteId:t.contactDeleteId},on:{delete:t.removeContact,cancel:t.cancelModal}},[a("h3",{attrs:{slot:"header"},slot:"header"},[t._v(t._s(t.$t("deleteContact")))]),a("div",{attrs:{slot:"body"},slot:"body"},[t._v(" "+t._s(t.$t("deleteContactConfirmation"))+" ")])])],1):t._e()},se=[];function re(t){return re="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},re(t)}function ne(t,e,a,i,s,r,n){try{var o=t[r](n),c=o.value}catch(l){return void a(l)}o.done?e(c):Promise.resolve(c).then(i,s)}function oe(t){return function(){var e=this,a=arguments;return new Promise((function(i,s){var r=t.apply(e,a);function n(t){ne(r,i,s,n,o,"next",t)}function o(t){ne(r,i,s,n,o,"throw",t)}n(void 0)}))}}function ce(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function le(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ue(t,e,a){return e&&le(t.prototype,e),a&&le(t,a),t}function pe(t,e){return!e||"object"!==re(e)&&"function"!==typeof e?de(t):e}function de(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fe(t){return fe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},fe(t)}function me(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ve(t,e)}function ve(t,e){return ve=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},ve(t,e)}var he=function(t){function e(){var t;return ce(this,e),t=pe(this,fe(e).apply(this,arguments)),t.contactRemoveId=0,t.showRemoveModal=!1,t.contactDeleteId=0,t.showDeleteModal=!1,t.submitted=!1,t.deleteButton=!1,t.firstName="",t.lastName="",t.telephoneNo="",t.faxNo="",t.cellphoneNo="",t.type=[-1],t.currentEmailAddress=null,t.parentParticipantId=-1,t}return me(e,t),ue(e,[{key:"updateShowModal",value:function(t){this.parentParticipantId=this.parentParticipant?this.parentParticipant.id:-1,this.showModal=t,this.firstName="",this.lastName="",this.telephoneNo="",this.faxNo="",this.cellphoneNo="",this.type=[-1],this.currentEmailAddress=null,this.submitted=!1,this.updating&&null!==this.contact&&(this.setContactDetails(this.contact),this.setRemoveOrDelete(this.contact))}},{key:"setContactDetails",value:function(t){t&&(this.firstName=t.firstName,this.lastName=t.lastName,this.telephoneNo=t.telephoneNo,this.faxNo=t.faxNo,this.cellphoneNo=t.cellphoneNo,this.type=t.typeValue,this.currentEmailAddress=t.emailAddress)}},{key:"setRemoveOrDelete",value:function(t){t.participantContacts.length>1?this.deleteButton=!1:this.deleteButton=!0}},{key:"submitForm",value:function(){var t=oe(n.a.mark((function t(){var e,a,i,s,r,o=this;return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.submitted=!0,t.next=3,this.$validator.validate();case 3:if(e=t.sent,e){t.next=8;break}this.submitted=!1,t.next=33;break;case 8:if(a={first_name:this.firstName,last_name:this.lastName,telephone_no:this.telephoneNo,fax_no:this.faxNo,cellphone_no:this.cellphoneNo,email_address:this.currentEmailAddress,type:this.type},this.updating||(a.participant_id=this.participant.id),this.updating){t.next=14;break}b.a.post("".concat("http://localhost:8000/api","/contacts/"),a).then((function(){o.$emit("updateContacts"),o.$emit("hideModal")})).catch((function(t){o.uRequestErrorHandler(t)})).finally((function(){o.submitted=!1})),t.next=33;break;case 14:return t.prev=14,t.next=17,b.a.put("".concat("http://localhost:8000/api","/contacts/").concat(this.contact.id,"/"),a);case 17:if(i=t.sent,this.$emit("updateContacts"),this.$emit("hideModal"),s=this.uRecursiveCamel(i.data),s.id!==this.currentUser.contact.id){t.next=27;break}return t.next=24,b.a.get("".concat("http://localhost:8000/api","/custom-users/").concat(s.customUserId,"/"));case 24:r=t.sent,r=this.uRecursiveCamel(r.data),this.$store.dispatch("update_user",r);case 27:t.next=32;break;case 29:t.prev=29,t.t0=t["catch"](14),this.uRequestErrorHandler(t.t0);case 32:this.submitted=!1;case 33:case"end":return t.stop()}}),t,this,[[14,29]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"openRemoveModal",value:function(t){this.showRemoveModal=!0,this.contactRemoveId=t}},{key:"openDeleteModal",value:function(t){this.showDeleteModal=!0,this.contactDeleteId=t}},{key:"removeContact",value:function(){var t=oe(n.a.mark((function t(){var e,a=this;return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=this.contact.participantContacts.find((function(t){return t.participantId===a.participant.id})),b.a.delete("".concat("http://localhost:8000/api","/participant-contacts/").concat(e.id,"/")).then((function(){a.$emit("updateContacts"),a.$emit("hideModal")})).catch((function(t){a.uRequestErrorHandler(t)})),this.showRemoveModal=!1,this.showDeleteModal=!1;case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"cancelModal",value:function(){this.showRemoveModal=!1,this.showDeleteModal=!1}}]),e}(Object(c["c"])(p["a"]));Object(o["a"])([Object(u["b"])()],he.prototype,"updating",void 0),Object(o["a"])([Object(u["b"])()],he.prototype,"showModal",void 0),Object(o["a"])([Object(u["b"])()],he.prototype,"contact",void 0),Object(o["a"])([Object(u["b"])()],he.prototype,"participant",void 0),Object(o["a"])([Object(u["b"])()],he.prototype,"businessStatus",void 0),Object(o["a"])([Object(u["b"])()],he.prototype,"parentParticipant",void 0),Object(o["a"])([Object(u["d"])("showModal")],he.prototype,"updateShowModal",null),he=Object(o["a"])([Object(u["a"])({components:{Tooltip:I["a"],ConfirmationModal:R["a"]},computed:Object(l["b"])(["isLoggedIn","currentUser"])})],he);var _e=he,be=_e,ye=(a("a616"),Object(Q["a"])(be,ie,se,!1,null,"3d8f2e2a",null)),ge=ye.exports;function Ce(t){return Ce="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ce(t)}function Te(t,e,a,i,s,r,n){try{var o=t[r](n),c=o.value}catch(l){return void a(l)}o.done?e(c):Promise.resolve(c).then(i,s)}function Ee(t){return function(){var e=this,a=arguments;return new Promise((function(i,s){var r=t.apply(e,a);function n(t){Te(r,i,s,n,o,"next",t)}function o(t){Te(r,i,s,n,o,"throw",t)}n(void 0)}))}}function Oe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Re(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ie(t,e,a){return e&&Re(t.prototype,e),a&&Re(t,a),t}function Pe(t,e){return!e||"object"!==Ce(e)&&"function"!==typeof e?Se(t):e}function Se(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ne(t){return Ne=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ne(t)}function we(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ae(t,e)}function Ae(t,e){return Ae=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Ae(t,e)}var ke=function(t){function e(){var t;return Oe(this,e),t=Pe(this,Ne(e).apply(this,arguments)),t.participantId=0,t.menuState=1,t.addresses=[],t.contacts=[],t.notes=[],t.contactsLoading=!0,t.notesLoading=!0,t.addressesLoading=!0,t.totalContactData=0,t.totalAddressData=0,t.totalNoteData=0,t.showContactModal=!1,t.selectedContact={},t.updatingContact=!1,t.uploadedAgreement=!1,t.physicalAddress=!1,t.ownerOrManagerContact=!1,t}return we(e,t),Ie(e,[{key:"updateRouteParams",value:function(){this.contacts=[],this.contactsLoading=!0,this.addresses=[],this.addressesLoading=!0,this.notes=[],this.notesLoading=!0,this.setState(1),this.getParticipantData()}},{key:"setParentState",value:function(t){this.menuState=t}},{key:"updateParticipantData",value:function(t){t&&(this.getParticipantData(),this.$emit("participantDataUpdated"))}},{key:"setState",value:function(t){var e;switch(this.menuState=t,t){case 2:e=this.ADDRESSTABLE_INSTRUC_INTRO;break;case 3:e=this.CONTACTSTABLE_INSTRUC_INTRO;break;case 4:e=this.NOTESTABLE_INSTRUC_INTRO;break;default:e=this.instructionId}this.$emit("stateUpdated",t,e)}},{key:"mounted",value:function(){var t=Ee(n.a.mark((function t(){return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.participantId=this.participant.id,this.getParticipantData();case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getParticipantData",value:function(){var t=Ee(n.a.mark((function t(){return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.getAddresses(),this.getNotes(),this.getContacts(0,"",!0);case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"submitForm",value:function(){var t=Ee(n.a.mark((function t(){var e=this;return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.participant.type===this.PARTICIPANT_TYPES_REMITTER&&b.a.post("".concat("http://localhost:8000/api","/remitter-historys/"),{remitter:this.business.id,registration_status:this.PARTICIPANT_STATUS_SUBMITTED,reason_code:this.PARTICIPANT_STATUS_REASON_NULL}).then((function(){e.$router.go(0)})).catch((function(t){e.uRequestErrorHandler(t)})),this.participant.type===this.PARTICIPANT_TYPES_GENERATOR&&b.a.post("".concat("http://localhost:8000/api","/generator-historys/"),{generator:this.business.id,registration_status:this.PARTICIPANT_STATUS_SUBMITTED,reason_code:this.PARTICIPANT_STATUS_REASON_NULL}).then((function(){e.$router.go(0)})).catch((function(t){e.uRequestErrorHandler(t)}));case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getContacts",value:function(){var t=Ee(n.a.mark((function t(){var e,a,i,s,r,o,c=arguments;return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=c.length>0&&void 0!==c[0]?c[0]:0,a=c.length>1&&void 0!==c[1]?c[1]:"",i=c.length>2&&void 0!==c[2]&&c[2],i&&(this.contacts=[]),this.contactsLoading=!0,t.next=7,this.getList("contacts","participant=".concat(this.participantId),e,0,a);case 7:s=t.sent,r=s.data,o=s.count,this.totalContactData=o,this.formatContacts(r),this.contactsLoading=!1;case 13:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"formatContacts",value:function(){var t=Ee(n.a.mark((function t(e){var a,i,s,r,o,c,l,u,p,d=this;return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(a=0;a<e.length;a+=1)i=e[a],(i.type.includes(this.CONTACT_TYPES_OWNER)||i.type.includes(this.CONTACT_TYPES_MANAGER))&&Number(this.uConfig(this.OWNER_MANAGER_CONTACT_REQUIRED))===this.PARTICIPANT_RULE_LEVEL_GROUP_OR_BUSINESS&&(this.ownerOrManagerContact=!0);s=0;case 2:if(!(s<e.length)){t.next=22;break}r=e[s],o=ee["a"].tc("notAUser"),r.customUserId&&(o=r.groups.length>=1?this.uSelectGroupNamesOnly(r.groups).map((function(t){return d.uShowGroupName(t)})).join(", "):ee["a"].tc("noRoles")),c=null,l=0;case 8:if(!(l<r.participantContacts.length)){t.next=18;break}if(u=this.participant.type===this.PARTICIPANT_TYPES_GROUP?this.participant.id:this.participant.participant,p=r.participantContacts[l].participantId,c=p,p!==u){t.next=15;break}return r.onGroup=!0,t.abrupt("break",18);case 15:l+=1,t.next=8;break;case 18:this.contacts.push({id:r.id,level:r.onGroup?ee["a"].tc("org"):ee["a"].tc("business"),name:"".concat(r.firstName," ").concat(r.lastName),firstName:r.firstName,lastName:r.lastName,emailAddress:r.emailAddress?r.emailAddress:ee["a"].tc("noEmailAddress"),telephoneNo:r.telephoneNo?r.telephoneNo:"",cellphoneNo:r.cellphoneNo?r.cellphoneNo:"",faxNo:r.faxNo?r.faxNo:"",type:r.type.map((function(t){return d.CONTACT_TYPES_MASTER[t]})).join(", "),typeValue:r.type,participantContacts:r.participantContacts,roles:o,onGroup:r.onGroup,actions:[{actionCall:!0,canEdit:this.uIsMasterUser()&&this.uCanModifyParticipantData(c)&&this.uBusinessInEditableState(this.businessStatus)}]});case 19:s+=1,t.next=2;break;case 22:Number(this.uConfig(this.OWNER_MANAGER_CONTACT_REQUIRED))===this.PARTICIPANT_RULE_LEVEL_GROUP&&(this.ownerOrManagerContact=this.contacts.some((function(t){return t.typeValue.some((function(e){return(e===d.CONTACT_TYPES_OWNER||e===d.CONTACT_TYPES_MANAGER)&&t.onGroup}))}))),Number(this.uConfig(this.OWNER_MANAGER_CONTACT_REQUIRED))===this.PARTICIPANT_RULE_LEVEL_BUSINESS&&(this.ownerOrManagerContact=this.contacts.some((function(t){return t.typeValue.some((function(e){return(e===d.CONTACT_TYPES_OWNER||e===d.CONTACT_TYPES_MANAGER)&&!t.onGroup}))}))),Number(this.uConfig(this.OWNER_MANAGER_CONTACT_REQUIRED))===this.PARTICIPANT_RULE_LEVEL_GROUP_AND_BUSINESS&&(this.ownerOrManagerContact=this.contacts.some((function(t){return t.typeValue.some((function(e){return(e===d.CONTACT_TYPES_OWNER||e===d.CONTACT_TYPES_MANAGER)&&t.onGroup}))}))&&this.contacts.some((function(t){return t.typeValue.some((function(e){return(e===d.CONTACT_TYPES_OWNER||e===d.CONTACT_TYPES_MANAGER)&&!t.onGroup}))})));case 25:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"toggleOptions",value:function(t){for(var e=t.showOptions,a=0;a<this.contacts.length;a+=1)this.contacts[a].showOptions=!1;t.showOptions=!e}},{key:"getAddresses",value:function(){var t=this;b.a.get("".concat("http://localhost:8000/api","/addresses/?participant=").concat(this.participantId)).then((function(e){if(t.addresses=t.uRecursiveCamel(e.data),t.participant.type!==t.PARTICIPANT_TYPES_GROUP)for(var a=0;a<t.addresses.length;a+=1)t.addresses[a].participantId===t.participant.participant&&(t.addresses[a].onGroup=!0);Number(t.uConfig(t.PHYSICAL_ADDRESS_REQUIRED))===t.PARTICIPANT_RULE_LEVEL_GROUP&&(t.physicalAddress=t.addresses.some((function(e){return e.type.some((function(a){return a===t.ADDRESS_TYPES_PHYSICAL&&!!e.onGroup}))}))),Number(t.uConfig(t.PHYSICAL_ADDRESS_REQUIRED))===t.PARTICIPANT_RULE_LEVEL_BUSINESS&&(t.physicalAddress=t.addresses.some((function(e){return e.type.some((function(a){return a===t.ADDRESS_TYPES_PHYSICAL&&!e.onGroup}))}))),Number(t.uConfig(t.PHYSICAL_ADDRESS_REQUIRED))===t.PARTICIPANT_RULE_LEVEL_GROUP_OR_BUSINESS&&(t.physicalAddress=t.addresses.some((function(e){return e.type.some((function(e){return e===t.ADDRESS_TYPES_PHYSICAL}))}))),Number(t.uConfig(t.PHYSICAL_ADDRESS_REQUIRED))===t.PARTICIPANT_RULE_LEVEL_GROUP_AND_BUSINESS&&(t.physicalAddress=t.addresses.some((function(e){return e.type.some((function(a){return a===t.ADDRESS_TYPES_PHYSICAL&&!!e.onGroup}))}))&&t.addresses.some((function(e){return e.type.some((function(a){return a===t.ADDRESS_TYPES_PHYSICAL&&!e.onGroup}))})))})).catch((function(e){t.uRequestErrorHandler(e)})).finally((function(){t.addressesLoading=!1}))}},{key:"getNotes",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"?",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"&",i=this.parentParticipant?"&source_id=".concat(this.parentParticipant.id):"";b.a.get("".concat("http://localhost:8000/api","/notes/").concat(e,"source_id=").concat(this.participantId)+"".concat(i,"&source=").concat(this.NOTE_SOURCES_PARTICIPANT,"&").concat(a)).then((function(e){if(t.notes=t.uRecursiveCamel(e.data),t.participant.type!==t.PARTICIPANT_TYPES_GROUP)for(var a=0;a<t.notes.length;a+=1)t.notes[a].sourceId===t.participant.participant&&(t.notes[a].onGroup=!0);Number(t.uConfig(t.REGISTRATION_FILE_REQUIRED))===t.PARTICIPANT_RULE_LEVEL_GROUP&&(t.uploadedAgreement=t.notes.some((function(e){return(e.type===t.NOTE_TYPES_AGREEMENT||e.type===t.NOTE_TYPES_REGISTRATION_APPLICATION)&&!!e.onGroup&&null!==e.fileName}))),Number(t.uConfig(t.REGISTRATION_FILE_REQUIRED))===t.PARTICIPANT_RULE_LEVEL_BUSINESS&&(t.uploadedAgreement=t.notes.some((function(e){return(e.type===t.NOTE_TYPES_AGREEMENT||e.type===t.NOTE_TYPES_REGISTRATION_APPLICATION)&&!e.onGroup&&null!==e.fileName}))),Number(t.uConfig(t.REGISTRATION_FILE_REQUIRED))===t.PARTICIPANT_RULE_LEVEL_GROUP_OR_BUSINESS&&(t.uploadedAgreement=t.notes.some((function(e){return(e.type===t.NOTE_TYPES_AGREEMENT||e.type===t.NOTE_TYPES_REGISTRATION_APPLICATION)&&null!==e.fileName}))),Number(t.uConfig(t.REGISTRATION_FILE_REQUIRED))===t.PARTICIPANT_RULE_LEVEL_GROUP_AND_BUSINESS&&(t.uploadedAgreement=t.notes.some((function(e){return(e.type===t.NOTE_TYPES_AGREEMENT||e.type===t.NOTE_TYPES_REGISTRATION_APPLICATION)&&!!e.onGroup&&null!==e.fileName}))&&t.notes.some((function(e){return(e.type===t.NOTE_TYPES_AGREEMENT||e.type===t.NOTE_TYPES_REGISTRATION_APPLICATION)&&!e.onGroup&&null!==e.fileName})))})).catch((function(e){t.uRequestErrorHandler(e)})).finally((function(){t.notesLoading=!1}))}},{key:"showContactFormModal",value:function(t){if(t&&t.id){var e=t.id;this.updatingContact=!0,this.selectedContact=this.contacts.find((function(t){return t.id===e}))}else this.updatingContact=!1,this.selectedContact={};this.showContactModal=!0}}]),e}(Object(c["c"])(p["a"],d["a"]));Object(o["a"])([Object(u["b"])()],ke.prototype,"businessStatus",void 0),Object(o["a"])([Object(u["b"])()],ke.prototype,"participant",void 0),Object(o["a"])([Object(u["b"])()],ke.prototype,"business",void 0),Object(o["a"])([Object(u["b"])()],ke.prototype,"parentParticipant",void 0),Object(o["a"])([Object(u["b"])()],ke.prototype,"blockState",void 0),Object(o["a"])([Object(u["b"])()],ke.prototype,"participantDataDirty",void 0),Object(o["a"])([Object(u["b"])()],ke.prototype,"instructionId",void 0),Object(o["a"])([Object(u["d"])("participant")],ke.prototype,"updateRouteParams",null),Object(o["a"])([Object(u["d"])("blockState")],ke.prototype,"setParentState",null),Object(o["a"])([Object(u["d"])("participantDataDirty")],ke.prototype,"updateParticipantData",null),ke=Object(o["a"])([Object(u["a"])({components:{Navbar:te["a"],ParticipantNotesTable:mt,AddressTable:Zt,Tooltip:I["a"],CustomTable:ae["a"],ContactFormModal:ge},computed:Object(l["b"])(["currentUser","instructions"])})],ke);var De=ke,xe=De,je=(a("238e"),Object(Q["a"])(xe,v,h,!1,null,"1a42ddc8",null)),Me=je.exports,Ue=a("76c8");function $e(t){return $e="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$e(t)}function Fe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Le(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ge(t,e,a){return e&&Le(t.prototype,e),a&&Le(t,a),t}function Be(t,e){return!e||"object"!==$e(e)&&"function"!==typeof e?Ye(t):e}function Ye(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qe(t){return qe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},qe(t)}function He(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ve(t,e)}function Ve(t,e){return Ve=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Ve(t,e)}var Qe=function(t){function e(){var t;return Fe(this,e),t=Be(this,qe(e).apply(this,arguments)),t.menuState=1,t.participantDataDirty=!1,t}return He(e,t),Ge(e,[{key:"setBlockState",value:function(t,e){this.menuState=t,e?this.uSetSupportToggle(e):this.uResetSupportToggle()}},{key:"setState",value:function(t,e){this.menuState=t,e?this.uSetSupportToggle(e):this.uResetSupportToggle()}},{key:"markParticipantDataDirty",value:function(){this.participantDataDirty=!0}},{key:"setParticipantDataUpdated",value:function(){this.participantDataDirty=!1}},{key:"updateParticipantHeader",value:function(){this.$emit("participantHeaderUpdated")}}]),e}(Object(c["c"])(p["a"]));Qe=Object(o["a"])([Object(u["a"])({computed:Object(l["b"])(["instructions"])})],Qe);var ze=Qe;function We(t){return We="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},We(t)}function Je(t,e,a,i,s,r,n){try{var o=t[r](n),c=o.value}catch(l){return void a(l)}o.done?e(c):Promise.resolve(c).then(i,s)}function Xe(t){return function(){var e=this,a=arguments;return new Promise((function(i,s){var r=t.apply(e,a);function n(t){Je(r,i,s,n,o,"next",t)}function o(t){Je(r,i,s,n,o,"throw",t)}n(void 0)}))}}function Ke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ze(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ta(t,e,a){return e&&Ze(t.prototype,e),a&&Ze(t,a),t}function ea(t,e){return!e||"object"!==We(e)&&"function"!==typeof e?aa(t):e}function aa(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ia(t){return ia=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},ia(t)}function sa(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ra(t,e)}function ra(t,e){return ra=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},ra(t,e)}var na=function(t){function e(){var t;return Ke(this,e),t=ea(this,ia(e).apply(this,arguments)),t.historyLoading=!1,t.historyRecords=[],t.totalHistoryRecords=0,t}return sa(e,t),ta(e,[{key:"mounted",value:function(){var t=Xe(n.a.mark((function t(){return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.getHistoryRecords(),this.setState(1,this.REMITTERFORM_INSTRUC_INTRO);case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"highlightRow",value:function(t){return t.effectiveDate<=this.uCurrentDate()}},{key:"getHistoryRecords",value:function(){var t=Xe(n.a.mark((function t(){var e,a,i;return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.historyRecords=[],this.historyLoading=!0,t.next=4,this.getList("remitter-historys","participant=".concat(this.participant.id));case 4:e=t.sent,a=e.data,i=e.count,this.totalHistoryRecords=i,this.formatHistoryRecords(a),this.historyLoading=!1;case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"formatHistoryRecords",value:function(t){for(var e=0;e<t.length;e+=1){var a=t[e];this.historyRecords.push({effectiveDate:a.effectiveDate,status:{value:this.PARTICIPANT_STATUS[a.registrationStatus],pillStyle:this.PARTICIPANT_HISTORY_STYLES[a.registrationStatus]},reason:a.reasonCode?this.PARTICIPANT_STATUS_REASON[a.reasonCode]:ee["a"].tc("none"),filingFrequency:this.FILING_FREQUENCIES_MASTER[a.filingFrequency],isRegularFiler:a.isRegularFiler,isSpecialFiler:a.isSpecialFiler,returnToRemitter:a.returnToRemitter,taxExempt:a.isTaxExempt,organization:a.businessName,changedBy:a.changedBy?a.changedBy.emailAddress:ee["a"].tc("unknown"),changeDate:a.changeDate})}}}]),e}(Object(c["c"])(p["a"],d["a"],ze));Object(o["a"])([Object(u["b"])()],na.prototype,"participant",void 0),Object(o["a"])([Object(u["b"])()],na.prototype,"parentParticipant",void 0),Object(o["a"])([Object(u["b"])()],na.prototype,"remitter",void 0),na=Object(o["a"])([Object(u["a"])({components:{ParticipantTemplate:Me,RemitterForm:Ue["a"],CustomTable:ae["a"]}})],na);var oa=na,ca=oa,la=(a("b4cf"),Object(Q["a"])(ca,f,m,!1,null,"e4c409f2",null)),ua=la.exports,pa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("ParticipantTemplate",{attrs:{blockState:t.menuState,participantDataDirty:t.participantDataDirty,participant:t.participant,parentParticipant:t.parentParticipant,instructionId:t.REMITTERFORM_INSTRUC_INTRO},on:{stateUpdated:t.setBlockState}},[a("template",{slot:"main-form-title"},[t._v(" "+t._s(t.$t("organization"))+" ")]),a("template",{slot:"main-form"},[a("ParticipantForm",{attrs:{updating:!0,participants:t.participants,participant:t.participant},on:{updateBusinessName:t.updateParticipantHeader}})],1),a("template",{slot:"tabs-one"},[a("b-nav-item",[a("div",{staticClass:"router-tab",class:{"router-link-active":10===t.menuState},on:{click:function(e){return t.setState(10,t.SUPPORT_PANEL_BUSINESS_TAB)}}},[t._v(" "+t._s(t.$t("businesses"))+" ")])])],1),10===t.menuState?a("template",{slot:"content-one"},[a("div",{staticClass:"table-header"},[a("p",{staticClass:"table-title"},[t._v(t._s(t.$t("businesses")))]),a("div",[!t.participant||!t.uHasGroup(t.USER_GROUP_AGENCY_MASTER)&&!t.uHasGroup(t.USER_GROUP_PARTICIPANT_MASTER)||t.uIsParticipantUser()&&t.uConfig(t.HIDE_CREATE_BUSINESS)?t._e():a("b-dropdown",{staticClass:"primary-dropdown-button",style:{float:"right"},attrs:{right:""},scopedSlots:t._u([{key:"button-content",fn:function(){return[t._v(" "+t._s(t.$t("createBusiness"))+" ")]},proxy:!0}],null,!1,4177592881)},[a("b-dropdown-item",[a("router-link",{attrs:{to:{name:"newRemitter",params:{parentParticipantId:t.participant.id}}}},[t._v(" "+t._s(t.$t("createRemitter"))+" ")])],1),t.uIsClaimsAppEnabled()?a("b-dropdown-item",[a("router-link",{attrs:{to:{name:"newGenerator",params:{parentParticipantId:t.participant.id}}}},[t._v(" "+t._s(t.$t("createGenerator"))+" ")])],1):t._e()],1)],1)]),a("CustomTable",{attrs:{data:t.businessRecords,columns:[[t.$t("registrationNumberShort"),"","regNo",.8,"left"],[t.$t("businessName"),"","businessName",1.8,"left"],[t.$t("type"),"","type",.8,"left"],[t.uFindInstruction(this.DISPLAY_JURISDICTION).substring(0,4),"","jurisdiction",.4,"left"],[t.$t("status"),"","status",1,"left"]],loading:t.businessesLoading,emptyStateMessage:t.$t("emptyState.businesses"),totalData:t.totalBusinessRecords,scrollWidth:800},on:{dataRequest:t.getBusinesses}})],1):t._e(),a("template",{slot:"tabs-two"},[a("b-nav-item",[a("div",{staticClass:"router-tab",class:{"router-link-active":11===t.menuState},on:{click:function(e){return t.setState(11,t.SUPPORT_PANEL_USERS)}}},[t._v(" "+t._s(t.$t("users"))+" ")])])],1),a("template",{slot:"content-two"},[11===t.menuState?a("div",[a("UsersTable",{attrs:{users:t.users,participant:t.participant,usersLoading:t.usersLoading},on:{updateUsers:t.getUsers,updateContacts:t.markParticipantDataDirty}})],1):t._e()])],2)],1)},da=[],fa=a("6eea"),ma=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"table-header"},[a("p",{staticClass:"table-title"},[t._v(t._s(t.$t("users")))]),t.uIsMasterUser()&&t.uCanModifyParticipantData(t.participant.id)?a("button",{staticClass:"btn primary-action-btn",on:{click:function(e){return e.preventDefault(),t.showInviteModalDialog()}}},[t._v(" "+t._s(t.$t("inviteNewUser"))+" ")]):t._e()]),a("div",{staticClass:"recursive-table"},[a("div",{staticClass:"recursive-table-header"},[a("div",{staticClass:"recursive-table-header-data left-align",style:{flex:.5}},[t._v(" "+t._s(t.$t("registrationNo"))+" ")]),a("div",{staticClass:"recursive-table-header-data left-align"},[t._v(t._s(t.$t("business")))]),a("div",{staticClass:"recursive-table-header-data left-align"},[t._v(t._s(t.$t("roles")))])]),a("div",{staticClass:"recursive-table-body"},t._l(t.users,(function(e){return a("div",{key:e.id,staticClass:"parent-recursive-table-block"},[a("div",{staticClass:"recursive-table-block-header recursive-table-block-header-light"},[a("span",{staticClass:"table-header-title"},[t._v(" "+t._s(e.contact?e.contact.firstName:"")+" "+t._s(e.contact?e.contact.lastName:"")+" "),e.contact?a("font-awesome-icon",{attrs:{icon:"circle"}}):t._e(),t._v(" "+t._s(e.emailAddress)+" "),e.contact?a("font-awesome-icon",{attrs:{icon:"circle"}}):t._e(),t._v(" "+t._s(t.$t("lastLogin"))+": "+t._s(e.lastLogin?t.uFormatDate(new Date(e.lastLogin)):t.$t("noRecord"))+" "),e.memberOfOrg?[a("font-awesome-icon",{attrs:{icon:"circle"}}),t._v(" "+t._s(t.$t("memberOfOrg"))+" ")]:t._e(),e.status===t.USER_STATUS_INACTIVE?a("span",{staticClass:"state--error"},[a("font-awesome-icon",{attrs:{icon:"circle"}}),t._v(" "+t._s(t.$t("deactivated"))+" ")],1):t._e()],2),t.uIsMasterUser()&&t.uCanModifyParticipantData(t.participant.id)?a("span",{staticClass:"table-group-btn"},[a("button",{staticClass:"btn icon-btn",attrs:{type:"submit"},on:{click:function(a){return a.preventDefault(),t.showGroupModal(e)}}},[a("font-awesome-icon",{attrs:{icon:["fa","edit"],title:t.$t("updateUserRoles")}})],1)]):t._e()]),t._l(e.participantUsers,(function(i){return a("div",{key:i.id,staticClass:"recursive-table-body-row"},[i.participant.participant===t.participant.id?a("div",{staticClass:"recursive-table-body-data left-align",style:{flex:.5}},[t.uCanSeeRegistrationNo(t.uGetStatus(i.participant))?[t._v(" "+t._s(t.uGetRegNo(i.participant))+" ")]:[t._v(" "+t._s(t.$t("TBD"))+" ")]],2):t._e(),i.participant.participant===t.participant.id?a("div",{staticClass:"recursive-table-body-data left-align"},[t._v(" "+t._s(i.participant.businessName)+" ")]):t._e(),i.participant.participant===t.participant.id?a("div",{staticClass:"recursive-table-body-data left-align"},[t._v(" "+t._s(e.groups.length>=1?t.uSelectGroupNames(e.groups).map((function(e){return t.uShowGroupName(e.name)})).join(", "):t.$t("noRoles"))+" ")]):t._e()])}))],2)})),0),a("div",{staticClass:"table-empty-loading-state"},[t.usersLoading?a("div",{staticClass:"table-loading"},[a("LoadingIcon")],1):t._e(),0!==t.users.length||t.usersLoading?t._e():a("div",{staticClass:"table-empty-state large-text"},[t._v(" "+t._s(t.$t("emptyState.users"))+" ")])])]),a("UpdateUserModal",{attrs:{showModal:t.showModal,user:t.selectedUser,groups:t.groups,participants:t.participants,participant:t.participant},on:{hideModal:function(e){t.showModal=!1},updateUsers:function(e){return t.getUsers()}}}),a("InviteUserModal",{attrs:{showModal:t.showInviteModal,participants:t.participants,participant:t.participant},on:{hideModal:function(e){t.showInviteModal=!1},updateUsers:function(e){return t.getUsers()}}})],1)},va=[],ha=a("31c9"),_a=a("533d");function ba(t){return ba="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ba(t)}function ya(t,e,a,i,s,r,n){try{var o=t[r](n),c=o.value}catch(l){return void a(l)}o.done?e(c):Promise.resolve(c).then(i,s)}function ga(t){return function(){var e=this,a=arguments;return new Promise((function(i,s){var r=t.apply(e,a);function n(t){ya(r,i,s,n,o,"next",t)}function o(t){ya(r,i,s,n,o,"throw",t)}n(void 0)}))}}function Ca(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ta(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ea(t,e,a){return e&&Ta(t.prototype,e),a&&Ta(t,a),t}function Oa(t,e){return!e||"object"!==ba(e)&&"function"!==typeof e?Ra(t):e}function Ra(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ia(t){return Ia=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ia(t)}function Pa(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Sa(t,e)}function Sa(t,e){return Sa=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Sa(t,e)}var Na=function(t){function e(){var t;return Ca(this,e),t=Oa(this,Ia(e).apply(this,arguments)),t.showModal=!1,t.showInviteModal=!1,t.selectedUser={},t.groups=[],t.participants=[],t}return Pa(e,t),Ea(e,[{key:"mounted",value:function(){var t=ga(n.a.mark((function t(){var e,a,i,s;return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getList("groups","participant=true");case 2:if(e=t.sent,a=e.data,this.groups=a,!this.participant.id){t.next=11;break}return t.next=8,this.getList("list-participants","group_participant=".concat(this.participant.id));case 8:i=t.sent,s=i.data,this.participants=s;case 11:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getUsers",value:function(){this.$emit("updateUsers"),this.$emit("updateContacts")}},{key:"showGroupModal",value:function(t){this.selectedUser=t,this.showModal=!0}},{key:"showInviteModalDialog",value:function(){this.showInviteModal=!0}}]),e}(Object(c["c"])(p["a"],d["a"]));Object(o["a"])([Object(u["b"])()],Na.prototype,"users",void 0),Object(o["a"])([Object(u["b"])()],Na.prototype,"participant",void 0),Object(o["a"])([Object(u["b"])()],Na.prototype,"usersLoading",void 0),Na=Object(o["a"])([Object(u["a"])({components:{UpdateUserModal:ha["a"],InviteUserModal:_a["a"],LoadingIcon:J["a"]},computed:Object(l["b"])(["currentUser"])})],Na);var wa=Na,Aa=wa,ka=(a("1eac"),Object(Q["a"])(Aa,ma,va,!1,null,"33044a16",null)),Da=ka.exports;function xa(t){return xa="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xa(t)}function ja(t,e,a,i,s,r,n){try{var o=t[r](n),c=o.value}catch(l){return void a(l)}o.done?e(c):Promise.resolve(c).then(i,s)}function Ma(t){return function(){var e=this,a=arguments;return new Promise((function(i,s){var r=t.apply(e,a);function n(t){ja(r,i,s,n,o,"next",t)}function o(t){ja(r,i,s,n,o,"throw",t)}n(void 0)}))}}function Ua(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $a(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Fa(t,e,a){return e&&$a(t.prototype,e),a&&$a(t,a),t}function La(t,e){return!e||"object"!==xa(e)&&"function"!==typeof e?Ga(t):e}function Ga(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ba(t){return Ba=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ba(t)}function Ya(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&qa(t,e)}function qa(t,e){return qa=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},qa(t,e)}var Ha=function(t){function e(){var t;return Ua(this,e),t=La(this,Ba(e).apply(this,arguments)),t.agencyJurisdictions=[],t.participants=[],t.businessesLoading=!1,t.businessRecords=[],t.totalBusinessRecords=0,t.usersLoading=!1,t.users=[],t.totalUsers=0,t}return Ya(e,t),Fa(e,[{key:"mounted",value:function(){var t=Ma(n.a.mark((function t(){return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.currentUser.agencyUser&&(this.agencyJurisdictions=this.currentUser.agencyUserJurisdictions),this.getBusinesses(),this.getUsers(),this.setState(1,this.REMITTERFORM_INSTRUC_INTRO);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getUsers",value:function(){var t=Ma(n.a.mark((function t(){var e,a,i;return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.usersLoading=!0,t.next=3,this.getList("custom-users","participant=".concat(this.participant.id));case 3:e=t.sent,a=e.data,i=e.count,this.totalUsers=i,this.users=a,this.markUsersOnOrg(),this.usersLoading=!1;case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"markUsersOnOrg",value:function(){for(var t=0;t<this.users.length;t+=1)for(var e=0;e<this.users[t].participantUsers.length;e+=1){var a=this.users[t].participantUsers[e];a.participant.id===this.participant.id&&(this.users[t].memberOfOrg=!0)}}},{key:"getBusinesses",value:function(){var t=Ma(n.a.mark((function t(){var e,a,i;return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.businessesLoading=!0,t.next=3,this.getList("list-participants","type=".concat(this.PARTICIPANT_TYPES_REMITTER,"&type=").concat(this.PARTICIPANT_TYPES_GENERATOR,"&group_participant=").concat(this.participant.id,"&allStatus=true"));case 3:e=t.sent,a=e.data,i=e.count,this.totalBusinessRecords=i,this.participants=a,this.formatBusinesses(a),this.businessesLoading=!1;case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"formatBusinesses",value:function(t){for(var e=this,a=function(a){var i=t[a],s=e.uGetRegNo(i),r=e.uGetJurisdictionCode(i),n=e.uGetJurisdictionId(i),o=e.uGetStatus(i);e.businessRecords.push({regNo:s,businessName:i.businessName,jurisdiction:r,type:e.PARTICIPANT_TYPES[i.type],status:{value:e.PARTICIPANT_STATUS[o],pillStyle:e.PARTICIPANT_STATUS_STYLES[o]},actions:[{routePath:{name:"participant",params:{participantId:i.id}},noAction:!(e.currentUser.agencyUser&&e.agencyJurisdictions.filter((function(t){return t.id===n}))[0]||e.uIsParticipantUser()),canEdit:e.uIsMasterUser()&&e.uCanModifyParticipantData(i.id)}]})},i=0;i<t.length;i+=1)a(i)}}]),e}(Object(c["c"])(p["a"],d["a"],ze));Object(o["a"])([Object(u["b"])()],Ha.prototype,"participant",void 0),Object(o["a"])([Object(u["b"])()],Ha.prototype,"parentParticipant",void 0),Ha=Object(o["a"])([Object(u["a"])({components:{ParticipantTemplate:Me,ParticipantForm:fa["a"],CustomTable:ae["a"],UsersTable:Da}})],Ha);var Va=Ha,Qa=Va,za=(a("fd67"),Object(Q["a"])(Qa,pa,da,!1,null,"e3bf001a",null)),Wa=za.exports,Ja=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.generator?a("ParticipantTemplate",{attrs:{blockState:t.menuState,businessStatus:t.generator.status,business:t.generator,participant:t.participant,parentParticipant:t.parentParticipant,instructionId:t.GENERATORFORM_INSTRUC_INTRO},on:{stateUpdated:t.setBlockState,participantDataUpdated:t.setParticipantDataUpdated}},[a("template",{slot:"main-form-title"},[t._v(" "+t._s(t.$t("generator"))+" ")]),a("template",{slot:"main-form"},[a("GeneratorForm",{attrs:{updating:!0,generatorId:t.generator.id,participant:t.participant,parentParticipant:t.parentParticipant},on:{generatorUpdated:t.updateParticipantHeader,historyUpdated:t.getHistoryRecords}})],1),a("template",{slot:"tabs-one"}),a("template",{slot:"content-one"}),a("template",{slot:"tabs-two"},[a("b-nav-item",[a("div",{staticClass:"router-tab",class:{"router-link-active":10===t.menuState},on:{click:function(e){return t.setState(10,t.HISTORYTABLE_INSTRUC_INTRO)}}},[t._v(" "+t._s(t.$t("history"))+" ")])]),a("b-nav-item",[a("div",{staticClass:"router-tab",class:{"router-link-active":12===t.menuState},on:{click:function(e){return t.setState(12,t.ASSETTABLE_INSTRUC_INTRO)}}},[t._v(" "+t._s(t.$t("assets"))+" ")])])],1),10===t.menuState?a("template",{slot:"content-two"},[a("div",{staticClass:"table-header"},[a("p",{staticClass:"table-title"},[t._v(t._s(t.$t("history")))])]),a("CustomTable",{attrs:{data:t.historyRecords,columns:[[t.$t("effectiveDate"),"","effectiveDate",1,"left"],[t.$t("status"),"","status",.6,"left"],[t.$t("reasonCode"),"","reason",.6,"center"],[t.uFindInstruction(this.GENERATORFORM_DISPLAYNAME_DROP_OFF),"","isDropOff",.6,"left"],[t.$t("organization"),"","organization",1,"left"],[t.$t("changedBy"),"","changedBy",.6,"left"],[t.$t("changeDate"),"","changeDate",1,"center"]],loading:t.historyLoading,emptyStateMessage:t.$t("emptyState.history"),totalData:t.totalHistoryRecords,scrollWidth:1120,noActions:!0,highlightRow:t.highlightRow},on:{dataRequest:t.getHistoryRecords}})],1):t._e(),12===t.menuState?a("template",{slot:"content-two"},[a("AssetTable",{attrs:{participant:t.participant,generator:t.generator,parentParticipant:t.parentParticipant}})],1):t._e()],2):t._e()],1)},Xa=[],Ka=a("b40a"),Za=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"table-header"},[a("p",{staticClass:"table-title"},[t._v(t._s(t.$t("assets")))]),this.hasUserPermission?a("button",{staticClass:"btn primary-action-btn",on:{click:function(e){return t.controlFlowFormModal({modelType:!1})}}},[t._v(" "+t._s(t.$t("createAsset"))+" ")]):t._e(),this.hasUserPermission?a("button",{staticClass:"btn primary-action-btn",on:{click:function(e){return t.controlFlowFormModal({modelType:!0})}}},[t._v(" "+t._s(t.$t("assignAsset"))+" ")]):t._e()]),a("CustomTable",{attrs:{data:t.assetRecords,columns:[[t.$t("type"),"asset__asset_category__name","nameLabel",1,"left"],[t.$t("size"),"asset__size","sizeWithUnit",1,"left"],[t.$t("providedByGrant"),"","providedByGrantLabel",1,"left"],[t.$t("isSuppliedByGenerator"),"","isSuppliedByGeneratorLabel",1,"left"],[t.$t("isOwnedByGenerator"),"","isOwnedByGeneratorLabel",1,"left"],[t.$t("identifier"),"","identifier",1,"left"],[t.$t("statusDate"),"","statusDate",1,"left"],[t.$t("status"),"","statusLabel",1,"left"]],loading:t.assetsLoading,emptyStateMessage:t.$t("emptyState.asset"),totalData:t.totalAssets,scrollWidth:1120,noActions:!1},on:{dataRequest:t.getAssets,openModal:t.showAssetFormModal}},[a("template",{slot:"filters"},[0!==t.assetRecords.length||!0!==t.filterClean?a("div",{staticClass:"table-filter-bar"},[a("div",{staticClass:"table-filter-icon"},[a("font-awesome-icon",{attrs:{icon:"search"}})],1),a("div",{staticClass:"table-filter"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.assetCategoryId,expression:"filter.assetCategoryId"}],staticClass:"custom-select",class:{inputActive:void 0!==t.filter.assetCategoryId},attrs:{name:"type"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.filter,"assetCategoryId",e.target.multiple?a:a[0])},function(e){return e.preventDefault(),t.getAssets()}]}},[a("option",{domProps:{value:void 0}},[t._v(t._s(t.$t("allTypes")))]),t._l(t.assetCategories,(function(e){return a("option",{key:e.id,domProps:{value:e.id,textContent:t._s(e.name[t.uLangFromLocale(t.$i18n.locale)])}})}))],2)]),a("div",{staticClass:"table-filter"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.isProvidedByGrant,expression:"filter.isProvidedByGrant"}],staticClass:"custom-select",class:{inputActive:void 0!==t.filter.isProvidedByGrant},attrs:{name:"type"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.filter,"isProvidedByGrant",e.target.multiple?a:a[0])},function(e){return e.preventDefault(),t.getAssets()}]}},[a("option",{domProps:{value:void 0}},[t._v(t._s(t.$t("isProvidedByGrant")))]),t._l(t.yesOrNoChoices,(function(e){return a("option",{key:e.id,domProps:{value:e.id,textContent:t._s(e.name)}})}))],2)]),a("div",{staticClass:"table-filter"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.isSuppliedByGenerator,expression:"filter.isSuppliedByGenerator"}],staticClass:"custom-select",class:{inputActive:void 0!==t.filter.isSuppliedByGenerator},attrs:{name:"type"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.filter,"isSuppliedByGenerator",e.target.multiple?a:a[0])},function(e){return e.preventDefault(),t.getAssets()}]}},[a("option",{domProps:{value:void 0}},[t._v(t._s(t.$t("isSuppliedByGenerator")))]),t._l(t.yesOrNoChoices,(function(e){return a("option",{key:e.id,domProps:{value:e.id,textContent:t._s(e.name)}})}))],2)]),a("div",{staticClass:"table-filter"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.isOwnedByGenerator,expression:"filter.isOwnedByGenerator"}],staticClass:"custom-select",class:{inputActive:void 0!==t.filter.isOwnedByGenerator},attrs:{name:"type"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.filter,"isOwnedByGenerator",e.target.multiple?a:a[0])},function(e){return e.preventDefault(),t.getAssets()}]}},[a("option",{domProps:{value:void 0}},[t._v(t._s(t.$t("isOwnedByGenerator")))]),t._l(t.yesOrNoChoices,(function(e){return a("option",{key:e.id,domProps:{value:e.id,textContent:t._s(e.name)}})}))],2)]),a("div",{staticClass:"table-filter"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.assetIdentifier,expression:"filter.assetIdentifier"}],staticClass:"form-control",class:{inputActive:void 0!==t.filter.identifier&&""!==t.filter.identifier},attrs:{type:"text",name:"Identifier",placeholder:t.$t("identifier")},domProps:{value:t.filter.assetIdentifier},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.getAssets())},input:function(e){e.target.composing||t.$set(t.filter,"assetIdentifier",e.target.value)}}})]),a("div",{staticClass:"table-filter"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.status,expression:"filter.status"}],staticClass:"custom-select",class:{inputActive:void 0!==t.filter.status},attrs:{name:"type"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.filter,"status",e.target.multiple?a:a[0])},function(e){return e.preventDefault(),t.getAssets()}]}},[a("option",{domProps:{value:void 0}},[t._v(t._s(t.$t("allStatus")))]),t._l(this.ASSET_STATUS,(function(e,i){return a("option",{key:i,domProps:{value:i,textContent:t._s(e)}})}))],2)]),a("div",{staticClass:"table-filter-clear"},[t.filterClean?t._e():a("font-awesome-icon",{attrs:{icon:"times",title:t.$t("clearFilter")},on:{click:function(e){return t.removeFilter()}}})],1)]):t._e()])],2),a("Modal",{attrs:{showModal:t.showModal,updating:t.updating,title:t.updating?"updateAsset":t.assigning?"assignAsset":"createAsset",error_message_text:this.hasUserPermission?void 0:"higherPermissionsRequired"},on:{hideModal:t.hideAssetModal}},[a("template",{slot:"body"},[a("form",{attrs:{href:"assetFormModal"}},[t.assigning?a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("assetAvailableLabel")))]),a("select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.asset.id,expression:"asset.id"}],staticClass:"custom-select",attrs:{name:"assetAvailableLabel"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.asset,"id",e.target.multiple?a:a[0])}}},[a("option",{attrs:{disabled:""},domProps:{value:void 0}},[t._v(" "+t._s(t.$t("selectAsset"))+" ")]),t._l(t.assets,(function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])}))],2),a("span",{staticClass:"form-error-message"},[t._v(t._s(t.errors.first("assetAvailableLabel")))])]):t._e(),t.assigning?t._e():a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("type")))]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.assetCategoryId,expression:"assetCategoryId"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"custom-select",attrs:{disabled:t.updating,name:"product"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.assetCategoryId=e.target.multiple?a:a[0]}}},[a("option",{attrs:{disabled:""},domProps:{value:null}},[t._v(t._s(t.$t("selectType")))]),t._l(t.assetCategories,(function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(" "+t._s(e.name[t.uLangFromLocale(t.$i18n.locale)])+" ")])}))],2),a("span",{staticClass:"form-error-message"},[t._v(t._s(t.errors.first("type")))])]),t.assigning?t._e():a("div",{staticClass:"form-group"},[this.typeUnit?a("label",[t._v(" "+t._s(t.$t("size")+" ("+this.typeUnit+")")+" ")]):a("label",[t._v(t._s(t.$t("size")))]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.asset.size,expression:"asset.size"}],staticClass:"form-control",attrs:{type:"text",name:"size"},domProps:{value:t.asset.size},on:{input:function(e){e.target.composing||t.$set(t.asset,"size",e.target.value)}}})]),t.updating?a("div",{staticClass:"form-group"},[a("div",{staticClass:"form-check"},[a("b-form-checkbox",{staticClass:"form-check-input",attrs:{disabled:!0,type:"checkbox"},model:{value:t.asset.providedByGrant,callback:function(e){t.$set(t.asset,"providedByGrant",e)},expression:"asset.providedByGrant"}}),a("label",{staticClass:"form-check-label"},[t._v(t._s(t.$t("providedByGrant")))])],1)]):t._e(),t.updating?a("div",{staticClass:"form-group"},[a("div",{staticClass:"form-check"},[a("b-form-checkbox",{staticClass:"form-check-input",attrs:{type:"checkbox"},model:{value:t.asset.isSuppliedByGenerator,callback:function(e){t.$set(t.asset,"isSuppliedByGenerator",e)},expression:"asset.isSuppliedByGenerator"}}),a("label",{staticClass:"form-check-label"},[t._v(t._s(t.$t("isSuppliedByGenerator")))])],1)]):t._e(),t.updating?a("div",{staticClass:"form-group"},[a("div",{staticClass:"form-check"},[a("b-form-checkbox",{staticClass:"form-check-input",attrs:{type:"checkbox"},model:{value:t.asset.isOwnedByGenerator,callback:function(e){t.$set(t.asset,"isOwnedByGenerator",e)},expression:"asset.isOwnedByGenerator"}}),a("label",{staticClass:"form-check-label"},[t._v(t._s(t.$t("isOwnedByGenerator")))])],1)]):t._e(),t.updating?a("div",{staticClass:"detail-list"},[a("p",[a("span",{staticClass:"list-label"},[t._v(t._s(t.$t("status"))+":")]),t._v(" "+t._s(t.asset.statusLabel["value"])+" ")])]):t._e(),t.updating||t.assigning?t._e():a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("ordered_date")))]),a("Datepicker",{attrs:{"append-to-body":!0,lang:"en",type:"text","value-type":"format","data-vv-name":"orderedDate",name:"ordered_date",placeholder:t.$t("dateFormat")},on:{clear:function(e){t.asset.orderedDate=null}},model:{value:t.asset.orderedDate,callback:function(e){t.$set(t.asset,"orderedDate",e)},expression:"asset.orderedDate"}}),a("span",{staticClass:"form-error-message"},[t._v(t._s(t.errors.first("ordered_date")))])],1),t.updating||t.assigning?t._e():a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("in_service_date")))]),a("Datepicker",{attrs:{"append-to-body":!0,lang:"en",type:"text","value-type":"format","data-vv-name":"asset.inServiceDate",name:"in_service_date",placeholder:t.$t("dateFormat")},on:{clear:function(e){t.asset.inServiceDate=null}},model:{value:t.asset.inServiceDate,callback:function(e){t.$set(t.asset,"inServiceDate",e)},expression:"asset.inServiceDate"}}),a("span",{staticClass:"form-error-message"},[t._v(t._s(t.errors.first("in_service_date")))])],1),a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("deliveredDate")))]),a("Datepicker",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"append-to-body":!0,lang:"en",type:"text","value-type":"format","data-vv-name":"deliveredDate",name:"deliveredDate",placeholder:t.$t("dateFormat")},on:{clear:function(e){t.deliveredDate=null}},model:{value:t.deliveredDate,callback:function(e){t.deliveredDate=e},expression:"deliveredDate"}}),a("span",{staticClass:"form-error-message"},[t._v(t._s(t.errors.first("deliveredDate")))])],1),t.updating?a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("removedDate")))]),a("Datepicker",{attrs:{"append-to-body":!0,lang:"en",type:"text","value-type":"format","data-vv-name":"removedDate",name:"removedDate",placeholder:t.$t("dateFormat")},on:{clear:function(e){t.assetGenerator.removedDate=null}},model:{value:t.assetGenerator.removedDate,callback:function(e){t.$set(t.assetGenerator,"removedDate",e)},expression:"assetGenerator.removedDate"}}),a("span",{staticClass:"form-error-message"},[t._v(t._s(t.errors.first("removedDate")))])],1):t._e(),t.updating?a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("retired_date")))]),a("Datepicker",{attrs:{"append-to-body":!0,lang:"en",type:"text","value-type":"format","data-vv-name":"retiredDate",name:"retired_date",placeholder:t.$t("dateFormat")},on:{clear:function(e){t.asset.retiredDate=null}},model:{value:t.asset.retiredDate,callback:function(e){t.$set(t.asset,"retiredDate",e)},expression:"asset.retiredDate"}}),a("span",{staticClass:"form-error-message"},[t._v(t._s(t.errors.first("retired_date")))])],1):t._e(),t.assigning?t._e():a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("identifier")))]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"max:30",expression:"'max:30'"},{name:"model",rawName:"v-model",value:t.asset.identifier,expression:"asset.identifier"}],staticClass:"form-control",attrs:{type:"text",name:"identifier"},domProps:{value:t.asset.identifier},on:{input:function(e){e.target.composing||t.$set(t.asset,"identifier",e.target.value)}}}),a("span",{staticClass:"form-error-message"},[t._v(t._s(t.errors.first("identifier")))])]),t.assigning?t._e():a("div",{staticClass:"form-group"},[a("label",[t._v(" "+t._s(t.$t("location"))+" "),a("Tooltip",{attrs:{tooltip:t.uFindInstruction(this.ASSETFORM_INFOTIP_COMMENT)}})],1),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"max:100",expression:"'max:100'"},{name:"model",rawName:"v-model",value:t.asset.location,expression:"asset.location"}],staticClass:"form-control",attrs:{type:"text",name:"location"},domProps:{value:t.asset.location},on:{input:function(e){e.target.composing||t.$set(t.asset,"location",e.target.value)}}}),a("span",{staticClass:"form-error-message"},[t._v(t._s(t.errors.first("location")))])]),a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("comment")))]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.assetGenerator.comment,expression:"assetGenerator.comment"}],staticClass:"form-control",attrs:{type:"text",name:"comment"},domProps:{value:t.assetGenerator.comment},on:{input:function(e){e.target.composing||t.$set(t.assetGenerator,"comment",e.target.value)}}}),t._v(" "),a("span",{staticClass:"form-error-message"},[t._v(t._s(t.errors.first("comment")))])]),t.warnDeliveredDate?a("div",{staticClass:"form-warning-message form-warning-message--permissions"},[t._v(" "+t._s(t.$t("deliveredDateOverOperationEndDateWarningMsg"))+" ("+t._s(this.generator.operationsEndDate)+") ")]):t._e()])]),a("template",{slot:"footer"},[a("button",{staticClass:"btn primary-action-btn",attrs:{disabled:t.submitted||t.errors.any()||!this.hasUserPermission,type:"submit"},on:{click:function(e){return e.preventDefault(),t.submitModalForm(e)}}},[t._v(" "+t._s(t.updating?t.$t("update"):t.$t("assign"))+" ")])])],2)],1)},ti=[],ei=a("2ef0"),ai=a.n(ei),ii=a("55ed"),si=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.showModal?a("div",[a("transition",{attrs:{name:"modal"}},[a("div",{staticClass:"modal-mask"},[a("div",{staticClass:"modal-wrapper modal-dialog"},[a("div",{staticClass:"modal-container modal-content"},[a("div",{staticClass:"modal-header"},[[t.title?a("p",{staticClass:"modal-title"},[t._v(t._s(t.$t(t.title)))]):t._e(),t._t("header")]],2),a("div",{staticClass:"modal-body"},[t.topMessageHtml?a("div",{staticClass:"instruction-text instruction-top",domProps:{innerHTML:t._s(t.topMessageHtml)}}):t._e(),t._t("body")],2),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn secondary-action-btn",on:{click:function(e){return e.preventDefault(),t.$emit("hideModal")}}},[t._v(" "+t._s(t.$t("cancel"))+" ")]),t._t("footer")],2),t.errorMessageText?a("div",{staticClass:"form-error-message--permissions",domProps:{textContent:t._s(t.errorMessageText)}}):t._e()])])])])],1):t._e()},ri=[];function ni(t){return ni="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ni(t)}function oi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ci(t,e){return!e||"object"!==ni(e)&&"function"!==typeof e?li(t):e}function li(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ui(t){return ui=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},ui(t)}function pi(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&di(t,e)}function di(t,e){return di=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},di(t,e)}var fi=function(t){function e(){return oi(this,e),ci(this,ui(e).apply(this,arguments))}return pi(e,t),e}(Object(c["c"])(p["a"]));Object(o["a"])([Object(u["b"])()],fi.prototype,"showModal",void 0),Object(o["a"])([Object(u["b"])()],fi.prototype,"title",void 0),Object(o["a"])([Object(u["b"])()],fi.prototype,"topMessageHtml",void 0),Object(o["a"])([Object(u["b"])()],fi.prototype,"errorMessageText",void 0),fi=Object(o["a"])([Object(u["a"])({components:{LoadingIcon:J["a"]}})],fi);var mi=fi,vi=mi,hi=(a("a33b"),Object(Q["a"])(vi,si,ri,!1,null,"da99ab5a",null)),_i=hi.exports;function bi(t){return bi="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bi(t)}function yi(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function gi(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?yi(Object(a),!0).forEach((function(e){Ci(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):yi(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function Ci(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Ti(t,e,a,i,s,r,n){try{var o=t[r](n),c=o.value}catch(l){return void a(l)}o.done?e(c):Promise.resolve(c).then(i,s)}function Ei(t){return function(){var e=this,a=arguments;return new Promise((function(i,s){var r=t.apply(e,a);function n(t){Ti(r,i,s,n,o,"next",t)}function o(t){Ti(r,i,s,n,o,"throw",t)}n(void 0)}))}}function Oi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ri(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ii(t,e,a){return e&&Ri(t.prototype,e),a&&Ri(t,a),t}function Pi(t,e){return!e||"object"!==bi(e)&&"function"!==typeof e?Si(t):e}function Si(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ni(t){return Ni=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ni(t)}function wi(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ai(t,e)}function Ai(t,e){return Ai=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Ai(t,e)}var ki=function(t){function e(){var t;return Oi(this,e),t=Pi(this,Ni(e).apply(this,arguments)),t.showModal=!1,t.asset={},t.assetGenerator={},t.assetCategories=[],t.assets=[],t.updating=!1,t.assigning=!1,t.totalAssets=0,t.assetsLoading=!1,t.submitted=!1,t.assetRecords=[],t.latestAsset={},t.hasUserPermission=!1,t.jurisdictionId=null,t.assetCategoryId=null,t.warnDeliveredDate=!1,t.filterClean=!0,t.filter={},t.deliveredDate="",t.yesOrNoChoices=[{id:!0,name:ee["a"].tc("yes")},{id:!1,name:ee["a"].tc("no")}],t}return wi(e,t),Ii(e,[{key:"cleanErrors",value:function(){this.$validator.errors.clear()}},{key:"watchFilter",value:function(){this.filterClean=void 0===ai.a.uniq(Object.values(this.filter))[0]}},{key:"compareDates",value:function(){if(this.generator.operationsEndDate){var t=new Date(this.deliveredDate),e=new Date(this.generator.operationsEndDate);this.warnDeliveredDate=t>e}else this.warnDeliveredDate=!1}},{key:"mounted",value:function(){var t=Ei(n.a.mark((function t(){var e,a;return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.hasUserPermission=this.uHasGroup(this.USER_GROUP_AGENCY_CLAIMASSET_MANAGER),this.getAssets(),t.next=4,this.getList("asset-category");case 4:e=t.sent,a=e.data,this.assetCategories=a,this.updating&&(this.assetCategoryId=this.asset.assetCategoryId);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getAssets",value:function(){var t=Ei(n.a.mark((function t(){var e,a,i,s,r,o=arguments;return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=o.length>0&&void 0!==o[0]?o[0]:0,a=o.length>1&&void 0!==o[1]?o[1]:"",i=o.length>2&&void 0!==o[2]&&o[2],this.assetsLoading=!0,this.assetsLoading){t.next=6;break}return t.abrupt("return");case 6:return i&&(this.assetRecords=[]),this.assetRecords=[],s=this.toQuery(gi({generator:this.generator.id},this.filter)),t.next=11,this.getList("assets",s,e,this.TABLE_LIMIT,a);case 11:r=t.sent,this.totalAssets=r.count,this.formatList(r.data),this.assetsLoading=!1;case 15:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"formatList",value:function(t){for(var e=0;e<t.length;e+=1){var a=t[e];this.assetRecords.push(gi({},a,{},{nameLabel:a.assetCategory.name[this.uLang()],providedByGrantLabel:a.providedByGrant?ee["a"].tc("yes"):ee["a"].tc("no"),isSuppliedByGeneratorLabel:a.isSuppliedByGenerator?ee["a"].tc("yes"):ee["a"].tc("no"),isOwnedByGeneratorLabel:a.isOwnedByGenerator?ee["a"].tc("yes"):ee["a"].tc("no"),statusLabel:{value:this.ASSET_STATUS[a.status],pillStyle:this.ASSET_STATUS_STYLES[a.status]},actions:[{modalCall:!0,canEdit:this.hasUserPermission}]}))}}},{key:"controlFlowFormModal",value:function(){var t=Ei(n.a.mark((function t(){var e,a=this,i=arguments;return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=i.length>0&&void 0!==i[0]?i[0]:{modelType:!1},this.assigning=e.modelType,!this.assigning){t.next=7;break}return t.next=5,this.getList("assets","status=".concat(this.ASSET_STATUS_AVAILABLE));case 5:this.assets=t.sent,this.assets=ai.a.map(this.assets.data,(function(t){var e=t.assetCategory.name[a.uLang()];return{id:t.id,name:"".concat(e," ").concat(t.size," ").concat(t.assetCategory.unitOfMeasure||""," <").concat(t.identifier||"",">")}}));case 7:this.showAssetFormModal(e.tableObject);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"showAssetFormModal",value:function(t){this.showModal=!0,t?(this.updating=!0,this.assigning=!1,this.assetGenerator=ai.a.cloneDeep(t.currentGeneratorAsset),this.deliveredDate=this.assetGenerator.deliveredDate,this.asset=ai.a.cloneDeep(t),this.assetCategoryId=this.asset.assetCategoryId):(this.updating=!1,this.assetGenerator={},this.asset={},this.deliveredDate=this.generator.operationsStartDate,this.assetCategoryId=void 0)}},{key:"updateAssetTable",value:function(){this.$emit("updateAsset")}},{key:"hideAssetModal",value:function(){this.showModal=!1}},{key:"submitModalForm",value:function(){var t=Ei(n.a.mark((function t(){var e;return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.hasUserPermission){t.next=2;break}return t.abrupt("return",!1);case 2:return this.submitted=!0,t.next=5,this.$validator.validate();case 5:if(e=t.sent,e){t.next=10;break}this.submitted=!1,t.next=27;break;case 10:if(t.prev=10,this.updating){t.next=17;break}return t.next=14,b.a.post("".concat("http://localhost:8000/api","/generator-assets/"),this.finalGeneratorAsset());case 14:this.getAssets(0,"",!0),t.next=20;break;case 17:return t.next=19,b.a.put("".concat("http://localhost:8000/api","/generator-assets/").concat(this.assetGenerator.id,"/"),this.finalGeneratorAsset());case 19:this.getAssets(0,"",!0);case 20:this.hideAssetModal(),t.next=26;break;case 23:t.prev=23,t.t0=t["catch"](10),this.uRequestErrorHandler(t.t0);case 26:this.submitted=!1;case 27:return t.abrupt("return",!0);case 28:case"end":return t.stop()}}),t,this,[[10,23]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"finalGeneratorAsset",value:function(){return{asset:{id:this.asset.id,identifier:this.asset.identifier,location:this.asset.location,jurisdiction_id:this.generator.jurisdiction.id,asset_category_id:this.assetCategoryId||-1,is_owned_by_generator:!this.updating||this.asset.isOwnedByGenerator,is_supplied_by_generator:!this.updating||this.asset.isSuppliedByGenerator,ordered_date:this.asset.orderedDate,in_service_date:this.asset.inServiceDate,retired_date:this.asset.retiredDate,size:this.asset.size},delivered_date:this.deliveredDate,removed_date:this.assetGenerator.removedDate,comment:this.assetGenerator.comment,generator_id:this.generator.id}}},{key:"removeFilter",value:function(){var t=Ei(n.a.mark((function t(){return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.assetRecords=[],this.filter={},this.getAssets();case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"typeUnit",get:function(){var t=this,e=this.assetCategories,a=e.find((function(e){return e.id===t.assetCategoryId}));return a&&a.unitOfMeasure?a.unitOfMeasure:""}}]),e}(Object(c["c"])(p["a"],d["a"]));Object(o["a"])([Object(u["b"])()],ki.prototype,"participant",void 0),Object(o["a"])([Object(u["b"])()],ki.prototype,"parentParticipant",void 0),Object(o["a"])([Object(u["b"])()],ki.prototype,"generator",void 0),Object(o["a"])([Object(u["d"])("assetCategoryId")],ki.prototype,"cleanErrors",null),Object(o["a"])([Object(u["d"])("filter",{deep:!0})],ki.prototype,"watchFilter",null),Object(o["a"])([Object(u["d"])("deliveredDate")],ki.prototype,"compareDates",null),ki=Object(o["a"])([Object(u["a"])({components:{AddressFormModal:Ft,LoadingIcon:J["a"],CustomTable:ae["a"],Modal:_i,Datepicker:O.a,SelectTag:ii["a"],Tooltip:I["a"]}})],ki);var Di=ki,xi=Di,ji=(a("bd45"),Object(Q["a"])(xi,Za,ti,!1,null,null,null)),Mi=ji.exports;function Ui(t){return Ui="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ui(t)}function $i(t,e,a,i,s,r,n){try{var o=t[r](n),c=o.value}catch(l){return void a(l)}o.done?e(c):Promise.resolve(c).then(i,s)}function Fi(t){return function(){var e=this,a=arguments;return new Promise((function(i,s){var r=t.apply(e,a);function n(t){$i(r,i,s,n,o,"next",t)}function o(t){$i(r,i,s,n,o,"throw",t)}n(void 0)}))}}function Li(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Gi(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Bi(t,e,a){return e&&Gi(t.prototype,e),a&&Gi(t,a),t}function Yi(t,e){return!e||"object"!==Ui(e)&&"function"!==typeof e?qi(t):e}function qi(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Hi(t){return Hi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Hi(t)}function Vi(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qi(t,e)}function Qi(t,e){return Qi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Qi(t,e)}var zi=function(t){function e(){var t;return Li(this,e),t=Yi(this,Hi(e).apply(this,arguments)),t.historyLoading=!1,t.historyRecords=[],t.totalHistoryRecords=0,t}return Vi(e,t),Bi(e,[{key:"mounted",value:function(){var t=Fi(n.a.mark((function t(){return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.getHistoryRecords(),this.setState(1,this.GENERATORFORM_INSTRUC_INTRO);case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"highlightRow",value:function(t){return t.effectiveDate<=this.uCurrentDate()}},{key:"getHistoryRecords",value:function(){var t=Fi(n.a.mark((function t(){var e,a,i;return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.historyLoading=!0,this.historyRecords=[],t.next=4,this.getList("generator-historys","participant=".concat(this.participant.id));case 4:e=t.sent,a=e.data,i=e.count,this.totalHistoryRecords=i,this.formatHistoryRecords(a),this.historyLoading=!1;case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"formatHistoryRecords",value:function(t){for(var e=0;e<t.length;e+=1){var a=t[e];this.historyRecords.push({effectiveDate:a.effectiveDate,status:{value:this.PARTICIPANT_STATUS[a.registrationStatus],pillStyle:this.PARTICIPANT_HISTORY_STYLES[a.registrationStatus]},reason:a.reasonCode?this.PARTICIPANT_STATUS_REASON[a.reasonCode]:ee["a"].tc("none"),isDropOff:a.isDropOff,organization:a.businessName,changedBy:a.changedBy?a.changedBy.emailAddress:ee["a"].tc("unknown"),changeDate:a.changeDate})}}}]),e}(Object(c["c"])(p["a"],d["a"],ze));Object(o["a"])([Object(u["b"])()],zi.prototype,"participant",void 0),Object(o["a"])([Object(u["b"])()],zi.prototype,"parentParticipant",void 0),Object(o["a"])([Object(u["b"])()],zi.prototype,"generator",void 0),zi=Object(o["a"])([Object(u["a"])({components:{ParticipantTemplate:Me,GeneratorForm:Ka["a"],CustomTable:ae["a"],AssetTable:Mi}})],zi);var Wi=zi,Ji=Wi,Xi=(a("bc14"),Object(Q["a"])(Ji,Ja,Xa,!1,null,"2b1396a9",null)),Ki=Xi.exports;function Zi(t){return Zi="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zi(t)}function ts(t,e,a,i,s,r,n){try{var o=t[r](n),c=o.value}catch(l){return void a(l)}o.done?e(c):Promise.resolve(c).then(i,s)}function es(t){return function(){var e=this,a=arguments;return new Promise((function(i,s){var r=t.apply(e,a);function n(t){ts(r,i,s,n,o,"next",t)}function o(t){ts(r,i,s,n,o,"throw",t)}n(void 0)}))}}function as(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function is(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ss(t,e,a){return e&&is(t.prototype,e),a&&is(t,a),t}function rs(t,e){return!e||"object"!==Zi(e)&&"function"!==typeof e?ns(t):e}function ns(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function os(t){return os=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},os(t)}function cs(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ls(t,e)}function ls(t,e){return ls=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},ls(t,e)}var us=function(t){function e(){var t;return as(this,e),t=rs(this,os(e).apply(this,arguments)),t.participant={},t.parentParticipant={},t.participantId=0,t.type=-1,t.business={},t.businessLoading=!0,t}return cs(e,t),ss(e,[{key:"created",value:function(){this.participantId=Number(this.$route.params.participantId)}},{key:"updateRouteParams",value:function(t){this.businessLoading=!0,this.participantId=Number(t.params.participantId),this.getParticipantData()}},{key:"mounted",value:function(){var t=es(n.a.mark((function t(){return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.businessLoading=!0,this.getParticipantData();case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getParticipantData",value:function(){var t=es(n.a.mark((function t(){var e,a,i,s;return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.businessLoading=!0,t.next=3,this.get("participants",this.participantId);case 3:if(this.participant=t.sent,this.type=this.participant.type,this.type===this.PARTICIPANT_TYPES_GROUP){t.next=9;break}return t.next=8,this.get("participants",this.participant.participant);case 8:this.parentParticipant=t.sent;case 9:if(this.type!==this.PARTICIPANT_TYPES_REMITTER){t.next=16;break}return t.next=12,this.getList("remitters","participant=".concat(this.participant.id));case 12:e=t.sent,a=e.data,this.business=a[0],this.businessLoading=!1;case 16:if(this.type!==this.PARTICIPANT_TYPES_GENERATOR){t.next=23;break}return t.next=19,this.getList("generators","participant=".concat(this.participant.id));case 19:i=t.sent,s=i.data,this.business=s[0],this.businessLoading=!1;case 23:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}]),e}(Object(c["c"])(p["a"],d["a"]));Object(o["a"])([Object(u["d"])("$route")],us.prototype,"updateRouteParams",null),us=Object(o["a"])([Object(u["a"])({components:{RemitterBlock:ua,OrganizationBlock:Wa,GeneratorBlock:Ki},computed:Object(l["b"])(["currentUser"])})],us);var ps=us,ds=ps,fs=(a("19be"),Object(Q["a"])(ds,i,s,!1,null,"ac2257aa",null));e["default"]=fs.exports},"44fa":function(t,e,a){},"4a57":function(t,e,a){},"4c00":function(t,e,a){"use strict";var i=a("dcdc"),s=a.n(i);s.a},5266:function(t,e,a){},"533d":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.showModal?a("transition",{attrs:{name:"modal"}},[a("div",{staticClass:"modal-mask"},[a("div",{staticClass:"modal-wrapper modal-dialog"},[a("div",{staticClass:"modal-container modal-content"},[a("div",{staticClass:"modal-header"},[a("p",{staticClass:"modal-title"},[t._v(" "+t._s(t.$t("inviteNewUser"))+" ")])]),a("div",{staticClass:"modal-body"},[t.emailEnabled?t._e():a("p",{staticClass:"text-center form-error-message"},[t._v(" "+t._s(t.$t("emailInvitesDisabled"))+" ")]),a("div",{staticClass:"instruction-text instruction-top",domProps:{innerHTML:t._s(t.uFindInstruction(this.INVITEUSERPAGE_INSTRUC_EMAIL))}}),a("form",{attrs:{autocomplete:"off"}},[t.participantId?a("div",{staticClass:"form-group"},[a("div",{staticClass:"form-check"},[a("b-form-checkbox",{staticClass:"form-check-input",attrs:{type:"checkbox"},model:{value:t.inviteToOrg,callback:function(e){t.inviteToOrg=e},expression:"inviteToOrg"}}),a("label",{staticClass:"form-check-label"},[t._v(" "+t._s(t.$t("inviteToOrg"))+" ")]),a("Tooltip",{attrs:{tooltip:t.uFindInstruction(this.INVITEFORM_INVITE_ORG)}})],1)]):t._e(),t.participantId&&"object"===typeof t.participants&&0!==Object.entries(t.participants).length?a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("businesses")))]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedParticipants,expression:"selectedParticipants"}],staticClass:"custom-select",attrs:{multiple:"",disabled:t.inviteToOrg,name:"businessName"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selectedParticipants=e.target.multiple?a:a[0]}}},t._l(t.participants,(function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(" "+t._s(e.registrationNo)+" - "+t._s(e.businessName)+" ")])})),0)]):t._e(),"object"===typeof t.participants&&0===Object.entries(t.participants).length?a("div",[t._v(" "+t._s(t.$t("emptyState.remitters"))+" ")]):t._e(),t.selectionRequired?a("div",{staticClass:"form-error-message--permissions"},[t._v(" "+t._s(t.$t("mustSelectParticipants"))+" ")]):t._e(),a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("email")))]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"},{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control",attrs:{disabled:t.submitted,type:"email",name:"Email",placeholder:t.$t("email")},domProps:{value:t.email},on:{keydown:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.preventDefault()},input:function(e){e.target.composing||(t.email=e.target.value)}}}),a("span",{staticClass:"form-error-message"},[t._v(t._s(t.errors.first("Email")))]),t.existingUser?a("span",{staticClass:"form-error-message"},[t._v(" "+t._s(t.$t("existingUser"))+" ")]):t._e()])])]),a("div",{staticClass:"modal-footer"},[t.submitted&&t.checkingUser?a("LoadingIcon",{attrs:{buttonLoader:!0}}):t._e(),a("div",{staticClass:"modal-footer-success-message"},[t._v(" "+t._s(t.successMessage)+" ")]),t.closeButtonEnabled?a("button",{staticClass:"btn primary-action-btn",on:{click:function(e){e.preventDefault(),t.$emit("hideModal"),t.closeButtonEnabled=!1,t.submitted=!1,t.email="",t.successMessage=""}}},[t._v(" "+t._s(t.$t("close"))+" ")]):t._e(),t.closeButtonEnabled?t._e():a("button",{staticClass:"btn secondary-action-btn",on:{click:function(e){return e.preventDefault(),t.$emit("hideModal")}}},[t._v(" "+t._s(t.$t("cancel"))+" ")]),!t.uIsMasterUser()||t.participantId&&!t.uCanModifyParticipantData(t.participantId)||t.closeButtonEnabled?t._e():a("button",{staticClass:"btn primary-action-btn",attrs:{disabled:t.submitted||t.errors.any(),type:"submit"},on:{click:function(e){return e.preventDefault(),t.checkIsParticipantUser()}}},[t._v(" "+t._s(t.$t("submit"))+" ")])],1)])])])]):t._e(),a("ConfirmationModal",{attrs:{showModal:t.showConfirmationModal},on:{ok:function(e){return t.submitForm()},cancel:t.cancelModal}},[a("h3",{attrs:{slot:"header"},slot:"header"},[t._v(t._s(t.$t("inviteUser")))]),a("div",{attrs:{slot:"body"},slot:"body"},[t._v(" "+t._s(t.$t("inviteUserConfirmation1"))+" "),t._v(" "+t._s(t.permissions.length>=1?t.uSelectGroupNames(t.permissions).map((function(e){return t.uShowGroupName(e.name)})).join(", "):t.$t("noRoles"))+" "),a("br"),a("br"),t._v(" "+t._s(t.$t("inviteUserConfirmation2"))+" ")])])],1)},s=[],r=a("a34a"),n=a.n(r),o=a("9ab4"),c=a("2fe1"),l=a("60a3"),u=a("bc3a"),p=a.n(u),d=a("2f62"),f=a("2e75"),m=a("0f7b"),v=a("1f24"),h=a("c5af"),_=a("7358");function b(t){return b="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b(t)}function y(t,e,a,i,s,r,n){try{var o=t[r](n),c=o.value}catch(l){return void a(l)}o.done?e(c):Promise.resolve(c).then(i,s)}function g(t){return function(){var e=this,a=arguments;return new Promise((function(i,s){var r=t.apply(e,a);function n(t){y(r,i,s,n,o,"next",t)}function o(t){y(r,i,s,n,o,"throw",t)}n(void 0)}))}}function C(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function T(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function E(t,e,a){return e&&T(t.prototype,e),a&&T(t,a),t}function O(t,e){return!e||"object"!==b(e)&&"function"!==typeof e?R(t):e}function R(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function I(t){return I=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},I(t)}function P(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&S(t,e)}function S(t,e){return S=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},S(t,e)}var N=function(t){function e(){var t;return C(this,e),t=O(this,I(e).apply(this,arguments)),t.submitted=!1,t.existingUser=!1,t.existingParticipantUser=!1,t.toBeInvitedUser={},t.checkingUser=!1,t.showConfirmationModal=!1,t.participantId=0,t.inviteToOrg=!1,t.selectedParticipants=[],t.email="",t.successMessage="",t.closeButtonEnabled=!1,t.selectionRequired=!1,t.permissions="",t}return P(e,t),E(e,[{key:"setParticipantId",value:function(t){t&&t.id&&(this.participantId=t.id)}},{key:"mounted",value:function(){this.setParticipantId(this.participant)}},{key:"checkIsParticipantUser",value:function(){var t=g(n.a.mark((function t(){var e,a;return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.submitted=!0,this.checkingUser=!0,t.next=4,this.getList("custom-users","email_address=".concat(this.email));case 4:e=t.sent,a=e.data,this.toBeInvitedUser=a[0],this.toBeInvitedUser&&this.toBeInvitedUser.participantUsers.length>0&&(this.existingParticipantUser=!0),this.checkingUser=!1,this.checkExistingParticipantUser();case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"openConfirmationModal",value:function(t){this.showConfirmationModal=!0,this.permissions=t}},{key:"cancelModal",value:function(){this.showConfirmationModal=!1}},{key:"checkExistingParticipantUser",value:function(){this.participantId&&this.existingParticipantUser?(this.openConfirmationModal(this.toBeInvitedUser.groups),this.existingParticipantUser=!1):this.submitForm()}},{key:"submitForm",value:function(){var t=g(n.a.mark((function t(){var e,a,i;return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.showConfirmationModal=!1,this.selectionRequired=!1,this.existingUser=!1,t.next=5,this.$validator.validate();case 5:if(e=t.sent,a="invite_participant_user",this.agency&&(a="invite_agency_user"),this.agency||this.inviteToOrg||0!==this.selectedParticipants.length){t.next=13;break}this.submitted=!1,this.selectionRequired=!0,t.next=31;break;case 13:if(e){t.next=17;break}this.submitted=!1,t.next=31;break;case 17:return t.prev=17,t.next=20,p.a.post("".concat("http://localhost:8000/api","/auth/").concat(a,"/"),{email:this.email,participants:this.inviteToOrg?[this.participantId]:this.selectedParticipants});case 20:i=t.sent,this.successMessage=i.data.message,this.closeButtonEnabled=!0,this.$emit("updateUsers"),t.next=31;break;case 26:t.prev=26,t.t0=t["catch"](17),this.submitted=!1,this.uRequestErrorHandler(t.t0),400===t.t0.response.status&&(this.existingUser=!0);case 31:case"end":return t.stop()}}),t,this,[[17,26]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"emailEnabled",get:function(){return this.uConfig(this.EMAIL_ENABLED)}}]),e}(Object(c["c"])(f["a"],_["a"]));Object(o["a"])([Object(l["b"])()],N.prototype,"agency",void 0),Object(o["a"])([Object(l["b"])()],N.prototype,"participant",void 0),Object(o["a"])([Object(l["b"])()],N.prototype,"participants",void 0),Object(o["a"])([Object(l["b"])()],N.prototype,"showModal",void 0),Object(o["a"])([Object(l["d"])("participant")],N.prototype,"setParticipantId",null),N=Object(o["a"])([Object(l["a"])({components:{ConfirmationModal:m["a"],Tooltip:v["a"],LoadingIcon:h["a"]},computed:Object(d["b"])(["currentUser"])})],N);var w=N,A=w,k=(a("e286"),a("2877")),D=Object(k["a"])(A,i,s,!1,null,"6d799f96",null);e["a"]=D.exports},"55ed":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("label",[t._v(t._s(t.$t(t.$attrs.name||t.name)))]),a("select",t._b({staticClass:"custom-select",on:{input:function(e){return t.triggerOnInputEvent(e.target.value)}}},"select",Object.assign({},{value:t.value},t.$attrs),!1),[a("option",{attrs:{disabled:"",value:""},domProps:{selected:!t.value}},[t._v(" "+t._s(t.$t(t.selectLabel))+" ")]),t._l(t.listOfObjects,(function(e){return a("option",{key:e.id,domProps:{value:e.id,selected:e.id===t.value}},[t._v(" "+t._s(t.multilang?e.name[t.uLangFromLocale(t.$i18n.locale)]:e.name)+" ")])}))],2)])},s=[],r=a("9ab4"),n=a("2ef0"),o=a.n(n),c=a("60a3"),l=a("2fe1"),u=a("2e75");function p(t){return p="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function m(t,e,a){return e&&f(t.prototype,e),a&&f(t,a),t}function v(t,e){return!e||"object"!==p(e)&&"function"!==typeof e?h(t):e}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _(t){return _=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},_(t)}function b(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}function y(t,e){return y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},y(t,e)}var g=function(t){function e(){var t;return d(this,e),t=v(this,_(e).apply(this,arguments)),t.selectLabel="",t}return b(e,t),m(e,[{key:"cleanErrors",value:function(){this.$parent.$validator.errors.clear()}},{key:"mounted",value:function(){(this.$attrs.name||this.name)&&(this.selectLabel=o.a.camelCase("select_".concat(this.$attrs.name||this.name)))}},{key:"triggerOnInputEvent",value:function(t){this.$emit("input",t)}}]),e}(Object(l["c"])(u["a"]));Object(r["a"])([Object(c["b"])()],g.prototype,"value",void 0),Object(r["a"])([Object(c["b"])()],g.prototype,"label",void 0),Object(r["a"])([Object(c["b"])()],g.prototype,"name",void 0),Object(r["a"])([Object(c["b"])()],g.prototype,"listOfObjects",void 0),Object(r["a"])([Object(c["b"])()],g.prototype,"multilang",void 0),Object(r["a"])([Object(c["d"])("value")],g.prototype,"cleanErrors",null),g=Object(r["a"])([Object(c["a"])({components:{}})],g);var C=g,T=C,E=(a("be0d"),a("2877")),O=Object(E["a"])(T,i,s,!1,null,"a0d4737c",null);e["a"]=O.exports},"5ae9":function(t,e,a){"use strict";var i=a("b4e6"),s=a.n(i);s.a},"5f1d":function(t,e,a){},6578:function(t,e,a){"use strict";var i=a("bcf1"),s=a.n(i);s.a},"6eea":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"form-header"},[t.updating?t._e():a("p",{staticClass:"form-title"},[t._v(t._s(t.$t("createOrganization")))]),t.updating?a("p",{staticClass:"form-title"},[t._v(t._s(t.$t("updateOrganization")))]):t._e(),a("div",{staticClass:"flex-spacer"}),t.participant&&t.currentUser.agencyUser&&(t.uHasGroup(t.USER_GROUP_AGENCY_MASTER)||t.uHasGroup(t.USER_GROUP_AGENCY_FILING))&&t.fileAvailable?a("router-link",{staticClass:"btn primary-action-btn",attrs:{tag:"button",to:{name:"filingStart",params:{menuState:"1",participantId:Number(t.participant.id)}}}},[t._v(" "+t._s(t.$t("fileAsVerb"))+" ")]):t._e(),t.uIsClaimsAppEnabled()&&t.participant&&t.updating&&t.claimAvailable?a("router-link",{staticClass:"btn primary-action-btn",attrs:{tag:"button",to:{name:"claimsStart",params:{menuState:"1",participantId:Number(t.participant.id)}}}},[t._v(" "+t._s(t.$t("claim"))+" ")]):t._e()],1),a("form",{staticClass:"padded-form"},[t.uIsParticipantUser()&&!t.uConfig(t.ONLY_AGENCY_UPDATES_BUSINESS_NAME)||!t.uIsParticipantUser()?a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("organizationName"))+" "),a("Tooltip",{attrs:{tooltip:t.uFindInstruction(this.PARTICIPANTFORM_INFOTIP_BUSI_NAME)}})],1),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:100",expression:"'required|max:100'"},{name:"model",rawName:"v-model",value:t.businessName,expression:"businessName"}],staticClass:"form-control",attrs:{type:"text",name:"Organization Name",placeholder:t.$t("organizationName")},domProps:{value:t.businessName},on:{input:function(e){e.target.composing||(t.businessName=e.target.value)}}}),a("span",{staticClass:"form-error-message"},[t._v(t._s(t.errors.first("Organization Name")))])]):t._e(),t.uIsParticipantUser()&&t.uConfig(t.ONLY_AGENCY_UPDATES_BUSINESS_NAME)?a("div",{staticClass:"detail-list"},[a("p",[a("span",{staticClass:"list-label"},[t._v(t._s(t.$t("organizationName"))+":")]),t._v(" "+t._s(t.businessName)+" "),a("Tooltip",{attrs:{tooltip:t.uFindInstruction(this.PARTICIPANTFORM_INFOTIP_BUSI_NAME)}})],1)]):t._e(),!t.uConfig(t.ONLY_AGENCY_UPDATES_BUSINESS_NAME)||t.currentUser.agencyUser?a("div",{staticClass:"form-actions"},[a("button",{staticClass:"btn primary-action-btn",attrs:{disabled:t.submitted||t.errors.any()||t.uIsParticipantUser()&&t.uIsMasterUser()||!t.uIsMasterUser()&&t.currentUser.agencyUser||t.updating&&!t.uCanModifyParticipantData(t.participant.id),type:"submit"},on:{click:function(e){return e.preventDefault(),t.submitForm()}}},[t._v(" "+t._s(t.updating?t.$t("update"):t.$t("create"))+" ")])]):t._e(),t.uIsMasterUser()||!t.uIsParticipantUser()&&!t.currentUser.agencyUser||t.uConfig(t.ONLY_AGENCY_UPDATES_BUSINESS_NAME)&&!t.currentUser.agencyUser?t._e():a("div",{staticClass:"form-error-message--permissions"},[t._v(" "+t._s(t.$t("higherPermissionsRequired"))+" ")])])])},s=[],r=a("a34a"),n=a.n(r),o=a("9ab4"),c=a("2fe1"),l=a("60a3"),u=a("bc3a"),p=a.n(u),d=a("1f24"),f=a("2e75"),m=a("7358");function v(t){return v="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function h(t,e,a,i,s,r,n){try{var o=t[r](n),c=o.value}catch(l){return void a(l)}o.done?e(c):Promise.resolve(c).then(i,s)}function _(t){return function(){var e=this,a=arguments;return new Promise((function(i,s){var r=t.apply(e,a);function n(t){h(r,i,s,n,o,"next",t)}function o(t){h(r,i,s,n,o,"throw",t)}n(void 0)}))}}function b(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function y(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function g(t,e,a){return e&&y(t.prototype,e),a&&y(t,a),t}function C(t,e){return!e||"object"!==v(e)&&"function"!==typeof e?T(t):e}function T(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function E(t){return E=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},E(t)}function O(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&R(t,e)}function R(t,e){return R=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},R(t,e)}var I=function(t){function e(){var t;return b(this,e),t=C(this,E(e).apply(this,arguments)),t.submitted=!1,t.groups=[],t.businessName="",t.fileAvailable=!1,t.claimAvailable=!1,t}return O(e,t),g(e,[{key:"mounted",value:function(){var t=_(n.a.mark((function t(){return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.participant&&(this.businessName=this.participant.businessName),this.getMasterGroup(),this.checkOrgFunctions(this.participants);case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"checkOrgFunctions",value:function(t){for(var e=0;e<t.length;e+=1){var a=t[e].type;a===this.PARTICIPANT_TYPES_REMITTER?this.fileAvailable=!0:a!==this.PARTICIPANT_TYPES_GENERATOR&&a!==this.PARTICIPANT_TYPES_PROCESSOR&&a!==this.PARTICIPANT_TYPES_MANUFACTURER&&a!==this.PARTICIPANT_TYPES_CUSTOMER||(this.claimAvailable=!0)}}},{key:"getMasterGroup",value:function(){var t=_(n.a.mark((function t(){var e,a,i,s;return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getList("groups","name=".concat(this.USER_GROUP_PARTICIPANT_MASTER));case 2:for(e=t.sent,a=e.data,i=e.count,s=0;s<i;s+=1)this.groups.push(a[s].id);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"submitForm",value:function(){var t=_(n.a.mark((function t(){var e,a,i,s=this;return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.submitted=!0,t.next=3,this.$validator.validate();case 3:if(e=t.sent,e){t.next=8;break}this.submitted=!1,t.next=34;break;case 8:if(a={business_name:this.businessName},this.updating){t.next=33;break}if(t.prev=10,this.agencyNewOrg){t.next=14;break}return t.next=14,p.a.patch("".concat("http://localhost:8000/api","/custom-users/").concat(this.user.id,"/"),{group_ids:this.groups});case 14:return t.next=16,p.a.post("".concat("http://localhost:8000/api","/participants/"),a);case 16:if(i=t.sent,this.agencyNewOrg){t.next=24;break}return t.next=20,p.a.patch("".concat("http://localhost:8000/api","/contacts/").concat(this.user.contactId,"/"),{participant_id:i.data.id});case 20:return t.next=22,p.a.post("".concat("http://localhost:8000/api","/participant-users/"),{participant_id:i.data.id,user_id:this.user.id});case 22:this.$router.go(0),this.$router.push({name:"home"});case 24:this.agencyNewOrg&&this.$router.push({name:"participant",params:{participantId:String(i.data.id),parentParticipantId:String(i.data.id)}}),t.next=31;break;case 27:t.prev=27,t.t0=t["catch"](10),this.submitted=!1,this.uRequestErrorHandler(t.t0);case 31:t.next=34;break;case 33:p.a.put("".concat("http://localhost:8000/api","/participants/").concat(this.participant.id,"/"),a).then((function(){s.$emit("updateBusinessName")})).catch((function(t){s.uRequestErrorHandler(t)})).finally((function(){s.submitted=!1}));case 34:case"end":return t.stop()}}),t,this,[[10,27]])})));function e(){return t.apply(this,arguments)}return e}()}]),e}(Object(c["c"])(f["a"],m["a"]));Object(o["a"])([Object(l["b"])()],I.prototype,"user",void 0),Object(o["a"])([Object(l["b"])()],I.prototype,"participant",void 0),Object(o["a"])([Object(l["b"])()],I.prototype,"updating",void 0),Object(o["a"])([Object(l["b"])()],I.prototype,"agencyNewOrg",void 0),Object(o["a"])([Object(l["b"])()],I.prototype,"participants",void 0),Object(o["a"])([Object(l["d"])("participants")],I.prototype,"checkOrgFunctions",null),I=Object(o["a"])([Object(l["a"])({components:{Tooltip:d["a"]}})],I);var P=I,S=P,N=(a("5ae9"),a("2877")),w=Object(N["a"])(S,i,s,!1,null,"d3612298",null);e["a"]=w.exports},"717e":function(t,e,a){},"76c8":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.remitterLoading?a("div",{staticClass:"table-loading"},[a("LoadingIcon")],1):a("div",[a("div",{staticClass:"form-header"},[t.updating?a("p",{staticClass:"form-title"},[t._v(" "+t._s(t.$t("updateRemitter"))+" ")]):t._e(),t.updating?t._e():a("p",{staticClass:"form-title"},[t._v(" "+t._s(t.$t("createRemitterFor"))+" "+t._s(t.parentParticipant.businessName)+" ")]),a("div",{staticClass:"flex-spacer"}),t.remitterReady&&t.updating?a("div",[t.currentUser.agencyUser&&(t.uHasGroup(t.USER_GROUP_AGENCY_MASTER)||t.uHasGroup(t.USER_GROUP_AGENCY_FILING))||t.uIsParticipantUser()?a("router-link",{staticClass:"btn primary-action-btn",attrs:{tag:"button",to:{name:"filingStart",params:{menuState:"1",participantId:Number(t.participant.id)}}}},[t._v(" "+t._s(t.$t("fileAsVerb"))+" ")]):t._e()],1):t._e()]),a("div",{staticClass:"form-two-sides"},[a("div",{staticClass:"form-left-side"},[a("form",{staticClass:"padded-form"},[t.status&&t.uBusinessHasOperatingStatus(t.status)&&t.uCanSeeRegistrationNo(t.status)?a("div",{staticClass:"detail-list"},[a("p",[a("span",{staticClass:"list-label"},[t._v(t._s(t.$t("registrationNumber"))+":")]),t._v(" "+t._s(t.uFormatRegistrationNo(t.remitter))+" ")])]):t._e(),t.updating&&t.uIsParticipantUser()&&t.uConfig(t.ONLY_AGENCY_UPDATES_BUSINESS_NAME)?t._e():a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("businessName"))+" "),a("Tooltip",{attrs:{tooltip:t.uFindInstruction(this.REMITTERFORM_INFOTIP_BUSI_NAME)}})],1),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:100",expression:"'required|max:100'"},{name:"model",rawName:"v-model",value:t.businessName,expression:"businessName"}],staticClass:"form-control",attrs:{type:"text",name:"Business Name"},domProps:{value:t.businessName},on:{input:function(e){e.target.composing||(t.businessName=e.target.value)}}}),a("span",{staticClass:"form-error-message"},[t._v(t._s(t.errors.first("Business Name")))])]),t.updating&&t.uIsParticipantUser()&&t.uConfig(t.ONLY_AGENCY_UPDATES_BUSINESS_NAME)?a("div",{staticClass:"detail-list"},[a("p",[a("span",{staticClass:"list-label"},[t._v(t._s(t.$t("businessName"))+":")]),t._v(" "+t._s(t.businessName)+" "),a("Tooltip",{attrs:{tooltip:t.uFindInstruction(this.REMITTERFORM_INFOTIP_BUSI_NAME)}})],1)]):t._e(),t.updating&&t.uIsParticipantUser()&&t.uConfig(t.ONLY_AGENCY_UPDATES_REMITTER_TYPE)?t._e():a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("type")))]),a("b-form-select",{directives:[{name:"validate",rawName:"v-validate",value:"required|min_value:0",expression:"'required|min_value:0'"}],staticClass:"custom-select",attrs:{options:t.remitterTypes,name:"remitterType"},scopedSlots:t._u([{key:"first",fn:function(){return[a("option",{attrs:{disabled:""},domProps:{value:-1}},[t._v(t._s(t.$t("selectRemitterType")))])]},proxy:!0}],null,!1,187974898),model:{value:t.type,callback:function(e){t.type=e},expression:"type"}}),a("span",{staticClass:"form-error-message"},[t._v(t._s(t.errors.first("remitterType")))])],1),t.updating&&t.uIsParticipantUser()&&t.uConfig(t.ONLY_AGENCY_UPDATES_REMITTER_TYPE)?a("div",{staticClass:"detail-list"},[a("p",[a("span",{staticClass:"list-label"},[t._v(t._s(t.$t("type"))+":")]),t._v(" "+t._s(t.REMITTER_TYPES_MASTER[t.type])+" ")])]):t._e(),!t.updating||t.currentUser.agencyUser?a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("legalName"))+" "),a("Tooltip",{attrs:{tooltip:t.uFindInstruction(this.REMITTERFORM_INFOTIP_LEGALNAME)}})],1),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:100",expression:"'required|max:100'"},{name:"model",rawName:"v-model",value:t.legalName,expression:"legalName"}],staticClass:"form-control",attrs:{type:"text",name:"Legal Name"},domProps:{value:t.legalName},on:{input:function(e){e.target.composing||(t.legalName=e.target.value)}}}),a("span",{staticClass:"form-error-message"},[t._v(t._s(t.errors.first("Legal Name")))])]):t._e(),t.updating&&t.uIsParticipantUser()?a("div",{staticClass:"detail-list"},[a("p",[a("span",{staticClass:"list-label"},[t._v(t._s(t.$t("legalName"))+":")]),t._v(" "+t._s(t.legalName)+" "),a("Tooltip",{attrs:{tooltip:t.uFindInstruction(this.REMITTERFORM_INFOTIP_LEGALNAME)}})],1)]):t._e(),t.currentUser.agencyUser?a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("registrationDate"))+" "),a("Tooltip",{attrs:{tooltip:t.uFindInstruction(this.REMITTERFORM_INFOTIP_REGDATE)}})],1),a("Datepicker",{directives:[{name:"validate",rawName:"v-validate",value:t.remitter.status!==t.PARTICIPANT_STATUS_NEW&&t.remitter.status!==t.PARTICIPANT_STATUS_IN_PROGRESS&&t.remitter.status?"required":"",expression:"\n              (remitter.status === PARTICIPANT_STATUS_NEW\n                || remitter.status === PARTICIPANT_STATUS_IN_PROGRESS\n                || !remitter.status) ? '' : 'required'"}],attrs:{lang:"en","value-type":"format","data-vv-name":"Registration Date",type:"text",name:"Registration Date",placeholder:t.$t("dateFormat")},model:{value:t.regDate,callback:function(e){t.regDate=e},expression:"regDate"}}),a("span",{staticClass:"form-error-message"},[t._v(t._s(t.errors.first("Registration Date")))])],1):t._e(),!t.updating||t.currentUser.agencyUser?a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("operationsStartDate"))+" "),a("Tooltip",{attrs:{tooltip:t.uFindInstruction(this.REMITTERFORM_INFOTIP_STARTDATE)}})],1),a("Datepicker",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{lang:"en","value-type":"format","data-vv-name":"Operations Start Date",type:"text",name:"Operations Start Date",placeholder:t.$t("dateFormat")},on:{change:function(e){t.opsStartDateChanged=!0}},model:{value:t.operationsStartDate,callback:function(e){t.operationsStartDate=e},expression:"operationsStartDate"}}),a("span",{staticClass:"form-error-message"},[t._v(t._s(t.errors.first("Operations Start Date")))])],1):t._e(),t.updating&&t.currentUser.agencyUser?a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("operationsEndDate"))+" "),a("Tooltip",{attrs:{tooltip:t.uFindInstruction(this.REMITTERFORM_INFOTIP_ENDDATE)}})],1),a("Datepicker",{attrs:{lang:"en","value-type":"format",type:"text","data-vv-name":"Operations End Date","not-before":t.uStringDatetoDate(t.operationsStartDate),name:"Operations End Date",placeholder:t.$t("dateFormat")},model:{value:t.operationsEndDate,callback:function(e){t.operationsEndDate=e},expression:"operationsEndDate"}})],1):t._e(),t.updating?t._e():a("div",{staticClass:"form-group"},[a("div",{staticClass:"form-check"},[a("b-form-checkbox",{staticClass:"form-check-input",attrs:{type:"checkbox"},model:{value:t.isRegularFiler,callback:function(e){t.isRegularFiler=e},expression:"isRegularFiler"}}),a("label",{staticClass:"form-check-label"},[t._v(t._s(t.$t("isRegularFiler")))]),a("Tooltip",{attrs:{tooltip:t.uFindInstruction(this.REMITTERFORM_INFOTIP_REGULAR_FILER)}})],1)]),t.updating?t._e():a("div",{staticClass:"form-group"},[a("div",{staticClass:"form-check"},[a("b-form-checkbox",{staticClass:"form-check-input",attrs:{type:"checkbox"},model:{value:t.isSpecialFiler,callback:function(e){t.isSpecialFiler=e},expression:"isSpecialFiler"}}),a("label",{staticClass:"form-check-label"},[t._v(" "+t._s(t.uFindInstruction(this.DISPLAY_SPECIAL_FILER))+" ")]),a("Tooltip",{attrs:{tooltip:t.uFindInstruction(this.REMITTERFORM_INFOTIP_SPECIAL_FILER)}})],1)]),t.updating?t._e():a("div",{staticClass:"form-group"},[a("div",{staticClass:"form-check"},[a("b-form-checkbox",{staticClass:"form-check-input",attrs:{type:"checkbox"},model:{value:t.returnToRemitter,callback:function(e){t.returnToRemitter=e},expression:"returnToRemitter"}}),a("label",{staticClass:"form-check-label"},[t._v(" "+t._s(t.uFindInstruction(this.DISPLAY_RETURN_TO_REMITTER))+" ")]),a("Tooltip",{attrs:{tooltip:t.uFindInstruction(this.REMITTERFORM_INFOTIP_ATTRIBUTEFLAG3)}})],1)]),t.currentUser.agencyUser?a("div",{staticClass:"form-group"},[a("div",{staticClass:"form-check"},[a("b-form-checkbox",{staticClass:"form-check-input",attrs:{type:"checkbox"},model:{value:t.isFilingInAdvance,callback:function(e){t.isFilingInAdvance=e},expression:"isFilingInAdvance"}}),a("label",{staticClass:"form-check-label"},[t._v(" "+t._s(t.$t("constants.generateFilingsInAdvance"))+" ")]),a("Tooltip",{attrs:{tooltip:t.uFindInstruction(this.REMITTERFORM_INFOTIP_ADVANCE_FILING)}})],1)]):t._e(),a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("businessLink"))+" "),a("Tooltip",{attrs:{tooltip:t.uFindInstruction(this.REMITTERFORM_INFOTIP_BUSI_LINK)}})],1),a("input",{directives:[{name:"model",rawName:"v-model",value:t.businessLink,expression:"businessLink"}],staticClass:"form-control",attrs:{type:"text",name:"Business Link"},domProps:{value:t.businessLink},on:{input:function(e){e.target.composing||(t.businessLink=e.target.value)}}})]),t.updating&&t.remitter?a("div",{staticClass:"detail-list"},[t.uIsParticipantUser()?a("p",[a("span",{staticClass:"list-label"},[t._v(t._s(t.$t("operationsStartDate"))+":")]),t._v(" "+t._s(t.remitter.operationsStartDate)+" "),a("Tooltip",{attrs:{tooltip:t.uFindInstruction(this.REMITTERFORM_INFOTIP_STARTDATE)}})],1):t._e(),t.operationsEndDate&&t.uIsParticipantUser()?a("p",[a("span",{staticClass:"list-label"},[t._v(t._s(t.$t("operationsEndDate"))+":")]),t._v(" "+t._s(t.remitter.operationsEndDate)+" "),a("Tooltip",{attrs:{tooltip:t.uFindInstruction(this.REMITTERFORM_INFOTIP_ENDDATE)}})],1):t._e(),t.uIsParticipantUser()?a("p",[a("span",{staticClass:"list-label"},[t._v(t._s(t.$t("constants.generateFilingsInAdvance"))+":")]),t._v(" "+t._s(t.remitter.isFilingInAdvance)+" ")]):t._e(),t.uIsParticipantUser()?a("p",[a("span",{staticClass:"list-label"},[t._v(t._s(t.$t("registrationDate"))+":")]),t._v(" "+t._s(t.regDate)+" ")]):t._e(),a("p",[a("span",{staticClass:"list-label"},[t._v(" "+t._s(t.uFindInstruction(this.DISPLAY_JURISDICTION))+": ")]),t.jurisdiction&&t.jurisdiction.name[t.uLangFromLocale(t.$i18n.locale)]?a("span",[t._v(" "+t._s(t.jurisdiction.name[t.uLangFromLocale(t.$i18n.locale)])+" ")]):t._e()]),a("p",[a("span",{staticClass:"list-label"},[t._v(t._s(t.$t("agency"))+":")]),t._v(" "+t._s(t.agencyName[t.uLangFromLocale(t.$i18n.locale)])+" ")]),t.remittanceAppEnabled?a("p",[a("span",{staticClass:"list-label"},[t._v(t._s(t.$t("remitterBalance"))+":")]),t._v(" "+t._s(t.uFormatPrice(t.remitter.accountBalance))+" ")]):t._e()]):t._e(),t.updating?t._e():a("div",[t.currentUser.agencyUser&&1===t.jurisdictions.length?t._e():a("div",{staticClass:"form-group"},[a("label",[t._v(" "+t._s(t.uFindInstruction(this.DISPLAY_JURISDICTION))+" ")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.jurisdiction,expression:"jurisdiction"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"custom-select",attrs:{name:"jurisdiction"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.jurisdiction=e.target.multiple?a:a[0]},function(e){return t.getAgencyName()}]}},[a("option",{attrs:{disabled:"",value:""}},[t._v(" "+t._s(t.uFindInstruction(this.DISPLAY_SELECT_JURISDICTION))+" ")]),t._l(t.jurisdictions,(function(e){return a("option",{key:e.id,domProps:{value:e}},[t._v(" "+t._s(e.name[t.uLangFromLocale(t.$i18n.locale)])+" ")])}))],2),a("span",{staticClass:"form-error-message"},[t._v(t._s(t.errors.first("jurisdiction")))])]),t.currentUser.agencyUser&&1===t.jurisdictions.length?a("div",{staticClass:"form-group"},[a("label",[t._v(" "+t._s(t.uFindInstruction(this.DISPLAY_JURISDICTION))+" ")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.jurisdiction,expression:"jurisdiction"}],staticClass:"custom-select",attrs:{name:"jurisdiction"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.jurisdiction=e.target.multiple?a:a[0]}}},[a("option",{key:t.jurisdictions[0].id,domProps:{value:t.jurisdictions[0]}},[t._v(" "+t._s(t.jurisdictions[0].name[t.uLangFromLocale(t.$i18n.locale)])+" ")])]),a("span",{staticClass:"form-error-message"},[t._v(t._s(t.errors.first("jurisdiction")))])]):t._e(),a("div",{staticClass:"detail-list"},[a("p",[a("span",{staticClass:"list-label"},[t._v(t._s(t.$t("agency"))+":")]),t._v(" "+t._s(t.agencyName[t.uLangFromLocale(t.$i18n.locale)]))])])]),a("div",{staticClass:"form-actions"},[t.uShowRemitterFormButtons()?a("button",{staticClass:"btn primary-action-btn",attrs:{disabled:t.uDisableRemitterDataForm(t.submitted,t.errors.any(),t.status,t.participant?t.participant.id:null,t.updating)||t.updating&&!t.remitterReady,type:"submit"},on:{click:function(e){return e.preventDefault(),t.checkStartDate()}}},[t._v(" "+t._s(t.updating?t.$t("update"):t.$t("create"))+" ")]):t._e(),t.uShowRemitterFormButtons()?a("router-link",{staticClass:"btn secondary-action-btn",attrs:{tag:"button",to:{name:"participants"}}},[t._v(" "+t._s(t.$t("cancel"))+" ")]):t._e(),null!==t.remitter.registrationNo||!t.currentUser.agencyUser||t.remitter.status!==t.PARTICIPANT_STATUS_IN_PROGRESS&&t.remitter.status!==t.PARTICIPANT_STATUS_NEW?t._e():a("button",{staticClass:"btn secondary-action-btn",attrs:{disabled:!t.uHasGroup(t.USER_GROUP_AGENCY_MASTER)},on:{click:function(e){return e.preventDefault(),t.openConfirmDeleteRemitter()}}},[t._v(" "+t._s(t.$t("delete"))+" ")])],1),t.uIsMasterUser()?t._e():a("div",{staticClass:"form-error-message--permissions"},[t._v(" "+t._s(t.$t("higherPermissionsRequired"))+" ")])])]),a("div",{staticClass:"form-right-side"},[t.updating&&t.remitter?a("div",{staticClass:"detail-list detail-list-padded",style:{marginBottom:"24px"}},[a("p",{staticClass:"detail-list-title"},[t._v(" "+t._s(t.$t("currentHistoryValues"))+" "),t.currentUser.agencyUser?a("button",{staticClass:"btn secondary-action-btn",style:{float:"right"},attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.openEffectiveDateForm()}}},[t._v(" "+t._s(t.$t("update"))+" ")]):t._e()]),a("p",[a("span",{staticClass:"list-label"},[t._v(t._s(t.$t("isRegularFiler"))+":")]),t._v(" "+t._s(t.remitter.isRegularFiler)+" "),a("Tooltip",{attrs:{tooltip:t.uFindInstruction(this.REMITTERFORM_INFOTIP_REGULAR_FILER)}})],1),t.uConfig(t.SPECIAL_FILER_ENABLED)?a("p",[a("span",{staticClass:"list-label"},[t._v(" "+t._s(t.uFindInstruction(this.DISPLAY_SPECIAL_FILER))+": ")]),t._v(" "+t._s(t.remitter.isSpecialFiler)+" "),a("Tooltip",{attrs:{tooltip:t.uFindInstruction(this.REMITTERFORM_INFOTIP_SPECIAL_FILER)}})],1):t._e(),a("p",[a("span",{staticClass:"list-label"},[t._v(" "+t._s(t.uFindInstruction(this.DISPLAY_RETURN_TO_REMITTER))+": ")]),t._v(" "+t._s(t.remitter.returnToRemitter)+" "),a("Tooltip",{attrs:{tooltip:t.uFindInstruction(this.REMITTERFORM_INFOTIP_ATTRIBUTEFLAG3)}})],1),t.currentUser.agencyUser||t.remitter.isTaxExempt?a("p",[a("span",{staticClass:"list-label"},[t._v(t._s(t.$t("taxExempt"))+":")]),t._v(" "+t._s(t.remitter.isTaxExempt)+" "),a("Tooltip",{attrs:{tooltip:t.uFindInstruction(this.REMITTERFORM_INFOTIP_TAX_EXEMPT)}})],1):t._e(),a("p",[a("span",{staticClass:"list-label"},[t._v(t._s(t.$t("filingFrequency"))+":")]),t._v(" "+t._s(t.FILING_FREQUENCIES_MASTER[t.remitter.filingFrequency])+" ")]),a("p",[a("span",{staticClass:"list-label"},[t._v(t._s(t.$t("status"))+":")]),t._v(" "+t._s(t.PARTICIPANT_STATUS[t.status])+" ")]),a("p",[a("span",{staticClass:"list-label"},[t._v(t._s(t.$t("reasonCode"))+":")]),t._v(" "+t._s(t.remitter.reasonCode?t.PARTICIPANT_STATUS_REASON[t.remitter.reasonCode]:t.$t("none"))+" ")])]):t._e(),t.updating&&t.remitter?a("div",{staticClass:"detail-list detail-list-padded detail-list-actions"},[a("p",{staticClass:"detail-list-title"},[t._v(" "+t._s(t.$t("actions"))+" ")]),t.uBusinessHasOperatingStatus(t.status)?a("button",{staticClass:"btn secondary-action-btn",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.downloadRemitterStatement()}}},[t._v(" "+t._s(t.$t("downloadRemitterStatement"))+" ")]):t._e(),t.uBusinessHasOperatingStatus(t.status)?a("button",{staticClass:"btn secondary-action-btn",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.openProductsFiledModal(t.participant.id)}}},[t._v(" "+t._s(t.$t("downloadProductsFiled"))+" ")]):t._e(),t.uBusinessHasOperatingStatus(t.status)&&t.uHasGroup(t.USER_GROUP_AGENCY_FILING)?a("button",{staticClass:"btn secondary-action-btn",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.openCreateInvoiceModal()}}},[t._v(" "+t._s(t.$t("createFinancialInvoice"))+" ")]):t._e(),t.currentUser.agencyUser&&t.uHasGroup(t.USER_GROUP_AGENCY_MASTER)?a("button",{staticClass:"btn secondary-action-btn",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.openMoveModal(t.participant.id)}}},[t._v(" "+t._s(t.$t("moveRemitter"))+" ")]):t._e(),t.participant&&t.participant.type===t.PARTICIPANT_TYPES_REMITTER&&t.currentUser.agencyUser&&t.uHasGroup(t.USER_GROUP_AGENCY_MASTER)?a("button",{staticClass:"btn secondary-action-btn",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.generateFilings()}}},[t._v(" "+t._s(t.$t("generateFilings"))+" ")]):t._e()]):t._e(),t.statementDownloading?a("LoadingIcon",{style:{marginTop:"16px"},attrs:{buttonLoader:!0}}):t._e()],1)]),a("EffectiveDateFormModal",{attrs:{remitter:t.remitter,showEffectiveDateModal:t.showEffectiveDateModal},on:{getRemitter:function(e){return t.$router.go(0)},getHistoryRecords:t.updateHistoryRecords,hideModal:function(e){t.showEffectiveDateModal=!1}}}),a("ConfirmationModal",{attrs:{showModal:t.showConfirmStartDateChangeDialog},on:{ok:t.closeModal,cancel:function(e){return t.cancelChangeStartDateModal()}}},[a("h3",{attrs:{slot:"header"},slot:"header"},[t._v(t._s(t.$t("confirmChange")))]),a("div",{attrs:{slot:"body"},slot:"body"},[t._v(" "+t._s(t.uFindInstruction(this.REMITTERFORM_INSTRUC_STARTDATECHANGE))+" ")])]),a("ConfirmationModal",{attrs:{showModal:t.showConfirmDeleteRemitter},on:{ok:t.deleteRemitter,cancel:t.cancelDelete}},[a("h3",{attrs:{slot:"header"},slot:"header"},[t._v(t._s(t.$t("confirmChange")))]),a("div",{attrs:{slot:"body"},slot:"body"},[t._v(" "+t._s(t.$t("deleteRemitterConfirmation"))+" ")])]),a("ProductsFiledModal",{attrs:{showModal:t.showProductsFiledModal,remitter:t.remitter},on:{hideModal:function(e){t.showProductsFiledModal=!1}}}),a("MoveBusinessModal",{attrs:{showModal:t.showMoveModal,business:t.remitter},on:{hideModal:function(e){t.showMoveModal=!1},movedBusiness:t.getRemitter}}),a("CreateFinancialInvoice",{attrs:{showModal:t.showInvoiceModal,remitter:t.remitter},on:{hideModal:function(e){t.showInvoiceModal=!1}}})],1)},s=[],r=a("a34a"),n=a.n(r),o=a("9ab4"),c=a("60a3"),l=a("bc3a"),u=a.n(l),p=a("2f62"),d=a("2fe1"),f=a("ea76"),m=a.n(f),v=a("1f24"),h=a("2e75"),_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.showEffectiveDateModal?a("div",[a("transition",{attrs:{name:"modal"}},[a("div",{staticClass:"modal-mask"},[a("div",{staticClass:"modal-wrapper modal-dialog"},[a("div",{staticClass:"modal-container modal-content"},[a("div",{staticClass:"modal-header"},[a("p",{staticClass:"modal-title"},[t._v(t._s(t.$t("addHistoryRecord")))])]),a("div",{staticClass:"modal-body modal-body-minimum"},[a("div",{staticClass:"flex-spacer"}),a("div",[a("div",{staticClass:"instruction-text instruction-top",domProps:{innerHTML:t._s(t.uFindInstruction(this.REMITTERFORM_INSTRUC_EFFECTIVEDATE))}})]),a("form",[a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("effectiveDate")))]),a("Datepicker",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"popup-style":{top:"100%",left:0},lang:"en","value-type":"format","data-vv-name":"Effective Date",type:"text",name:"Effective Date",placeholder:t.$t("dateFormat")},on:{change:t.getHistoryRecordAsOf},model:{value:t.effectiveDate,callback:function(e){t.effectiveDate=e},expression:"effectiveDate"}}),a("span",{staticClass:"form-error-message"},[t._v(t._s(t.errors.first("Effective Date")))])],1),a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("filingFrequency")))]),a("b-form-select",{directives:[{name:"validate",rawName:"v-validate",value:"required|min_value:0",expression:"'required|min_value:0'"}],staticClass:"custom-select",attrs:{disabled:t.effectiveDateValue,options:t.uConstants(t.FILING_FREQUENCIES_MASTER,t.uConfig(t.FILING_FREQUENCIES)),name:"filingFrequency"},scopedSlots:t._u([{key:"first",fn:function(){return[a("option",{attrs:{disabled:""},domProps:{value:-1}},[t._v(t._s(t.$t("selectFilingFrequency")))])]},proxy:!0}],null,!1,879211785),model:{value:t.filingFrequency,callback:function(e){t.filingFrequency=e},expression:"filingFrequency"}}),a("span",{staticClass:"form-error-message"},[t._v(t._s(t.errors.first("filingFrequency")))])],1),a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("status")))]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.status,expression:"status"},{name:"validate",rawName:"v-validate",value:"required|min_value:0",expression:"'required|min_value:0'"}],staticClass:"custom-select",attrs:{disabled:t.effectiveDateValue,name:"remitterStatus"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.status=e.target.multiple?a:a[0]},function(e){e.preventDefault(),t.reasonCodesList=t.uGetReasonCodeList(t.status)}]}},[a("option",{attrs:{disabled:"",value:"-1"}},[t._v(t._s(t.$t("selectRemitterStatus")))]),t._l(Object.keys(t.statusOptions),(function(e){return a("option",{key:e,domProps:{value:e}},[t._v(" "+t._s(t.statusOptions[e])+" ")])}))],2),a("span",{staticClass:"form-error-message"},[t._v(t._s(t.errors.first("remitterStatus")))])]),a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("reasonCode")))]),a("b-form-select",{staticClass:"custom-select",attrs:{disabled:-1===t.status||t.effectiveDateValue,options:t.reasonCodesList,name:"reasonCode"},scopedSlots:t._u([{key:"first",fn:function(){return[a("option",{attrs:{disabled:""},domProps:{value:-1}},[t._v(t._s(t.$t("selectReasonCode")))])]},proxy:!0}],null,!1,317660839),model:{value:t.reasonCode,callback:function(e){t.reasonCode=e},expression:"reasonCode"}}),a("span",{staticClass:"form-error-message"},[t._v(t._s(t.errors.first("reasonCode")))])],1),a("div",{staticClass:"form-group"},[a("div",{staticClass:"form-check"},[a("b-form-checkbox",{staticClass:"form-check-input",attrs:{disabled:t.effectiveDateValue,type:"checkbox"},model:{value:t.isRegularFiler,callback:function(e){t.isRegularFiler=e},expression:"isRegularFiler"}}),a("label",{staticClass:"form-check-label"},[t._v(" "+t._s(t.$t("regularFiler"))+" ")]),a("Tooltip",{attrs:{tooltip:t.uFindInstruction(this.REMITTERFORM_INFOTIP_REGULAR_FILER)}})],1)]),a("div",{staticClass:"form-group"},[a("div",{staticClass:"form-check"},[a("b-form-checkbox",{staticClass:"form-check-input",attrs:{disabled:t.effectiveDateValue,type:"checkbox"},model:{value:t.isSpecialFiler,callback:function(e){t.isSpecialFiler=e},expression:"isSpecialFiler"}}),a("label",{staticClass:"form-check-label"},[t._v(" "+t._s(t.uFindInstruction(this.DISPLAY_SPECIAL_FILER))+" ")]),a("Tooltip",{attrs:{tooltip:t.uFindInstruction(this.REMITTERFORM_INFOTIP_SPECIAL_FILER)}})],1)]),a("div",{staticClass:"form-group"},[a("div",{staticClass:"form-check"},[a("b-form-checkbox",{staticClass:"form-check-input",attrs:{disabled:t.effectiveDateValue,type:"checkbox"},model:{value:t.returnToRemitter,callback:function(e){t.returnToRemitter=e},expression:"returnToRemitter"}}),a("label",{staticClass:"form-check-label"},[t._v(" "+t._s(t.uFindInstruction(this.DISPLAY_RETURN_TO_REMITTER))+" ")]),a("Tooltip",{attrs:{tooltip:t.uFindInstruction(this.REMITTERFORM_INFOTIP_ATTRIBUTEFLAG3)}})],1)]),a("div",{staticClass:"form-group"},[a("div",{staticClass:"form-check"},[a("b-form-checkbox",{staticClass:"form-check-input",attrs:{disabled:t.effectiveDateValue,type:"checkbox"},model:{value:t.taxExempt,callback:function(e){t.taxExempt=e},expression:"taxExempt"}}),a("label",{staticClass:"form-check-label"},[t._v(" "+t._s(t.$t("taxExempt"))+" ")]),a("Tooltip",{attrs:{tooltip:t.uFindInstruction(this.REMITTERFORM_INFOTIP_TAX_EXEMPT)}})],1)])])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn secondary-action-btn",on:{click:function(e){return e.preventDefault(),t.$emit("hideModal")}}},[t._v(" "+t._s(t.$t("cancel"))+" ")]),a("button",{staticClass:"btn primary-action-btn",attrs:{disabled:t.submitted||t.errors.any()||!t.uHasGroup(t.USER_GROUP_AGENCY_MASTER),type:"submit"},on:{click:function(e){return e.preventDefault(),t.submitForm()}}},[t._v(" "+t._s(t.$t("ok"))+" ")])]),t.uHasGroup(t.USER_GROUP_AGENCY_MASTER)?t._e():a("div",{staticClass:"form-error-message--permissions"},[t._v(" "+t._s(t.$t("higherPermissionsRequired"))+" ")])])])])])],1):t._e()},b=[],y=a("8e5f"),g=a.n(y);function C(t){return C="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},C(t)}function T(t,e,a,i,s,r,n){try{var o=t[r](n),c=o.value}catch(l){return void a(l)}o.done?e(c):Promise.resolve(c).then(i,s)}function E(t){return function(){var e=this,a=arguments;return new Promise((function(i,s){var r=t.apply(e,a);function n(t){T(r,i,s,n,o,"next",t)}function o(t){T(r,i,s,n,o,"throw",t)}n(void 0)}))}}function O(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function R(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function I(t,e,a){return e&&R(t.prototype,e),a&&R(t,a),t}function P(t,e){return!e||"object"!==C(e)&&"function"!==typeof e?S(t):e}function S(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function N(t){return N=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},N(t)}function w(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&A(t,e)}function A(t,e){return A=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},A(t,e)}var k=function(t){function e(){var t;return O(this,e),t=P(this,N(e).apply(this,arguments)),t.submitted=!1,t.status=-1,t.effectiveDate="",t.reasonCodesList=[],t.isRegularFiler=!1,t.isSpecialFiler=!1,t.returnToRemitter=!1,t.taxExempt=!1,t.filingFrequency=-1,t.reasonCode=-1,t.statusOptions={},t}return w(e,t),I(e,[{key:"updateShowEffectiveDateModal",value:function(t){this.showEffectiveDateModal=t,this.status=-1,this.effectiveDate="",this.reasonCodesList=[],this.isRegularFiler=!1,this.isSpecialFiler=!1,this.returnToRemitter=!1,this.taxExempt=!1,this.filingFrequency=-1,this.reasonCode=-1}},{key:"submitForm",value:function(){var t=E(n.a.mark((function t(){var e,a=this;return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.submitted=!0,t.next=3,this.$validator.validate();case 3:e=t.sent,e?u.a.post("".concat("http://localhost:8000/api","/remitter-historys/"),{remitter:this.remitter.id,filing_frequency:this.filingFrequency,registration_status:this.status,reason_code:-1===this.reasonCode?0:this.reasonCode,is_regular_filer:this.isRegularFiler,is_special_filer:this.isSpecialFiler,return_to_remitter:this.returnToRemitter,is_tax_exempt:this.taxExempt,effective_date:this.effectiveDate}).then((function(){a.$emit("getHistoryRecords"),a.$emit("getRemitter"),a.$emit("hideModal")})).catch((function(t){a.uRequestErrorHandler(t)})).finally((function(){a.submitted=!1})):this.submitted=!1;case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getHistoryRecordAsOf",value:function(){var t=this;u.a.get("".concat("http://localhost:8000/api","/remitter-historys/?effective_date=").concat(this.effectiveDate)+"&remitter=".concat(this.remitter.id)).then((function(e){var a=t.uRecursiveCamel(e.data);t.updateRemitterDetails(a[0])})).catch((function(e){t.uRequestErrorHandler(e)}))}},{key:"updateRemitterDetails",value:function(t){t?(this.filingFrequency=t.filingFrequency,this.status=t.registrationStatus,this.reasonCode=t.reasonCode,this.isRegularFiler=t.isRegularFiler,this.isSpecialFiler=t.isSpecialFiler,this.returnToRemitter=t.returnToRemitter,this.taxExempt=t.isTaxExempt,this.reasonCodesList=this.uGetReasonCodeList(this.status),this.reasonCode=-1,t.isOperating?this.statusOptions=this.PARTICIPANT_STATUS_OPERATING:this.statusOptions=this.PARTICIPANT_STATUS_REGISTERING):(this.status=-1,this.reasonCodesList=[],this.isRegularFiler=!0,this.isSpecialFiler=!1,this.returnToRemitter=!1,this.taxExempt=!1,this.filingFrequency=-1,this.reasonCode=-1,this.statusOptions=this.PARTICIPANT_STATUS)}},{key:"effectiveDateValue",get:function(){return""===this.effectiveDate}}]),e}(Object(d["c"])(h["a"]));Object(o["a"])([Object(c["b"])()],k.prototype,"remitter",void 0),Object(o["a"])([Object(c["b"])()],k.prototype,"showEffectiveDateModal",void 0),Object(o["a"])([Object(c["d"])("showEffectiveDateModal")],k.prototype,"updateShowEffectiveDateModal",null),k=Object(o["a"])([Object(c["a"])({components:{Multiselect:g.a,Datepicker:m.a,Tooltip:v["a"]},computed:Object(p["b"])(["isLoggedIn","currentUser"])})],k);var D=k,x=D,j=(a("60bc"),a("07e4"),a("2877")),M=Object(j["a"])(x,_,b,!1,null,"0258d13f",null),U=M.exports,$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.showModal?a("div",[a("transition",{attrs:{name:"modal"}},[a("div",{staticClass:"modal-mask"},[a("div",{staticClass:"modal-wrapper modal-dialog"},[a("div",{staticClass:"modal-container modal-content"},[a("div",{staticClass:"modal-header"},[a("p",{staticClass:"modal-title"},[t._v(t._s(t.$t("selectFiling")))])]),a("div",{staticClass:"modal-body"},[a("form",[a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("filing")))]),a("b-form-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"custom-select",attrs:{multiple:"",options:t.filings,"select-size":t.filings.length,name:"filing"},model:{value:t.selectedFilings,callback:function(e){t.selectedFilings=e},expression:"selectedFilings"}}),a("span",{staticClass:"form-error-message"},[t._v(t._s(t.errors.first("filing")))])],1)])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn secondary-action-btn",on:{click:function(e){return e.preventDefault(),t.$emit("hideModal")}}},[t._v(" "+t._s(t.$t("cancel"))+" ")]),a("button",{staticClass:"btn primary-action-btn",attrs:{disabled:t.submitted||t.errors.any(),type:"submit"},on:{click:function(e){return e.preventDefault(),t.submitForm(e)}}},[t._v(" "+t._s(t.$t("ok"))+" ")])])])])])])],1):t._e()},F=[],L=a("7358");function G(t){return G="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},G(t)}function B(t,e,a,i,s,r,n){try{var o=t[r](n),c=o.value}catch(l){return void a(l)}o.done?e(c):Promise.resolve(c).then(i,s)}function Y(t){return function(){var e=this,a=arguments;return new Promise((function(i,s){var r=t.apply(e,a);function n(t){B(r,i,s,n,o,"next",t)}function o(t){B(r,i,s,n,o,"throw",t)}n(void 0)}))}}function q(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function H(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function V(t,e,a){return e&&H(t.prototype,e),a&&H(t,a),t}function Q(t,e){return!e||"object"!==G(e)&&"function"!==typeof e?z(t):e}function z(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function W(t){return W=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},W(t)}function J(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&X(t,e)}function X(t,e){return X=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},X(t,e)}var K=function(t){function e(){var t;return q(this,e),t=Q(this,W(e).apply(this,arguments)),t.submitted=!1,t.filings=[],t.selectedFilings=[],t}return J(e,t),V(e,[{key:"updateShowModal",value:function(){var t=Y(n.a.mark((function t(e){var a,i,s,r,o;return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.selectedFilings=[],this.showModal=e,this.submitted=!1,t.next=5,this.getList("filings","participant=".concat(this.remitter.participant.id,"&status=").concat(this.FILING_STATUS_APPROVED));case 5:for(a=t.sent,i=a.data,this.filings=[],s=0;s<i.length;s+=1)r=i[s],o="",r.reason&&0!==r.reason&&(o=" - ".concat(this.INVOICE_REASONS_MASTER[r.reason])),this.filings.push({text:"".concat(r.filingPeriod.name," - ").concat(this.FILING_TYPES[r.type]," ").concat(o),value:r.id});case 9:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"submitForm",value:function(){var t=Y(n.a.mark((function t(){var e,a,i,s=this;return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.submitted=!0,t.next=3,this.$validator.validate();case 3:if(e=t.sent,e){for(a="",i=0;i<this.selectedFilings.length;i+=1)a+="filing=".concat(this.selectedFilings[i],"&");u()({method:"get",url:"".concat("http://localhost:8000/api","/report-products-filed/?participant=").concat(this.remitter.participant.id,"&").concat(a),responseType:"blob"}).then((function(t){var e="".concat(s.remitter.participant.businessName," - Products Filed - ").concat(s.uCurrentDate(),".xlsx");s.uDownloadBlobRequest(t.data,e),s.$emit("hideModal")})).catch((function(t){s.uRequestErrorHandler(t),s.submitted=!1}))}else this.submitted=!1;case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}]),e}(Object(d["c"])(h["a"],L["a"]));Object(o["a"])([Object(c["b"])()],K.prototype,"showModal",void 0),Object(o["a"])([Object(c["b"])()],K.prototype,"remitter",void 0),Object(o["a"])([Object(c["d"])("showModal")],K.prototype,"updateShowModal",null),K=Object(o["a"])([Object(c["a"])({components:{Multiselect:g.a,Datepicker:m.a,Tooltip:v["a"]},computed:Object(p["b"])(["isLoggedIn","currentUser"])})],K);var Z=K,tt=Z,et=(a("e2c1"),Object(j["a"])(tt,$,F,!1,null,"16013a1f",null)),at=et.exports,it=a("0f7b"),st=a("42c2"),rt=a("7034"),nt=a("88c3"),ot=a("c5af");function ct(t){return ct="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ct(t)}function lt(t,e){return mt(t)||ft(t,e)||pt(t,e)||ut()}function ut(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function pt(t,e){if(t){if("string"===typeof t)return dt(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?dt(t,e):void 0}}function dt(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,i=new Array(e);a<e;a++)i[a]=t[a];return i}function ft(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var a=[],i=!0,s=!1,r=void 0;try{for(var n,o=t[Symbol.iterator]();!(i=(n=o.next()).done);i=!0)if(a.push(n.value),e&&a.length===e)break}catch(c){s=!0,r=c}finally{try{i||null==o["return"]||o["return"]()}finally{if(s)throw r}}return a}}function mt(t){if(Array.isArray(t))return t}function vt(t,e,a,i,s,r,n){try{var o=t[r](n),c=o.value}catch(l){return void a(l)}o.done?e(c):Promise.resolve(c).then(i,s)}function ht(t){return function(){var e=this,a=arguments;return new Promise((function(i,s){var r=t.apply(e,a);function n(t){vt(r,i,s,n,o,"next",t)}function o(t){vt(r,i,s,n,o,"throw",t)}n(void 0)}))}}function _t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function bt(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function yt(t,e,a){return e&&bt(t.prototype,e),a&&bt(t,a),t}function gt(t,e){return!e||"object"!==ct(e)&&"function"!==typeof e?Ct(t):e}function Ct(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Tt(t){return Tt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Tt(t)}function Et(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ot(t,e)}function Ot(t,e){return Ot=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Ot(t,e)}var Rt=function(t){function e(){var t;return _t(this,e),t=gt(this,Tt(e).apply(this,arguments)),t.submitted=!1,t.jurisdictions=[],t.remitter={},t.statementDownloading=!1,t.productsFiledDownloading=!1,t.businessName="",t.businessLink="",t.legalName="",t.type=-1,t.operationsStartDate="",t.originalOperationsStartDate="",t.operationsEndDate="",t.regDate="",t.isRegularFiler=!0,t.isSpecialFiler=!1,t.isFilingInAdvance=!1,t.returnToRemitter=!1,t.showConfirmStartDateChangeDialog=!1,t.showConfirmDeleteRemitter=!1,t.opsStartDateChanged=!1,t.showMoveModal=!1,t.showProductsFiledModal=!1,t.jurisdiction="",t.status=-1,t.agencyId=0,t.agencyName="",t.agencyCode="",t.showEffectiveDateModal=!1,t.showInvoiceModal=!1,t.remittanceAppEnabled=!1,t.remitterReady=!1,t.remitterTypes=[],t}return Et(e,t),yt(e,[{key:"updateRemitterId",value:function(t){this.remitterId=t,this.getRemitter()}},{key:"mounted",value:function(){var t=ht(n.a.mark((function t(){var e,a,i;return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.remitterTypes=this.uConstants(this.REMITTER_TYPES_MASTER,this.uConfig(this.REMITTER_TYPES)),this.remittanceAppEnabled=!0,this.updating&&this.remitterId&&this.getRemitter(),!this.currentUser){t.next=14;break}if(!this.currentUser.agencyUser){t.next=9;break}this.jurisdictions=this.currentUser.agencyUserJurisdictions,this.updating||1===this.jurisdictions.length&&(e=lt(this.jurisdictions,1),this.jurisdiction=e[0],this.getAgencyName()),t.next=14;break;case 9:return t.next=11,this.getList("jurisdictions","");case 11:a=t.sent,i=a.data,this.jurisdictions=i;case 14:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getAgencyName",value:function(){this.agencyName=this.jurisdiction.agency.name}},{key:"checkStartDate",value:function(){this.updating&&this.opsStartDateChanged?this.openStartDateChangeConfirmModal():this.submitForm()}},{key:"deleteRemitter",value:function(){var t=this;this.showConfirmDeleteRemitter=!1;var e=this.remitter.participant.participant;u.a.delete("".concat("http://localhost:8000/api","/remitters/").concat(this.remitterId,"/")).then((function(){t.$router.push({name:"participant",params:{participantId:String(e)}}),t.$router.go(0)})).catch((function(e){t.uRequestErrorHandler(e)}))}},{key:"submitForm",value:function(){var t=ht(n.a.mark((function t(){var e,a,i,s,r,o=this;return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.submitted=!0,t.next=3,this.$validator.validate();case 3:if(e=t.sent,e){t.next=8;break}this.submitted=!1,t.next=40;break;case 8:if(a={legal_name:this.legalName,type:this.type,operations_start_date:this.operationsStartDate,reg_date:""!==this.regDate?this.regDate:null},this.updating){t.next=35;break}return a.is_regular_filer=this.isRegularFiler,a.is_special_filer=this.isSpecialFiler,a.is_filing_in_advance=this.isFilingInAdvance,a.return_to_remitter=this.returnToRemitter,a.jurisdiction_id=this.jurisdiction.id,a.participant={business_name:this.businessName,participant:this.parentParticipant.id,business_link:this.businessLink},t.prev=16,t.next=19,u.a.post("".concat("http://localhost:8000/api","/remitters/"),a);case 19:return i=t.sent,t.next=22,u.a.get("".concat("http://localhost:8000/api","/auth/current_user/"));case 22:s=t.sent,r=this.uRecursiveCamel(s.data.user),this.$store.dispatch("update_user",r),this.$store.dispatch("update_token",s.data.token),this.$router.push({name:"participant",params:{participantId:i.data.participant_id}}),t.next=33;break;case 29:t.prev=29,t.t0=t["catch"](16),this.submitted=!1,this.uRequestErrorHandler(t.t0);case 33:t.next=40;break;case 35:a.operations_end_date=""===this.operationsEndDate?null:this.operationsEndDate,a.reg_date=this.regDate,a.is_filing_in_advance=this.isFilingInAdvance,a.participant={business_name:this.businessName,participant:this.participant.id,business_link:this.businessLink},u.a.put("".concat("http://localhost:8000/api","/remitters/").concat(this.remitterId,"/"),a).then((function(){o.$emit("remitterUpdated")})).catch((function(t){o.uRequestErrorHandler(t)})).finally((function(){o.submitted=!1}));case 40:case"end":return t.stop()}}),t,this,[[16,29]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"getRemitter",value:function(){var t=this;this.remitterReady=!1,u.a.get("".concat("http://localhost:8000/api","/remitters/").concat(this.remitterId,"/")).then((function(e){t.remitter=t.uRecursiveCamel(e.data),t.businessName=t.remitter.participant.businessName,t.businessLink=t.remitter.participant.businessLink,t.jurisdiction=t.remitter.jurisdiction,t.status=t.remitter.status,t.legalName=t.remitter.legalName,t.operationsStartDate=t.remitter.operationsStartDate,t.originalOperationsStartDate=t.remitter.operationsStartDate,t.operationsEndDate=t.remitter.operationsEndDate,t.regDate=t.remitter.regDate,t.type=t.remitter.type,t.agencyName=t.remitter.jurisdiction.agency.name,t.agencyCode=t.remitter.jurisdiction.agency.code,t.isFilingInAdvance=t.remitter.isFilingInAdvance})).catch((function(e){t.uRequestErrorHandler(e)})).finally((function(){t.remitterReady=!0}))}},{key:"openEffectiveDateForm",value:function(){this.showEffectiveDateModal=!0}},{key:"updateHistoryRecords",value:function(){this.$emit("historyUpdated")}},{key:"downloadRemitterStatement",value:function(){var t=this;this.statementDownloading=!0,u()({method:"get",url:"".concat("http://localhost:8000/api","/report-remitter-statement/").concat(this.participant.id,"/"),responseType:"blob"}).then((function(e){var a="".concat(t.agencyCode,"-").concat(t.remitter.registrationNo,"-").concat(nt["a"].tc("remitterStatement"))+"-".concat(t.uCurrentDate(),".pdf");t.uDownloadBlobRequest(e.data,a)})).catch((function(e){t.uRequestErrorHandler(e),t.statementDownloading=!1})).finally((function(){t.statementDownloading=!1}))}},{key:"openStartDateChangeConfirmModal",value:function(){this.showConfirmStartDateChangeDialog=!0}},{key:"closeModal",value:function(){this.showConfirmStartDateChangeDialog=!1,this.submitForm()}},{key:"cancelChangeStartDateModal",value:function(){this.operationsStartDate=this.originalOperationsStartDate,this.showConfirmStartDateChangeDialog=!1,this.opsStartDateChanged=!1}},{key:"openConfirmDeleteRemitter",value:function(){this.showConfirmDeleteRemitter=!0}},{key:"cancelDelete",value:function(){this.showConfirmDeleteRemitter=!1}},{key:"openProductsFiledModal",value:function(){this.showProductsFiledModal=!0}},{key:"openMoveModal",value:function(){this.showMoveModal=!0}},{key:"openCreateInvoiceModal",value:function(){this.showInvoiceModal=!0}},{key:"generateFilings",value:function(){var t=this;u.a.get("".concat("http://localhost:8000/api","/generate-filings/?remitter=").concat(this.remitter.id)).then((function(){t.$router.push({name:"filingStart",params:{menuState:"1",participantId:String(t.participant.participant)}})})).catch((function(e){t.uRequestErrorHandler(e)}))}},{key:"uShowRemitterFormButtons",value:function(){return!this.updating||!(!this.updating||(!this.uIsParticipantUser()||this.uConfig(this.ONLY_AGENCY_UPDATES_BUSINESS_NAME)&&this.uConfig(this.ONLY_AGENCY_UPDATES_REMITTER_TYPE))&&this.uIsParticipantUser())}}]),e}(Object(d["c"])(h["a"],L["a"]));Object(o["a"])([Object(c["b"])()],Rt.prototype,"updating",void 0),Object(o["a"])([Object(c["b"])()],Rt.prototype,"remitterId",void 0),Object(o["a"])([Object(c["b"])()],Rt.prototype,"participant",void 0),Object(o["a"])([Object(c["b"])()],Rt.prototype,"parentParticipant",void 0),Object(o["a"])([Object(c["b"])()],Rt.prototype,"remitterLoading",void 0),Object(o["a"])([Object(c["d"])("remitterId")],Rt.prototype,"updateRemitterId",null),Rt=Object(o["a"])([Object(c["a"])({components:{Datepicker:m.a,Tooltip:v["a"],EffectiveDateFormModal:U,ConfirmationModal:it["a"],LoadingIcon:ot["a"],ProductsFiledModal:at,MoveBusinessModal:st["a"],CreateFinancialInvoice:rt["a"]},computed:Object(p["b"])(["currentUser"])})],Rt);var It=Rt,Pt=It,St=(a("6578"),Object(j["a"])(Pt,i,s,!1,null,null,null));e["a"]=St.exports},8111:function(t,e,a){},"8e70":function(t,e,a){"use strict";var i=a("5266"),s=a.n(i);s.a},9194:function(t,e,a){},9588:function(t,e,a){"use strict";var i=a("29af"),s=a.n(i);s.a},a33b:function(t,e,a){"use strict";var i=a("d422"),s=a.n(i);s.a},a616:function(t,e,a){"use strict";var i=a("07e0"),s=a.n(i);s.a},af6d:function(t,e,a){},b40a:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.generatorLoading?a("div",{staticClass:"table-loading"},[a("LoadingIcon")],1):a("div",[a("div",{staticClass:"form-header"},[t.updating?a("p",{staticClass:"form-title"},[t._v(" "+t._s(t.$t("updateGenerator"))+" ")]):t._e(),t.updating?t._e():a("p",{staticClass:"form-title"},[t._v(" "+t._s(t.$t("createGeneratorFor"))+" "+t._s(t.parentParticipant.businessName)+" ")]),a("div",{staticClass:"flex-spacer"}),!t.generatorLoading&&t.updating?a("div",[t.uIsClaimsAppEnabled()&&t.currentUser.agencyUser&&t.uHasGroup(t.USER_GROUP_AGENCY_MASTER)||t.uIsParticipantUser()?a("router-link",{staticClass:"btn primary-action-btn",attrs:{tag:"button",to:{name:"claimsStart",params:{menuState:"1",participantId:Number(t.participant.id)}}}},[t._v(" "+t._s(t.$t("claim"))+" ")]):t._e()],1):t._e()]),a("div",{staticClass:"form-two-sides"},[a("div",{staticClass:"form-left-side"},[a("form",{staticClass:"padded-form"},[t.status&&t.status>=t.PARTICIPANT_STATUS_ACTIVE?a("div",{staticClass:"detail-list"},[a("p",[a("span",{staticClass:"list-label"},[t._v(t._s(t.$t("registrationNumber"))+":")]),t._v(" "+t._s(t.uFormatRegistrationNo(t.generator))+" ")])]):t._e(),!t.updating||t.currentUser.agencyUser?a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("legacyRegNo")))]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"max:20",expression:"'max:20'"},{name:"model",rawName:"v-model",value:t.legacyRegNo,expression:"legacyRegNo"}],staticClass:"form-control",attrs:{type:"text",name:"Legacy Registration Number"},domProps:{value:t.legacyRegNo},on:{input:function(e){e.target.composing||(t.legacyRegNo=e.target.value)}}})]):t._e(),t.updating&&t.uIsParticipantUser()?a("div",{staticClass:"detail-list"},[a("p",[a("span",{staticClass:"list-label"},[t._v(t._s(t.$t("legacyRegNo"))+":")]),t._v(" "+t._s(t.legacyRegNo)+" ")])]):t._e(),t.updating&&t.uIsParticipantUser()&&t.uConfig(t.ONLY_AGENCY_UPDATES_BUSINESS_NAME)?t._e():a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("businessName"))+" "),a("Tooltip",{attrs:{tooltip:t.uFindInstruction(this.GENERATORFORM_INFOTIP_BUSI_NAME)}})],1),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:100",expression:"'required|max:100'"},{name:"model",rawName:"v-model",value:t.businessName,expression:"businessName"}],staticClass:"form-control",attrs:{type:"text",name:"Business Name"},domProps:{value:t.businessName},on:{input:function(e){e.target.composing||(t.businessName=e.target.value)}}}),a("span",{staticClass:"form-error-message"},[t._v(t._s(t.errors.first("Business Name")))])]),t.updating&&t.uIsParticipantUser()&&t.uConfig(t.ONLY_AGENCY_UPDATES_BUSINESS_NAME)?a("div",{staticClass:"detail-list"},[a("p",[a("span",{staticClass:"list-label"},[t._v(t._s(t.$t("businessName"))+":")]),t._v(" "+t._s(t.businessName)+" "),a("Tooltip",{attrs:{tooltip:t.uFindInstruction(this.GENERATORFORM_INFOTIP_BUSI_NAME)}})],1)]):t._e(),a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("type")))]),a("b-form-select",{directives:[{name:"validate",rawName:"v-validate",value:"required|min_value:0",expression:"'required|min_value:0'"}],staticClass:"custom-select",attrs:{options:t.generatorTypes,name:"generatorType"},scopedSlots:t._u([{key:"first",fn:function(){return[a("option",{attrs:{disabled:""},domProps:{value:null}},[t._v(t._s(t.$t("selectBusinessType")))])]},proxy:!0}],null,!1,1576338487),model:{value:t.type,callback:function(e){t.type=e},expression:"type"}}),a("span",{staticClass:"form-error-message"},[t._v(t._s(t.errors.first("generatorType")))])],1),a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("calculationMethod")))]),a("b-form-select",{staticClass:"custom-select",attrs:{options:this.GENERATOR_CALCULATION_TYPES,name:"calculationMethod"},scopedSlots:t._u([{key:"first",fn:function(){return[a("option",{domProps:{value:null}},[t._v(t._s(t.$t("selectCalculationMethod")))])]},proxy:!0}],null,!1,1418243941),model:{value:t.calculationMethod,callback:function(e){t.calculationMethod=e},expression:"calculationMethod"}}),a("span",{staticClass:"form-error-message"},[t._v(t._s(t.errors.first("calculationMethod")))])],1),!t.updating||t.currentUser.agencyUser?a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("legalName"))+" "),a("Tooltip",{attrs:{tooltip:t.uFindInstruction(this.REMITTERFORM_INFOTIP_LEGALNAME)}})],1),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:100",expression:"'required|max:100'"},{name:"model",rawName:"v-model",value:t.legalName,expression:"legalName"}],staticClass:"form-control",attrs:{type:"text",name:"Legal Name"},domProps:{value:t.legalName},on:{input:function(e){e.target.composing||(t.legalName=e.target.value)}}}),a("span",{staticClass:"form-error-message"},[t._v(t._s(t.errors.first("Legal Name")))])]):t._e(),t.updating&&t.uIsParticipantUser()?a("div",{staticClass:"detail-list"},[a("p",[a("span",{staticClass:"list-label"},[t._v(t._s(t.$t("legalName"))+":")]),t._v(" "+t._s(t.legalName)+" "),a("Tooltip",{attrs:{tooltip:t.uFindInstruction(this.REMITTERFORM_INFOTIP_LEGALNAME)}})],1)]):t._e(),t.currentUser.agencyUser?a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("registrationDate"))+" "),a("Tooltip",{attrs:{tooltip:t.uFindInstruction(this.GENERATORFORM_INFOTIP_REGDATE)}})],1),a("Datepicker",{directives:[{name:"validate",rawName:"v-validate",value:t.generator.status!==t.PARTICIPANT_STATUS_NEW&&t.generator.status!==t.PARTICIPANT_STATUS_IN_PROGRESS&&t.generator.status?"required":"",expression:"\n                (generator.status === PARTICIPANT_STATUS_NEW\n                  || generator.status === PARTICIPANT_STATUS_IN_PROGRESS\n                  || !generator.status) ? '' : 'required'"}],attrs:{lang:"en","value-type":"format","data-vv-name":"Registration Date",type:"text",name:"Registration Date",placeholder:t.$t("dateFormat")},model:{value:t.regDate,callback:function(e){t.regDate=e},expression:"regDate"}}),a("span",{staticClass:"form-error-message"},[t._v(t._s(t.errors.first("Registration Date")))])],1):t._e(),!t.updating||t.currentUser.agencyUser?a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("operationsStartDate"))+" "),a("Tooltip",{attrs:{tooltip:t.uFindInstruction(this.GENERATORFORM_INFOTIP_STARTDATE)}})],1),a("Datepicker",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{lang:"en","value-type":"format","data-vv-name":"Operations Start Date",type:"text",name:"Operations Start Date",placeholder:t.$t("dateFormat")},model:{value:t.operationsStartDate,callback:function(e){t.operationsStartDate=e},expression:"operationsStartDate"}}),a("span",{staticClass:"form-error-message"},[t._v(t._s(t.errors.first("Operations Start Date")))])],1):t._e(),t.updating&&t.currentUser.agencyUser?a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("operationsEndDate")))]),a("Datepicker",{attrs:{lang:"en","value-type":"format",type:"text","data-vv-name":"Operations End Date","not-before":t.uStringDatetoDate(t.operationsStartDate),name:"Operations End Date",placeholder:t.$t("dateFormat")},model:{value:t.operationsEndDate,callback:function(e){t.operationsEndDate=e},expression:"operationsEndDate"}})],1):t._e(),!t.updating||t.currentUser.agencyUser?a("div",{staticClass:"form-group"},[a("div",{staticClass:"form-check"},[a("b-form-checkbox",{staticClass:"form-check-input",attrs:{type:"checkbox"},model:{value:t.isPublicBusiness,callback:function(e){t.isPublicBusiness=e},expression:"isPublicBusiness"}}),a("label",{staticClass:"form-check-label"},[t._v(t._s(t.$t("isPublicBusiness")))]),a("Tooltip",{attrs:{tooltip:t.uFindInstruction(this.GENERATORFORM_INFOTIP_PUBLIC_BUSINESS)}})],1)]):t._e(),t.updating&&t.uIsParticipantUser()?a("div",{staticClass:"detail-list"},[a("p",[a("span",{staticClass:"list-label"},[t._v(t._s(t.$t("isPublicBusiness"))+":")]),t._v(" "+t._s(t.isPublicBusiness)+" "),a("Tooltip",{attrs:{tooltip:t.uFindInstruction(this.GENERATORFORM_INFOTIP_PUBLIC_BUSINESS)}})],1)]):t._e(),a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("businessLink"))+" "),a("Tooltip",{attrs:{tooltip:t.uFindInstruction(this.GENERATORFORM_INFOTIP_BUSI_LINK)}})],1),a("input",{directives:[{name:"model",rawName:"v-model",value:t.businessLink,expression:"businessLink"}],staticClass:"form-control",attrs:{type:"text",name:"Business Link"},domProps:{value:t.businessLink},on:{input:function(e){e.target.composing||(t.businessLink=e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("hoursOfOperation"))+" "),a("Tooltip",{attrs:{tooltip:t.uFindInstruction(this.GENERATORFORM_INFOTIP_HOURS_OPERATION)}})],1),a("textarea",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.hours,expression:"hours"}],staticClass:"form-control text-area-small",attrs:{name:"hours"},domProps:{value:t.hours},on:{input:function(e){e.target.composing||(t.hours=e.target.value)}}}),a("span",{staticClass:"form-error-message"},[t._v(t._s(t.errors.first("hours")))])]),a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("collectors"))+" "),a("Tooltip",{attrs:{tooltip:t.uFindInstruction(this.GENERATORFORM_INFOTIP_COLLECTORS)}})],1),a("textarea",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.collectors,expression:"collectors"}],staticClass:"form-control text-area-small",attrs:{name:"collectors"},domProps:{value:t.collectors},on:{input:function(e){e.target.composing||(t.collectors=e.target.value)}}}),a("span",{staticClass:"form-error-message"},[t._v(t._s(t.errors.first("collectors")))])]),t.updating&&t.generator?a("div",{staticClass:"detail-list"},[t.uIsParticipantUser()?a("p",[a("span",{staticClass:"list-label"},[t._v(t._s(t.$t("operationsStartDate"))+":")]),t._v(" "+t._s(t.generator.operationsStartDate)+" "),a("Tooltip",{attrs:{tooltip:t.uFindInstruction(this.GENERATORFORM_INFOTIP_STARTDATE)}})],1):t._e(),t.operationsEndDate&&t.uIsParticipantUser()?a("p",[a("span",{staticClass:"list-label"},[t._v(t._s(t.$t("operationsEndDate"))+":")]),t._v(" "+t._s(t.generator.operationsEndDate)+" "),a("Tooltip",{attrs:{tooltip:t.uFindInstruction(this.REMITTERFORM_INFOTIP_ENDDATE)}})],1):t._e(),t.uIsParticipantUser()?a("p",[a("span",{staticClass:"list-label"},[t._v(t._s(t.$t("registrationDate"))+":")]),t._v(" "+t._s(t.regDate)+" ")]):t._e(),a("p",[a("span",{staticClass:"list-label"},[t._v(" "+t._s(t.uFindInstruction(this.DISPLAY_JURISDICTION))+": ")]),t.jurisdiction&&t.jurisdiction.name[t.uLangFromLocale(t.$i18n.locale)]?a("span",[t._v(" "+t._s(t.jurisdiction.name[t.uLangFromLocale(t.$i18n.locale)])+" ")]):t._e()]),a("p",[a("span",{staticClass:"list-label"},[t._v(t._s(t.$t("agency"))+":")]),t._v(" "+t._s(t.agencyName[t.uLangFromLocale(t.$i18n.locale)])+" ")])]):t._e(),t.updating?t._e():a("div",[t.currentUser.agencyUser&&1===t.jurisdictions.length?t._e():a("div",{staticClass:"form-group"},[a("label",[t._v(" "+t._s(t.uFindInstruction(this.DISPLAY_JURISDICTION))+" ")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.jurisdiction,expression:"jurisdiction"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"custom-select",attrs:{name:"jurisdiction"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.jurisdiction=e.target.multiple?a:a[0]},function(e){return t.getAgencyName()}]}},[a("option",{attrs:{disabled:"",value:""}},[t._v(" "+t._s(t.uFindInstruction(this.DISPLAY_SELECT_JURISDICTION))+" ")]),t._l(t.jurisdictions,(function(e){return a("option",{key:e.id,domProps:{value:e}},[t._v(" "+t._s(e.name[t.uLangFromLocale(t.$i18n.locale)])+" ")])}))],2),a("span",{staticClass:"form-error-message"},[t._v(t._s(t.errors.first("jurisdiction")))])]),t.currentUser.agencyUser&&1===t.jurisdictions.length?a("div",{staticClass:"form-group"},[a("label",[t._v(" "+t._s(t.uFindInstruction(this.DISPLAY_JURISDICTION))+" ")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.jurisdiction,expression:"jurisdiction"}],staticClass:"custom-select",attrs:{name:"jurisdiction"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.jurisdiction=e.target.multiple?a:a[0]}}},[a("option",{key:t.jurisdictions[0].id,domProps:{value:t.jurisdictions[0]}},[t._v(" "+t._s(t.jurisdictions[0].name[t.uLangFromLocale(t.$i18n.locale)])+" ")])]),a("span",{staticClass:"form-error-message"},[t._v(t._s(t.errors.first("jurisdiction")))])]):t._e(),a("div",{staticClass:"detail-list"},[a("p",[a("span",{staticClass:"list-label"},[t._v(t._s(t.$t("agency"))+":")]),t._v(" "+t._s(t.agencyName[t.uLangFromLocale(t.$i18n.locale)]))])])]),a("div",{staticClass:"form-actions"},[a("button",{staticClass:"btn primary-action-btn",attrs:{disabled:t.uDisableGeneratorDataForm(t.submitted,t.errors.any(),t.status,t.participant?t.participant.id:null,t.updating)||t.updating&&!t.generatorReady,type:"submit"},on:{click:function(e){return e.preventDefault(),t.submitForm()}}},[t._v(" "+t._s(t.updating?t.$t("update"):t.$t("create"))+" ")]),a("router-link",{staticClass:"btn secondary-action-btn",attrs:{tag:"button",to:{name:"participants"}}},[t._v(" "+t._s(t.$t("cancel"))+" ")]),null!==t.generator.registrationNo||!t.currentUser.agencyUser||t.generator.status!==t.PARTICIPANT_STATUS_IN_PROGRESS&&t.generator.status!==t.PARTICIPANT_STATUS_NEW?t._e():a("button",{staticClass:"btn negative-action-btn",attrs:{disabled:!t.uHasGroup(t.USER_GROUP_AGENCY_MASTER)},on:{click:function(e){return e.preventDefault(),t.openConfirmDeleteGenerator()}}},[t._v(" "+t._s(t.$t("delete"))+" ")]),t.uIsMasterUser()?t._e():a("div",{staticClass:"form-error-message--permissions"},[t._v(" "+t._s(t.$t("higherPermissionsRequired"))+" ")])],1)])]),a("div",{staticClass:"form-right-side"},[t.updating&&t.generator?a("div",{staticClass:"detail-list detail-list-padded"},[a("p",{staticClass:"detail-list-title"},[t._v(" "+t._s(t.$t("currentHistoryValues"))+" "),t.currentUser.agencyUser?a("button",{staticClass:"btn secondary-action-btn",style:{float:"right"},attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.openGeneratorHistoryForm()}}},[t._v(" "+t._s(t.$t("update"))+" ")]):t._e()]),a("p",[a("span",{staticClass:"list-label"},[t._v(" "+t._s(t.uFindInstruction(this.GENERATORFORM_DISPLAYNAME_DROP_OFF))+": ")]),t._v(" "+t._s(t.generator.isDropOff)+" "),a("Tooltip",{attrs:{tooltip:t.uFindInstruction(this.GENERATORFORM_INFOTIP_DROP_OFF)}})],1),a("p",[a("span",{staticClass:"list-label"},[t._v(t._s(t.$t("status"))+":")]),t._v(" "+t._s(t.PARTICIPANT_STATUS[t.status])+" ")]),a("p",[a("span",{staticClass:"list-label"},[t._v(t._s(t.$t("reasonCode"))+":")]),t._v(" "+t._s(t.generator.reasonCode?t.PARTICIPANT_STATUS_REASON[t.generator.reasonCode]:t.$t("none"))+" ")])]):t._e(),t.updating&&t.generator?a("div",{staticClass:"detail-list detail-list-padded"},[a("p",{staticClass:"detail-list-title"},[t._v(" "+t._s(t.$t("acceptedProducts"))+" "),a("button",{staticClass:"btn secondary-action-btn",style:{float:"right"},attrs:{type:"submit"},on:{click:function(e){e.preventDefault(),t.showProductModal=!0}}},[t._v(" "+t._s(t.$t("add"))+" ")])]),a("CustomTable",{attrs:{data:t.acceptedProducts,columns:[[t.$t("product"),"","product",1,"left"],[t.$t("dropOffLimit"),"","limit",1,"left"]],loading:!t.generatorReady,emptyStateMessage:t.$t("emptyState.acceptedProducts"),totalData:t.acceptedProducts.length,scrollWidth:200},on:{actionCall:t.deleteProduct}})],1):t._e(),t.updating&&t.generator?a("div",{staticClass:"detail-list detail-list-padded detail-list-actions"},[a("p",{staticClass:"detail-list-title"},[t._v(" "+t._s(t.$t("actions"))+" ")]),t.currentUser.agencyUser&&t.uHasGroup(t.USER_GROUP_AGENCY_MASTER)?a("button",{staticClass:"btn secondary-action-btn",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.openMoveModal(t.participant.id)}}},[t._v(" "+t._s(t.$t("moveGenerator"))+" ")]):t._e()]):t._e()])]),a("GeneratorHistoryFormModal",{attrs:{generator:t.generator,showGeneratorHistoryModal:t.showGeneratorHistoryModal},on:{getGenerator:t.getGenerator,getHistoryRecords:t.updateHistoryRecords,hideModal:function(e){t.showGeneratorHistoryModal=!1}}}),a("AcceptedProductModal",{attrs:{showModal:t.showProductModal,generator:t.generator},on:{close:t.updateAcceptedProducts}}),a("ConfirmationModal",{attrs:{showModal:t.showConfirmDeleteGenerator},on:{ok:t.deleteGenerator,cancel:t.cancelDelete}},[a("h3",{attrs:{slot:"header"},slot:"header"},[t._v(t._s(t.$t("confirmChange")))]),a("div",{attrs:{slot:"body"},slot:"body"},[t._v(" "+t._s(t.$t("deleteGeneratorConfirmation"))+" ")])]),a("MoveBusinessModal",{attrs:{showModal:t.showMoveModal,business:t.generator},on:{hideModal:function(e){t.showMoveModal=!1},movedBusiness:function(e){return t.$router.go(0)}}})],1)},s=[],r=a("a34a"),n=a.n(r),o=a("9ab4"),c=a("60a3"),l=a("bc3a"),u=a.n(l),p=a("2f62"),d=a("2fe1"),f=a("ea76"),m=a.n(f),v=a("1f24"),h=a("88c3"),_=a("2e75"),b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.showGeneratorHistoryModal?a("div",[a("transition",{attrs:{name:"modal"}},[a("div",{staticClass:"modal-mask"},[a("div",{staticClass:"modal-wrapper modal-dialog"},[a("div",{staticClass:"modal-container modal-content"},[a("div",{staticClass:"modal-header"},[a("p",{staticClass:"modal-title"},[t._v(t._s(t.$t("addHistoryRecord")))])]),a("div",{staticClass:"modal-body modal-body-minimum",style:{paddingBottom:"80px"}},[a("div",{staticClass:"flex-spacer"}),a("div",[a("div",{staticClass:"instruction-text instruction-top",domProps:{innerHTML:t._s(t.uFindInstruction(this.GENERATORFORM_INSTRUC_EFFECTIVEDATE))}})]),a("form",[a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("effectiveDate")))]),a("Datepicker",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"popup-style":{top:"100%",left:0},lang:"en","value-type":"format","data-vv-name":"Effective Date",type:"text",name:"Effective Date",placeholder:t.$t("dateFormat")},on:{change:t.getHistoryRecordAsOf},model:{value:t.effectiveDate,callback:function(e){t.effectiveDate=e},expression:"effectiveDate"}}),a("span",{staticClass:"form-error-message"},[t._v(t._s(t.errors.first("Effective Date")))])],1),a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("status")))]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.status,expression:"status"},{name:"validate",rawName:"v-validate",value:"required|min_value:0",expression:"'required|min_value:0'"}],staticClass:"custom-select",attrs:{disabled:t.effectiveDateValue,name:"generatorStatus"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.status=e.target.multiple?a:a[0]},function(e){e.preventDefault(),t.reasonCodesList=t.uGetReasonCodeList(t.status)}]}},[a("option",{attrs:{disabled:"",value:"-1"}},[t._v(t._s(t.$t("selectGeneratorStatus")))]),t._l(Object.keys(t.statusOptions),(function(e){return a("option",{key:e,domProps:{value:e}},[t._v(" "+t._s(t.statusOptions[e])+" ")])}))],2),a("span",{staticClass:"form-error-message"},[t._v(t._s(t.errors.first("generatorStatus")))])]),a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("reasonCode")))]),a("b-form-select",{staticClass:"custom-select",attrs:{disabled:-1===t.status||t.effectiveDateValue,options:t.reasonCodesList,name:"reasonCode"},scopedSlots:t._u([{key:"first",fn:function(){return[a("option",{attrs:{disabled:""},domProps:{value:-1}},[t._v(t._s(t.$t("selectReasonCode")))])]},proxy:!0}],null,!1,317660839),model:{value:t.reasonCode,callback:function(e){t.reasonCode=e},expression:"reasonCode"}}),a("span",{staticClass:"form-error-message"},[t._v(t._s(t.errors.first("reasonCode")))])],1),a("div",{staticClass:"form-group"},[a("div",{staticClass:"form-check"},[a("b-form-checkbox",{staticClass:"form-check-input",attrs:{disabled:t.effectiveDateValue,type:"checkbox"},model:{value:t.isDropOff,callback:function(e){t.isDropOff=e},expression:"isDropOff"}}),a("label",{staticClass:"form-check-label"},[t._v(" "+t._s(t.uFindInstruction(this.GENERATORFORM_DISPLAYNAME_DROP_OFF))+" ")]),a("Tooltip",{attrs:{tooltip:t.uFindInstruction(this.GENERATORFORM_INFOTIP_DROP_OFF)}})],1)])])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn secondary-action-btn",on:{click:function(e){return e.preventDefault(),t.$emit("hideModal")}}},[t._v(" "+t._s(t.$t("cancel"))+" ")]),a("button",{staticClass:"btn primary-action-btn",attrs:{disabled:t.submitted||t.errors.any()||!t.uHasGroup(t.USER_GROUP_AGENCY_MASTER),type:"submit"},on:{click:function(e){return e.preventDefault(),t.submitForm()}}},[t._v(" "+t._s(t.$t("ok"))+" ")])]),t.uHasGroup(t.USER_GROUP_AGENCY_MASTER)?t._e():a("div",{staticClass:"form-error-message--permissions"},[t._v(" "+t._s(t.$t("higherPermissionsRequired"))+" ")])])])])])],1):t._e()},y=[];function g(t){return g="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g(t)}function C(t,e,a,i,s,r,n){try{var o=t[r](n),c=o.value}catch(l){return void a(l)}o.done?e(c):Promise.resolve(c).then(i,s)}function T(t){return function(){var e=this,a=arguments;return new Promise((function(i,s){var r=t.apply(e,a);function n(t){C(r,i,s,n,o,"next",t)}function o(t){C(r,i,s,n,o,"throw",t)}n(void 0)}))}}function E(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function O(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function R(t,e,a){return e&&O(t.prototype,e),a&&O(t,a),t}function I(t,e){return!e||"object"!==g(e)&&"function"!==typeof e?P(t):e}function P(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function S(t){return S=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},S(t)}function N(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&w(t,e)}function w(t,e){return w=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},w(t,e)}var A=function(t){function e(){var t;return E(this,e),t=I(this,S(e).apply(this,arguments)),t.submitted=!1,t.status=-1,t.effectiveDate="",t.reasonCodesList=[],t.isDropOff=!1,t.reasonCode=-1,t.statusOptions={},t}return N(e,t),R(e,[{key:"updateshowGeneratorHistoryModal",value:function(t){this.showGeneratorHistoryModal=t,this.status=-1,this.effectiveDate="",this.reasonCodesList=[],this.isDropOff=!1,this.reasonCode=-1}},{key:"submitForm",value:function(){var t=T(n.a.mark((function t(){var e,a=this;return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.submitted=!0,t.next=3,this.$validator.validate();case 3:e=t.sent,e?u.a.post("".concat("http://localhost:8000/api","/generator-historys/"),{generator:this.generator.id,registration_status:this.status,reason_code:-1===this.reasonCode?0:this.reasonCode,is_drop_off:this.isDropOff,effective_date:this.effectiveDate}).then((function(){a.$emit("getHistoryRecords"),a.$emit("getGenerator"),a.$emit("hideModal")})).catch((function(t){a.uRequestErrorHandler(t)})).finally((function(){a.submitted=!1})):this.submitted=!1;case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getHistoryRecordAsOf",value:function(){var t=this;u.a.get("".concat("http://localhost:8000/api","/generator-historys/?effective_date=").concat(this.effectiveDate)+"&generator=".concat(this.generator.id)).then((function(e){var a=t.uRecursiveCamel(e.data);t.updateGeneratorDetails(a[0])})).catch((function(e){t.uRequestErrorHandler(e)}))}},{key:"updateGeneratorDetails",value:function(t){t?(this.status=t.registrationStatus,this.reasonCode=t.reasonCode,this.isDropOff=t.isDropOff,this.reasonCodesList=this.uGetReasonCodeList(this.status),this.reasonCode=-1,t.isOperating?this.statusOptions=this.PARTICIPANT_STATUS_OPERATING:this.statusOptions=this.PARTICIPANT_STATUS_REGISTERING):(this.status=-1,this.reasonCodesList=[],this.isDropOff=!0,this.reasonCode=-1,this.statusOptions=this.PARTICIPANT_STATUS)}},{key:"effectiveDateValue",get:function(){return""===this.effectiveDate}}]),e}(Object(d["c"])(_["a"]));Object(o["a"])([Object(c["b"])()],A.prototype,"generator",void 0),Object(o["a"])([Object(c["b"])()],A.prototype,"showGeneratorHistoryModal",void 0),Object(o["a"])([Object(c["d"])("showGeneratorHistoryModal")],A.prototype,"updateshowGeneratorHistoryModal",null),A=Object(o["a"])([Object(c["a"])({components:{Datepicker:m.a,Tooltip:v["a"]},computed:Object(p["b"])(["isLoggedIn","currentUser"])})],A);var k=A,D=k,x=(a("2674"),a("2877")),j=Object(x["a"])(D,b,y,!1,null,"e7c6acca",null),M=j.exports,U=a("0f7b"),$=a("7034"),F=a("c5af"),L=a("7358"),G=a("25bf"),B=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.showModal?a("div",[a("transition",{attrs:{name:"modal"}},[a("div",{staticClass:"modal-mask"},[a("div",{staticClass:"modal-wrapper modal-dialog"},[a("div",{staticClass:"modal-container modal-content"},[a("div",{staticClass:"modal-header"},[a("p",{staticClass:"modal-title"},[t._v(t._s(t.$t("addProduct")))])]),a("div",{staticClass:"modal-body"},[a("form",[a("div",{staticClass:"form-group"},[a("label",[t._v(" "+t._s(t.$t("product"))+" ")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.product,expression:"product"}],staticClass:"custom-select",attrs:{name:"product"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.product=e.target.multiple?a:a[0]}}},t._l(t.productCategories,(function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(" "+t._s(e.name[t.uLangFromLocale(t.$i18n.locale)])+" ")])})),0)]),a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("dropOffLimit")))]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"max:80",expression:"'max:80'"},{name:"model",rawName:"v-model",value:t.limit,expression:"limit"}],staticClass:"form-control",attrs:{type:"text",name:"Limit"},domProps:{value:t.limit},on:{input:function(e){e.target.composing||(t.limit=e.target.value)}}}),a("span",{staticClass:"form-error-message"},[t._v(t._s(t.errors.first("Limit")))])])])]),a("div",{staticClass:"modal-footer"},[t._t("footer",[a("button",{staticClass:"btn secondary-action-btn",on:{click:function(e){return e.preventDefault(),t.$emit("close")}}},[t._v(" "+t._s(t.$t("cancel"))+" ")]),a("button",{staticClass:"btn primary-action-btn",on:{click:function(e){return e.preventDefault(),t.addProduct()}}},[t._v(" "+t._s(t.$t("ok"))+" ")])])],2)])])])])],1):t._e()},Y=[];function q(t){return q="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},q(t)}function H(t,e,a,i,s,r,n){try{var o=t[r](n),c=o.value}catch(l){return void a(l)}o.done?e(c):Promise.resolve(c).then(i,s)}function V(t){return function(){var e=this,a=arguments;return new Promise((function(i,s){var r=t.apply(e,a);function n(t){H(r,i,s,n,o,"next",t)}function o(t){H(r,i,s,n,o,"throw",t)}n(void 0)}))}}function Q(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function z(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function W(t,e,a){return e&&z(t.prototype,e),a&&z(t,a),t}function J(t,e){return!e||"object"!==q(e)&&"function"!==typeof e?X(t):e}function X(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function K(t){return K=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},K(t)}function Z(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&tt(t,e)}function tt(t,e){return tt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},tt(t,e)}var et=function(t){function e(){var t;return Q(this,e),t=J(this,K(e).apply(this,arguments)),t.limit="",t.product=-1,t.productCategories=[],t}return Z(e,t),W(e,[{key:"updateShowModal",value:function(t){this.showModal=t}},{key:"mounted",value:function(){var t=V(n.a.mark((function t(){var e,a,i,s;return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.uConfig(this.ACCEPTED_PRODUCT_CATEGORIES),a=e.split(","),t.next=4,this.getList("product-categories","type=".concat(this.PRODUCT_CATEGORY_REGULAR));case 4:i=t.sent,s=i.data,this.productCategories=s.filter((function(t){return a.indexOf(t.code)>-1}));case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"addProduct",value:function(){var t=V(n.a.mark((function t(){return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.post("accepted-products",{generator:this.generator.id,category:this.product,drop_off_limit:this.limit});case 2:this.$emit("close");case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}]),e}(Object(d["c"])(_["a"],L["a"]));Object(o["a"])([Object(c["b"])()],et.prototype,"showModal",void 0),Object(o["a"])([Object(c["b"])()],et.prototype,"generator",void 0),Object(o["a"])([Object(c["d"])("showModal")],et.prototype,"updateShowModal",null),et=Object(o["a"])([Object(c["a"])({components:{},computed:Object(p["b"])(["currentUser"])})],et);var at=et,it=at,st=(a("d7dd"),Object(x["a"])(it,B,Y,!1,null,"5c837b17",null)),rt=st.exports,nt=a("42c2");function ot(t){return ot="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ot(t)}function ct(t,e){return ft(t)||dt(t,e)||ut(t,e)||lt()}function lt(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ut(t,e){if(t){if("string"===typeof t)return pt(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?pt(t,e):void 0}}function pt(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,i=new Array(e);a<e;a++)i[a]=t[a];return i}function dt(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var a=[],i=!0,s=!1,r=void 0;try{for(var n,o=t[Symbol.iterator]();!(i=(n=o.next()).done);i=!0)if(a.push(n.value),e&&a.length===e)break}catch(c){s=!0,r=c}finally{try{i||null==o["return"]||o["return"]()}finally{if(s)throw r}}return a}}function ft(t){if(Array.isArray(t))return t}function mt(t,e,a,i,s,r,n){try{var o=t[r](n),c=o.value}catch(l){return void a(l)}o.done?e(c):Promise.resolve(c).then(i,s)}function vt(t){return function(){var e=this,a=arguments;return new Promise((function(i,s){var r=t.apply(e,a);function n(t){mt(r,i,s,n,o,"next",t)}function o(t){mt(r,i,s,n,o,"throw",t)}n(void 0)}))}}function ht(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _t(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function bt(t,e,a){return e&&_t(t.prototype,e),a&&_t(t,a),t}function yt(t,e){return!e||"object"!==ot(e)&&"function"!==typeof e?gt(t):e}function gt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ct(t){return Ct=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ct(t)}function Tt(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Et(t,e)}function Et(t,e){return Et=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Et(t,e)}var Ot=function(t){function e(){var t;return ht(this,e),t=yt(this,Ct(e).apply(this,arguments)),t.submitted=!1,t.jurisdictions=[],t.productCategories=[],t.generator={},t.showMoveModal=!1,t.businessName="",t.businessLink="",t.legalName="",t.type=null,t.calculationMethod=null,t.operationsStartDate="",t.operationsEndDate="",t.hours="",t.collectors="",t.regDate="",t.isPublicBusiness=!1,t.showConfirmDeleteGenerator=!1,t.legacyRegNo="",t.acceptedProducts=[],t.jurisdiction="",t.status=-1,t.agencyName="",t.agencyCode="",t.showGeneratorHistoryModal=!1,t.showProductModal=!1,t.remittanceAppEnabled=!1,t.generatorReady=!1,t.generatorTypes=[],t}return Tt(e,t),bt(e,[{key:"updateGeneratorId",value:function(t){this.generatorId=t,this.generatorReady=!1,this.getGenerator()}},{key:"mounted",value:function(){var t=vt(n.a.mark((function t(){var e,a,i;return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.generatorTypes=this.uConstants(this.GENERATOR_TYPES_MASTER,this.uConfig(this.GENERATOR_TYPES)),this.remittanceAppEnabled=!0,this.updating&&this.generatorId&&(this.generatorReady=!1,this.getGenerator()),!this.currentUser){t.next=14;break}if(!this.currentUser.agencyUser){t.next=9;break}this.jurisdictions=this.currentUser.agencyUserJurisdictions,this.updating||1===this.jurisdictions.length&&(e=ct(this.jurisdictions,1),this.jurisdiction=e[0],this.getAgencyName()),t.next=14;break;case 9:return t.next=11,this.getList("jurisdictions","");case 11:a=t.sent,i=a.data,this.jurisdictions=i;case 14:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getAgencyName",value:function(){this.agencyName=this.jurisdiction.agency.name}},{key:"deleteGenerator",value:function(){var t=this;this.showConfirmDeleteGenerator=!1;var e=this.generator.participant.participant;u.a.delete("".concat("http://localhost:8000/api","/generators/").concat(this.generatorId,"/")).then((function(){t.$router.push({name:"participant",params:{participantId:String(e)}}),t.$router.go(0)})).catch((function(e){t.uRequestErrorHandler(e)}))}},{key:"submitForm",value:function(){var t=vt(n.a.mark((function t(){var e,a,i,s,r,o=this;return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.submitted=!0,t.next=3,this.$validator.validate();case 3:if(e=t.sent,e){t.next=8;break}this.submitted=!1,t.next=35;break;case 8:if(a={legal_name:this.legalName,type:this.type,calculation_method:this.calculationMethod,operations_start_date:this.operationsStartDate,hours:this.hours,collectors:this.collectors,is_public_business:this.isPublicBusiness,legacy_reg_no:this.legacyRegNo,reg_date:""!==this.regDate?this.regDate:null},this.updating){t.next=31;break}return a.jurisdiction_id=this.jurisdiction.id,a.participant={business_name:this.businessName,participant:this.parentParticipant.id,business_link:this.businessLink},t.prev=12,t.next=15,u.a.post("".concat("http://localhost:8000/api","/generators/"),a);case 15:return i=t.sent,t.next=18,u.a.get("".concat("http://localhost:8000/api","/auth/current_user/"));case 18:s=t.sent,r=this.uRecursiveCamel(s.data.user),this.$store.dispatch("update_user",r),this.$store.dispatch("update_token",s.data.token),this.$router.push({name:"participant",params:{participantId:i.data.participant_id}}),t.next=29;break;case 25:t.prev=25,t.t0=t["catch"](12),this.submitted=!1,this.uRequestErrorHandler(t.t0);case 29:t.next=35;break;case 31:a.operations_end_date=""===this.operationsEndDate?null:this.operationsEndDate,a.reg_date=this.regDate,a.participant={business_name:this.businessName,participant:this.participant.id,business_link:this.businessLink},u.a.put("".concat("http://localhost:8000/api","/generators/").concat(this.generatorId,"/"),a).then((function(){o.$emit("generatorUpdated")})).catch((function(t){o.uRequestErrorHandler(t)})).finally((function(){o.submitted=!1}));case 35:case"end":return t.stop()}}),t,this,[[12,25]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"getGenerator",value:function(){var t=vt(n.a.mark((function t(){return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.generatorReady=!1,t.next=3,this.get("generators",this.generatorId);case 3:this.generator=t.sent,this.businessName=this.generator.participant.businessName,this.businessLink=this.generator.participant.businessLink,this.jurisdiction=this.generator.jurisdiction,this.status=this.generator.status,this.legalName=this.generator.legalName,this.operationsStartDate=this.generator.operationsStartDate,this.operationsEndDate=this.generator.operationsEndDate,this.isPublicBusiness=this.generator.isPublicBusiness,this.hours=this.generator.hours,this.collectors=this.generator.collectors,this.regDate=this.generator.regDate,this.type=this.generator.type,this.calculationMethod=this.generator.calculationMethod,this.agencyName=this.generator.jurisdiction.agency.name,this.agencyCode=this.generator.jurisdiction.agency.code,this.legacyRegNo=this.generator.legacyRegNo,this.updateAcceptedProducts(),this.generatorReady=!0;case 22:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"updateAcceptedProducts",value:function(){var t=vt(n.a.mark((function t(){var e,a;return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.showProductModal=!1,t.next=3,this.getList("accepted-products","generator=".concat(this.generator.id));case 3:e=t.sent,a=e.data,this.formatProducts(a);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"formatProducts",value:function(t){this.acceptedProducts=[];for(var e=0;e<t.length;e+=1){var a=t[e];this.acceptedProducts.push({id:a.id,product:a.categoryName[this.uLangFromLocale(h["a"].locale)],limit:a.dropOffLimit,actions:[{actionCall:!0,canEdit:!0,delete:!0}]})}}},{key:"deleteProduct",value:function(){var t=vt(n.a.mark((function t(e){return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.delete("accepted-products",e.id);case 2:this.updateAcceptedProducts();case 3:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"openGeneratorHistoryForm",value:function(){this.showGeneratorHistoryModal=!0}},{key:"updateHistoryRecords",value:function(){this.$emit("historyUpdated")}},{key:"openConfirmDeleteGenerator",value:function(){this.showConfirmDeleteGenerator=!0}},{key:"cancelDelete",value:function(){this.showConfirmDeleteGenerator=!1}},{key:"openMoveModal",value:function(){this.showMoveModal=!0}}]),e}(Object(d["c"])(_["a"],L["a"]));Object(o["a"])([Object(c["b"])()],Ot.prototype,"updating",void 0),Object(o["a"])([Object(c["b"])()],Ot.prototype,"generatorId",void 0),Object(o["a"])([Object(c["b"])()],Ot.prototype,"participant",void 0),Object(o["a"])([Object(c["b"])()],Ot.prototype,"parentParticipant",void 0),Object(o["a"])([Object(c["b"])()],Ot.prototype,"generatorLoading",void 0),Object(o["a"])([Object(c["d"])("generatorId")],Ot.prototype,"updateGeneratorId",null),Ot=Object(o["a"])([Object(c["a"])({components:{Datepicker:m.a,Tooltip:v["a"],GeneratorHistoryFormModal:M,ConfirmationModal:U["a"],LoadingIcon:F["a"],CreateFinancialInvoice:$["a"],CustomTable:G["a"],AcceptedProductModal:rt,MoveBusinessModal:nt["a"]},computed:Object(p["b"])(["currentUser"])})],Ot);var Rt=Ot,It=Rt,Pt=(a("9588"),Object(x["a"])(It,i,s,!1,null,null,null));e["a"]=Pt.exports},b4cf:function(t,e,a){"use strict";var i=a("8111"),s=a.n(i);s.a},b4e6:function(t,e,a){},b986:function(t,e,a){"use strict";var i=a("9194"),s=a.n(i);s.a},bbb8:function(t,e,a){},bc14:function(t,e,a){"use strict";var i=a("af6d"),s=a.n(i);s.a},bcf1:function(t,e,a){},bd45:function(t,e,a){"use strict";var i=a("bbb8"),s=a.n(i);s.a},be0d:function(t,e,a){"use strict";var i=a("09fb"),s=a.n(i);s.a},c0fe:function(t,e,a){"use strict";var i=a("08e7"),s=a.n(i);s.a},d422:function(t,e,a){},d7dd:function(t,e,a){"use strict";var i=a("5f1d"),s=a.n(i);s.a},dcdc:function(t,e,a){},e286:function(t,e,a){"use strict";var i=a("44fa"),s=a.n(i);s.a},e2c1:function(t,e,a){"use strict";var i=a("019a"),s=a.n(i);s.a},e62e:function(t,e,a){},f10e:function(t,e,a){},fd67:function(t,e,a){"use strict";var i=a("25ac"),s=a.n(i);s.a}}]);