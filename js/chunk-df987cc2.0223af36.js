(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-df987cc2"],{"265b":function(t,e,i){},"28ac":function(t,e,i){"use strict";var n=i("265b"),a=i.n(n);a.a},"37b5":function(t,e,i){},"4e7a":function(t,e,i){"use strict";var n=i("f67b"),a=i.n(n);a.a},"611a":function(t,e,i){},6621:function(t,e,i){"use strict";var n=i("611a"),a=i.n(n);a.a},"782b":function(t,e,i){},"958c":function(t,e,i){"use strict";var n=i("782b"),a=i.n(n);a.a},"98ab":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"alert"},[i("font-awesome-icon",{style:{marginRight:"12px"},attrs:{icon:"exclamation"}}),t._v(" "+t._s(t.text)+" ")],1)},a=[],r=i("9ab4"),s=i("2b0e"),o=i("60a3");function c(t){return c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){return!e||"object"!==c(e)&&"function"!==typeof e?p(t):e}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(t){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},d(t)}function f(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}function h(t,e){return h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},h(t,e)}var v=function(t){function e(){return l(this,e),u(this,d(e).apply(this,arguments))}return f(e,t),e}(s["default"]);Object(r["a"])([Object(o["b"])()],v.prototype,"text",void 0),v=Object(r["a"])([Object(o["a"])({})],v);var m=v,b=m,g=(i("28ac"),i("2877")),_=Object(g["a"])(b,n,a,!1,null,"05e19326",null);e["a"]=_.exports},a957:function(t,e,i){},e11a:function(t,e,i){"use strict";var n=i("a957"),a=i.n(n);a.a},e882:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("Navbar",{attrs:{participant:t.participant,parentParticipant:t.parentParticipant,backButton:{name:"participants"}}},[i("template",{slot:"router-tabs"},[i("b-nav-item",[i("div",{staticClass:"router-tab",class:{"router-link-active":1===t.menuState},on:{click:function(e){return t.setState(1)}}},[t._v(" "+t._s(t.$t("fileAsVerb"))+" ")])]),i("b-nav-item",[i("div",{staticClass:"router-tab",class:{"router-link-active":2===t.menuState},on:{click:function(e){return t.setState(2)}}},[t._v(" "+t._s(t.$t("approve"))+" ")])]),i("b-nav-item",[i("div",{staticClass:"router-tab",class:{"router-link-active":3===t.menuState},on:{click:function(e){return t.setState(3)}}},[t._v(" "+t._s(t.$t("openInvoices"))+" ")])]),i("b-nav-item",[t.remittanceAppEnabled?i("div",{staticClass:"router-tab",class:{"router-link-active":4===t.menuState},on:{click:function(e){return t.setState(4)}}},[t._v(" "+t._s(t.$t("closedInvoices"))+" ")]):t._e()])],1)],2),i("div",{staticClass:"container parent-page-container action-navbar-container"},[1===t.menuState?i("div",[i("FilingsTable",{attrs:{participantId:t.participantId}})],1):t._e(),2===t.menuState?i("div",[i("SubmittedFilingsTable",{attrs:{participantId:t.participantId}})],1):t._e(),3===t.menuState?i("div",[i("InvoicesTable",{key:"open-invoices",attrs:{participantId:t.participantId,defaultStatus:this.INVOICE_STATUS_NOT_PAID}})],1):t._e(),4===t.menuState&&t.remittanceAppEnabled?i("div",[i("InvoicesTable",{key:"closed-invoices",attrs:{participantId:t.participantId,defaultStatus:this.INVOICE_STATUS_PAID}})],1):t._e()])],1)},a=[],r=i("a34a"),s=i.n(r),o=i("9ab4"),c=i("2fe1"),l=i("60a3"),u=i("2f62"),p=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"table-header"},[t.participant?i("p",{staticClass:"table-title"},[t._v(" "+t._s(t.participant.businessName)+" "),i("font-awesome-icon",{attrs:{icon:"circle"}}),t._v(" "+t._s(t.$t("filings"))+" ")],1):t._e(),i("div",{staticClass:"btn-container"},[t.submitted?i("LoadingIcon",{attrs:{buttonLoader:!0}}):t._e(),i("input",{directives:[{name:"validate",rawName:"v-validate"}],ref:"file",style:{opacity:0,display:"none"},attrs:{"data-vv-rules":"size|size:5000",type:"file",name:"file"},on:{change:t.getFile}}),""!==t.fileName?i("div",{staticClass:"form-control upload",attrs:{placeholder:t.fileName}},[t._v(" "+t._s(t.fileName)+" "),i("div",{staticClass:"cancel",on:{click:function(e){e.preventDefault(),t.fileName="",t.importing=!1}}},[i("font-awesome-icon",{attrs:{icon:"times"}})],1)]):t._e(),i("span",{staticClass:"form-error-message"},[t._v(t._s(t.errors.first("file")))]),t.filings.length>0&&""===t.fileName&&t.showExport&&t.uConfig(t.FILING_IMPORT_EXPORT_ENABLED)?i("button",{staticClass:"btn secondary-action-btn",attrs:{tag:"button"},on:{click:function(e){e.preventDefault(),t.$refs.file.click(),t.importing=!0}}},[t._v(" "+t._s(t.$t("import"))+" ")]):t._e(),t.filings.length>0&&""!==t.fileName&&t.showExport&&t.uConfig(t.FILING_IMPORT_EXPORT_ENABLED)?i("button",{staticClass:"btn primary-action-btn",attrs:{tag:"button"},on:{click:function(e){return e.preventDefault(),t.uploadFilings()}}},[t._v(" "+t._s(t.$t("upload"))+" ")]):t._e(),t.filings.length>0&&t.showExport&&t.uConfig(t.FILING_IMPORT_EXPORT_ENABLED)?i("button",{staticClass:"btn secondary-action-btn",attrs:{tag:"button"},on:{click:function(e){e.preventDefault(),t.showDownloadModal=!0}}},[t._v(" "+t._s(t.$t("download"))+" ")]):t._e(),t.currentUser.agencyUser&&t.uHasGroup(t.USER_GROUP_AGENCY_FILING)?i("router-link",{staticClass:"btn primary-action-btn",attrs:{tag:"button",to:{name:"newFiling",params:{participantId:t.participantId}}}},[t._v(" "+t._s(t.$t("createFiling"))+" ")]):t._e()],1)]),t.currentUser.agencyUser&&t.uHasGroup(t.USER_GROUP_AGENCY_FILING)?i("Alert",{attrs:{text:t.$t("usingFilingAsAgencyUser")}}):t._e(),i("CustomTable",{attrs:{data:t.filings,columns:[[t.$t("filingNo"),"filing_no","filingNo",1,"left"],[t.$t("remitter"),"participant__business_name","remitter",1,"left"],[t.uFindInstruction(this.DISPLAY_JURISDICTION),"participant__remitter__jurisdiction__code","jurisdiction",1,"left"],[t.$t("type"),"type","type",1,"left"],[t.$t("amount"),"","amount",1,"left"],[t.uFindInstruction(this.DISPLAY_FILING_PERIOD_NAME),"filing_period__end_date","filingPeriod",1,"left"],[t.$t("dueDate"),"","dueDate",1,"left"],[t.$t("status"),"","status",1,"left"]],loading:!t.filingsReady,emptyStateMessage:t.$t("emptyState.filings"),totalData:t.totalData,scrollWidth:600},on:{toggleOptions:t.toggleOptions,dataRequest:t.getFilingData}}),i("FilingsImportModal",{attrs:{showModal:t.showImportSummary,submittedFilings:t.submittedFilings,rejectedFilings:t.rejectedFilings},on:{cancelModal:function(e){t.showImportSummary=!1}}}),i("FilingsDownloadModal",{attrs:{showModal:t.showDownloadModal,filings:t.filings},on:{cancelModal:function(e){t.showDownloadModal=!1},downloadFilings:t.downloadFilings}})],1)},d=[],f=i("bc3a"),h=i.n(f),v=i("2e75"),m=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.showModal?i("div",[i("transition",{attrs:{name:"modal"}},[i("div",{staticClass:"modal-mask"},[i("div",{staticClass:"modal-wrapper modal-dialog"},[i("div",{staticClass:"modal-container modal-content medium-modal"},[i("div",{staticClass:"modal-header"},[i("p",{staticClass:"modal-title"},[t._v(" "+t._s(t.$t("filingsImportSummary"))+" ")])]),i("div",{staticClass:"modal-body"},[i("div",{staticClass:"modal-table-title"},[t._v(" "+t._s(t.$t("submittedFilings"))+" ")]),0!==t.submittedFilings?i("div",[i("div",{staticClass:"custom-table custom-table-blocked custom-table-selectable table-modal"},[i("div",{staticClass:"custom-table-header recipient-table-header"},[i("div",{staticClass:"custom-table-header-data left-align"},[t._v(" "+t._s(t.$t("filingNo"))+" ")]),i("div",{staticClass:"custom-table-header-data left-align"},[t._v(" "+t._s(t.$t("remitter"))+" ")]),i("div",{staticClass:"custom-table-header-data left-align"},[t._v(" "+t._s(t.$t("amount"))+" ")]),i("div",{staticClass:"custom-table-header-data left-align"},[t._v(" "+t._s(t.$t("status"))+" ")])]),i("div",{staticClass:"custom-table-body recipient-table-body"},t._l(t.submittedFilings,(function(e){return i("div",{key:e.id,staticClass:"custom-table-body-row"},[i("div",{staticClass:"custom-table-body-data left-align"},[t._v(" "+t._s(t.uFormatFilingNo(e))+" ")]),i("div",{staticClass:"custom-table-body-data left-align"},[t._v(" "+t._s(t.uFormatRegistrationNo(e.participant.remitter))+" Â· "+t._s(e.participant.businessName)+" ")]),i("div",{staticClass:"custom-table-body-data left-align"},[t._v(" "+t._s(t.uFormatPrice(e.totalAmount))+" ")]),i("div",{staticClass:"custom-table-body-data left-align"},[t._v(" "+t._s(t.FILING_STATUS[e.status])+" ")])])})),0)])]):t._e(),i("div",{staticClass:"modal-empty-table-text"},[t._v(" "+t._s(t.submittedFilings.length+t.$t("submittedFilingsTotal")+t.uGetTotalAmountFromFilings(t.submittedFilings))+" ")]),i("div",{staticClass:"modal-table-title"},[t._v(" "+t._s(t.$t("rejectedFilings"))+" ")]),0!==t.rejectedFilings.length?i("div",[i("div",{staticClass:"custom-table custom-table-blocked custom-table-selectable table-modal"},[i("div",{staticClass:"custom-table-header recipient-table-header"},[i("div",{staticClass:"custom-table-header-data left-align"},[t._v(" "+t._s(t.$t("filingNo"))+" ")]),i("div",{staticClass:"custom-table-header-data left-align"},[t._v(" "+t._s(t.$t("remitter"))+" ")]),i("div",{staticClass:"custom-table-header-data left-align"},[t._v(" "+t._s(t.$t("amount"))+" ")]),i("div",{staticClass:"custom-table-header-data left-align"},[t._v(" "+t._s(t.$t("status"))+" ")])]),i("div",{staticClass:"custom-table-body recipient-table-body"},t._l(t.rejectedFilings,(function(e){return i("div",{key:e.id,staticClass:"custom-table-body-row"},[i("div",{staticClass:"custom-table-body-data left-align"},[t._v(" "+t._s(e.filingNo)+" ")]),i("div",{staticClass:"custom-table-body-data left-align"},[t._v(" "+t._s(e.participant.remitter.registrationNo)+" Â· "+t._s(e.participant.businessName)+" Â· "+t._s(e.participant.remitter.jurisdiction.code)+" ")]),i("div",{staticClass:"custom-table-body-data left-align"},[t._v(" "+t._s(t.uFormatPrice(e.totalAmount))+" ")]),i("div",{staticClass:"custom-table-body-data left-align"},[t._v(" "+t._s(t.FILING_STATUS[e.status])+" ")])])})),0)])]):t._e(),i("div",{staticClass:"modal-empty-table-text"},[t._v(" "+t._s(t.rejectedFilings.length+t.$t("rejectedFilingsTotal")+t.uGetTotalAmountFromFilings(t.rejectedFilings))+" ")])]),i("div",{staticClass:"modal-footer"},[i("button",{staticClass:"btn primary-action-btn",on:{click:function(e){return e.preventDefault(),t.$emit("cancelModal")}}},[t._v(" "+t._s(t.$t("close"))+" ")])])])])])])],1):t._e()},b=[];function g(t){return g="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g(t)}function _(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function y(t,e){return!e||"object"!==g(e)&&"function"!==typeof e?I(t):e}function I(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function S(t){return S=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},S(t)}function C(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&O(t,e)}function O(t,e){return O=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},O(t,e)}var w=function(t){function e(){return _(this,e),y(this,S(e).apply(this,arguments))}return C(e,t),e}(Object(c["c"])(v["a"]));Object(o["a"])([Object(l["b"])()],w.prototype,"showModal",void 0),Object(o["a"])([Object(l["b"])()],w.prototype,"submittedFilings",void 0),Object(o["a"])([Object(l["b"])()],w.prototype,"rejectedFilings",void 0),w=Object(o["a"])([l["a"]],w);var F=w,N=F,P=(i("958c"),i("2877")),T=Object(P["a"])(N,m,b,!1,null,"71b1ab00",null),k=T.exports,E=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.showModal?i("transition",{attrs:{name:"modal"}},[i("div",{staticClass:"modal-mask"},[i("div",{staticClass:"modal-wrapper modal-dialog"},[i("div",{staticClass:"modal-container modal-content modal-body-minimum"},[i("div",{staticClass:"modal-header"},[i("p",{staticClass:"modal-title"},[t._v(" "+t._s(t.$t("downloadFilings"))+" ")])]),i("div",{staticClass:"modal-body"},[i("div",{staticClass:"form-group"},[i("label",[t._v(t._s(t.$t("filingPeriod")))]),i("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedPeriod,expression:"selectedPeriod"}],staticClass:"custom-select",attrs:{name:"filingPeriod"},on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selectedPeriod=e.target.multiple?i:i[0]}}},t._l(t.filingPeriods,(function(e){return i("option",{key:e.id,domProps:{value:e}},[t._v(" "+t._s(e.name)+" ")])})),0)]),i("div",{staticClass:"form-group"},[i("label",[t._v(t._s(t.$t("filingType")))]),i("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedType,expression:"selectedType"}],staticClass:"custom-select",attrs:{name:"filingType"},on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selectedType=e.target.multiple?i:i[0]}}},t._l(t.currentUser.filingTypes,(function(e){return i("option",{key:e,domProps:{value:e}},[t._v(" "+t._s(t.FILING_TYPES[e])+" ")])})),0)])]),i("div",{staticClass:"modal-footer"},[i("button",{staticClass:"btn secondary-action-btn",on:{click:function(e){return e.preventDefault(),t.$emit("cancelModal")}}},[t._v(" "+t._s(t.$t("cancel"))+" ")]),i("button",{staticClass:"btn primary-action-btn",on:{click:function(e){e.preventDefault(),t.$emit("downloadFilings",t.selectedPeriod,t.selectedType),t.$emit("cancelModal")}}},[t._v(" "+t._s(t.$t("ok"))+" ")])])])])])]):t._e()},A=[];function j(t){return j="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},j(t)}function R(t,e,i,n,a,r,s){try{var o=t[r](s),c=o.value}catch(l){return void i(l)}o.done?e(c):Promise.resolve(c).then(n,a)}function x(t){return function(){var e=this,i=arguments;return new Promise((function(n,a){var r=t.apply(e,i);function s(t){R(r,n,a,s,o,"next",t)}function o(t){R(r,n,a,s,o,"throw",t)}s(void 0)}))}}function D(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function L(t,e,i){return e&&$(t.prototype,e),i&&$(t,i),t}function U(t,e){return!e||"object"!==j(e)&&"function"!==typeof e?G(t):e}function G(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function M(t){return M=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},M(t)}function Y(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&V(t,e)}function V(t,e){return V=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},V(t,e)}var H=function(t){function e(){var t;return D(this,e),t=U(this,M(e).apply(this,arguments)),t.selectedPeriod={},t.filingPeriods=[],t}return Y(e,t),L(e,[{key:"onFilingsUpdate",value:function(){this.getFilingPeriods()}},{key:"mounted",value:function(){this.selectedType=this.FILING_TYPES_REGULAR}},{key:"getFilingPeriods",value:function(){var t=x(s.a.mark((function t(){var e,i,n,a;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.filings.length){t.next=16;break}return e=new Date,e.setDate(e.getDate()-365),i=this.uFormatDate(new Date(e)),n=this.uCurrentDate(),t.prev=5,t.next=8,h.a.get("".concat("http://localhost:8000/api","/filing-periods/?start_date=").concat(i,"&end_date=").concat(n));case 8:a=t.sent,this.filingPeriods=this.uRecursiveCamel(a.data),this.filingPeriods.length&&(this.selectedPeriod=this.filingPeriods[this.filingPeriods.length-1]),t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](5),this.uRequestErrorHandler(t.t0);case 16:case"end":return t.stop()}}),t,this,[[5,13]])})));function e(){return t.apply(this,arguments)}return e}()}]),e}(Object(c["c"])(v["a"]));Object(o["a"])([Object(l["b"])()],H.prototype,"showModal",void 0),Object(o["a"])([Object(l["b"])()],H.prototype,"filings",void 0),Object(o["a"])([Object(l["d"])("filings")],H.prototype,"onFilingsUpdate",null),H=Object(o["a"])([Object(l["a"])({computed:Object(u["b"])(["currentUser"])})],H);var B=H,J=B,q=Object(P["a"])(J,E,A,!1,null,null,null),W=q.exports,z=i("88c3"),X=i("98ab"),K=i("7358"),Q=i("1f24"),Z=i("25bf");function tt(t){return tt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tt(t)}function et(t,e){return st(t)||rt(t,e)||nt(t,e)||it()}function it(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function nt(t,e){if(t){if("string"===typeof t)return at(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?at(t,e):void 0}}function at(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function rt(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var i=[],n=!0,a=!1,r=void 0;try{for(var s,o=t[Symbol.iterator]();!(n=(s=o.next()).done);n=!0)if(i.push(s.value),e&&i.length===e)break}catch(c){a=!0,r=c}finally{try{n||null==o["return"]||o["return"]()}finally{if(a)throw r}}return i}}function st(t){if(Array.isArray(t))return t}function ot(t,e,i,n,a,r,s){try{var o=t[r](s),c=o.value}catch(l){return void i(l)}o.done?e(c):Promise.resolve(c).then(n,a)}function ct(t){return function(){var e=this,i=arguments;return new Promise((function(n,a){var r=t.apply(e,i);function s(t){ot(r,n,a,s,o,"next",t)}function o(t){ot(r,n,a,s,o,"throw",t)}s(void 0)}))}}function lt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ut(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function pt(t,e,i){return e&&ut(t.prototype,e),i&&ut(t,i),t}function dt(t,e){return!e||"object"!==tt(e)&&"function"!==typeof e?ft(t):e}function ft(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ht(t){return ht=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},ht(t)}function vt(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&mt(t,e)}function mt(t,e){return mt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},mt(t,e)}var bt=function(t){function e(){var t;return lt(this,e),t=dt(this,ht(e).apply(this,arguments)),t.filings=[],t.filingsReady=!0,t.participant={},t.showExport=!1,t.file="",t.fileName="",t.importing=!1,t.submitted=!1,t.totalData=0,t.ordering="ordering=",t.submittedFilings=[],t.offset=0,t.rejectedFilings=[],t.showImportSummary=!1,t.showDownloadModal=!1,t.updatedFilings=[],t}return vt(e,t),pt(e,[{key:"mounted",value:function(){this.setupTable(this.participantId)}},{key:"setupTable",value:function(){var t=ct(s.a.mark((function t(e){return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.get("participants",e);case 2:this.participant=t.sent,this.setShowImport(),this.getFilingData();case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getFilingData",value:function(){var t=ct(s.a.mark((function t(){var e,i,n,a,r,o,c=arguments;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=c.length>0&&void 0!==c[0]?c[0]:0,i=c.length>1&&void 0!==c[1]?c[1]:"",n=c.length>2&&void 0!==c[2]&&c[2],this.filingsReady){t.next=5;break}return t.abrupt("return");case 5:return n&&(this.filings=[]),this.filingsReady=!1,t.next=9,this.getList("filings","status=".concat(this.FILING_STATUS_NEW,"&status=").concat(this.FILING_STATUS_IN_PROGRESS)+"&participant=".concat(this.participantId),e,this.TABLE_LIMIT,i);case 9:a=t.sent,r=a.data,o=a.count,this.totalData=o,this.formatFilings(r),this.filingsReady=!0;case 15:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"formatFilings",value:function(t){for(var e=0;e<t.length;e+=1){var i=t[e],n=this.FILING_TYPES[i.type];i.type===this.FILING_TYPES_SPECIAL&&(n=this.uFindInstruction(this.DISPLAY_SPECIAL_FILER)),i.reason&&(n+=" ".concat(this.INVOICE_REASONS_MASTER[i.reason])),this.filings.push({id:i.id,filingNo:this.uFormatFilingNo(i),remitter:"".concat(this.uFormatRegistrationNo(i.participant.remitter))+" ".concat(i.participant.businessName),jurisdiction:i.participant.remitter.jurisdiction.code,type:n,amount:this.uFormatPrice(i.totalAmount),filingPeriod:i.filingPeriod.name,dueDate:this.uFilingDueDate(i.filingPeriod.endDate),status:{value:this.FILING_STATUS[i.status],pillStyle:this.FILING_STATUS_STYLES[i.status]},actions:[{routePath:{name:"filing",params:{filingId:i.id}},text:z["a"].tc("fileAsVerb")}],options:[{addNote:!0,source:this.NOTE_SOURCES_FILING,show:!1}],showOptions:!1})}}},{key:"toggleOptions",value:function(t){for(var e=t.showOptions,i=0;i<this.filings.length;i+=1)this.filings[i].showOptions=!1;t.showOptions=!e}},{key:"setShowImport",value:function(){var t=ct(s.a.mark((function t(){var e,i;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.participant.type!==this.PARTICIPANT_TYPES_GROUP){t.next=6;break}return t.next=3,this.getList("remitter-participants","parent_participant=".concat(this.participantId));case 3:e=t.sent,i=e.count,i>1&&(this.showExport=!0);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"downloadFilings",value:function(){var t=ct(s.a.mark((function t(e,i){var n;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.submitted=!0,t.prev=1,t.next=4,h.a.get("".concat("http://localhost:8000/api","/filings-download/?participant=").concat(this.participantId,"&filing_period=").concat(e.name,"&filing_type=").concat(i),{responseType:"blob"});case 4:n=t.sent,this.uDownloadBlobRequest(n.data,"TSBC-".concat(z["a"].tc("filingsImport"),".xlsx")),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),this.uRequestErrorHandler(t.t0);case 11:return t.prev=11,this.submitted=!1,t.finish(11);case 14:case"end":return t.stop()}}),t,this,[[1,8,11,14]])})));function e(e,i){return t.apply(this,arguments)}return e}()},{key:"uploadFilings",value:function(){var t=ct(s.a.mark((function t(){var e,i;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.submitted=!0,this.importing=!0,t.prev=2,e=new FormData,e.append("file",this.file),t.next=7,h.a.post("".concat("http://localhost:8000/api","/filings-import/?participant=").concat(this.participantId),e);case 7:i=t.sent,this.submittedFilings=this.uRecursiveCamel(i.data.submitted),this.rejectedFilings=this.uRecursiveCamel(i.data.skipped),this.fileName="",this.importing=!1,this.filings=[],this.showImportSummary=!0,this.getFilingData(),t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](2),this.uRequestErrorHandler(t.t0);case 20:return t.prev=20,this.submitted=!1,t.finish(20);case 23:case"end":return t.stop()}}),t,this,[[2,17,20,23]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"getFile",value:function(t){var e=t.target.files||t.dataTransfer.files;if(e.length){var i=et(e,1);this.file=i[0],this.fileName=this.file.name}}}]),e}(Object(c["c"])(v["a"],K["a"]));Object(o["a"])([Object(l["b"])()],bt.prototype,"participantId",void 0),Object(o["a"])([Object(l["d"])("participantId")],bt.prototype,"setupTable",null),bt=Object(o["a"])([Object(l["a"])({components:{CustomTable:Z["a"],FilingsImportModal:k,FilingsDownloadModal:W,Tooltip:Q["a"],Alert:X["a"]},computed:Object(u["b"])(["currentUser"])})],bt);var gt=bt,_t=gt,yt=(i("6621"),Object(P["a"])(_t,p,d,!1,null,"a7767d1a",null)),It=yt.exports,St=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"table-header"},[t.participant?i("p",{staticClass:"table-title"},[t._v(" "+t._s(t.participant.businessName)+" "),i("font-awesome-icon",{attrs:{icon:"circle"}}),t.defaultStatus===t.INVOICE_STATUS_NOT_PAID?i("span",[t._v(" "+t._s(t.$t("openInvoices")))]):t._e(),t.defaultStatus===t.INVOICE_STATUS_PAID?i("span",[t._v(" "+t._s(t.$t("closedInvoices")))]):t._e()],1):t._e(),t.defaultStatus===t.INVOICE_STATUS_NOT_PAID?[t.currentUser.agencyUser&&t.remittanceAppEnabled?i("router-link",{staticClass:"btn primary-action-btn",attrs:{tag:"button",to:{name:"deposits"}}},[t._v(" "+t._s(t.$t("payments"))+" ")]):t._e()]:t._e()],2),t.currentUser.agencyUser&&t.uHasGroup(t.USER_GROUP_AGENCY_FILING)?i("Alert",{attrs:{text:t.$t("usingFilingAsAgencyUser")}}):t._e(),i("CustomTable",{attrs:{data:t.invoices,columns:[[t.$t("invoiceNo"),"invoice_no","invoiceNo",.8,"left"],[t.$t("remitter"),"participant__business_name","remitter",1.2,"left"],[t.uFindInstruction(this.DISPLAY_JURISDICTION),"participant__remitter__jurisdiction__code","jurisdiction",.8,"left"],[t.$t("type"),"","type",1,"left"],[t.uFindInstruction(this.DISPLAY_FILING_PERIOD_NAME),"filing__filing_period__end_date","filingPeriod",1,"center"],[t.$t("invoiceDate"),"date","invoiceDate",1,"center"],[t.$t("amount"),"","amount",.8,"right"],[t.$t("tax"),"","tax",.8,"right"],[t.$t("totalAmount"),"","totalAmount",.8,"right"],[t.$t("balance"),"","balance",.8,"right"]],loading:!t.invoicesReady,emptyStateMessage:t.$t("emptyState.invoices"),totalData:t.totalData,scrollWidth:600,filter:t.filter},on:{actionCall:t.downloadInvoiceData,toggleOptions:t.toggleOptions,dataRequest:t.getInvoicesData}},[i("template",{slot:"filters"},[0===t.invoices.length&&"?"===t.filter&&t.invoicesReady?t._e():i("div",{staticClass:"table-filter-bar"},[i("div",{staticClass:"table-filter-icon"},[i("font-awesome-icon",{attrs:{icon:"search"}})],1),i("div",{staticClass:"table-filter"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.invoiceNo,expression:"invoiceNo"}],staticClass:"form-control",class:{inputActive:""!==t.invoiceNo},attrs:{type:"text",name:"Invoice No",placeholder:t.$t("invoiceNo")},domProps:{value:t.invoiceNo},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.createFilter())},input:function(e){e.target.composing||(t.invoiceNo=e.target.value)}}})]),i("div",{staticClass:"table-filter"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.registrationNo,expression:"registrationNo"}],staticClass:"form-control",class:{inputActive:""!==t.registrationNo},attrs:{type:"text",placeholder:t.$t("registrationNo")},domProps:{value:t.registrationNo},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.createFilter())},input:function(e){e.target.composing||(t.registrationNo=e.target.value)}}})]),i("div",{staticClass:"table-filter"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.remitterName,expression:"remitterName"}],staticClass:"form-control",class:{inputActive:""!==t.remitterName},attrs:{type:"text",name:"Organization Name",placeholder:t.$t("remitter")},domProps:{value:t.remitterName},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.createFilter())},input:function(e){e.target.composing||(t.remitterName=e.target.value)}}})]),t.uConfig(t.IS_MULTI_JURISDICTIONAL)?i("div",{staticClass:"table-filter"},[i("select",{directives:[{name:"model",rawName:"v-model",value:t.jursCode,expression:"jursCode"}],staticClass:"custom-select",class:{inputActive:""!==t.jursCode},on:{change:[function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.jursCode=e.target.multiple?i:i[0]},function(e){return e.preventDefault(),t.createFilter()}]}},[i("option",{attrs:{value:""}},[t._v(" "+t._s(t.uFindInstruction(this.DISPLAY_SELECT_JURISDICTION))+" ")]),t._l(t.currentUser.agencyUserJurisdictions,(function(e){return i("option",{key:e.code,domProps:{value:e.code}},[t._v(" "+t._s(e.code)+" ")])}))],2)]):t._e(),i("div",{staticClass:"table-filter",style:{opacity:.99}},[i("Datepicker",{style:{zIndex:9999},attrs:{"popup-style":{top:"52px",left:0},lang:"en","value-type":"format",type:"text",name:"Start Date",placeholder:t.$t("startDate")},on:{change:function(e){return t.createFilter()}},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}})],1),i("div",{staticClass:"table-filter",style:{opacity:.99}},[i("Datepicker",{style:{zIndex:9999},attrs:{"popup-style":{top:"52px",left:0},lang:"en","value-type":"format",type:"text",name:"End Date",placeholder:t.$t("endDate")},on:{change:function(e){return t.createFilter()}},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}})],1),i("div",{staticClass:"table-filter-clear"},[t.defaultFilter!==t.filter?i("font-awesome-icon",{attrs:{icon:"times",title:t.$t("clearFilter")},on:{click:function(e){return t.removeFilter()}}}):t._e()],1)])])],2),t.defaultStatus===t.INVOICE_STATUS_NOT_PAID?[t.invoices.length>0&&t.invoicesReady?i("div",{staticClass:"custom-table-body-row custom-table-body-footer"},[i("div",{staticClass:"custom-table-body-data left-align"},[t._v(" "+t._s(t.$t("remainingBalance"))+" ")]),i("div",{staticClass:"custom-table-body-data right-align"},[t._v(" "+t._s(t.uFormatPrice(t.totalBalance))+" ")]),i("div",{staticClass:"custom-table-body-data table-data-icon-width"}),i("div",{staticClass:"custom-table-body-data table-data-icon-width"})]):t._e(),t.invoices.length>0&&t.invoicesReady?i("div",{staticClass:"row instruction-text--large instruction-text--left",style:{marginTop:"24px"}},[i("div",{staticClass:"col-sm-6",domProps:{innerHTML:t._s(t.uFindInstruction(this.OPEN_INVOICES_INSTRUCT_1))}}),i("div",{staticClass:"col-sm-6",domProps:{innerHTML:t._s(t.uFindInstruction(this.OPEN_INVOICES_INSTRUCT_2))}})]):t._e()]:t._e()],2)},Ct=[],Ot=i("ea76"),wt=i.n(Ot);function Ft(t){return Ft="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ft(t)}function Nt(t,e,i,n,a,r,s){try{var o=t[r](s),c=o.value}catch(l){return void i(l)}o.done?e(c):Promise.resolve(c).then(n,a)}function Pt(t){return function(){var e=this,i=arguments;return new Promise((function(n,a){var r=t.apply(e,i);function s(t){Nt(r,n,a,s,o,"next",t)}function o(t){Nt(r,n,a,s,o,"throw",t)}s(void 0)}))}}function Tt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function kt(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Et(t,e,i){return e&&kt(t.prototype,e),i&&kt(t,i),t}function At(t,e){return!e||"object"!==Ft(e)&&"function"!==typeof e?jt(t):e}function jt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Rt(t){return Rt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Rt(t)}function xt(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Dt(t,e)}function Dt(t,e){return Dt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Dt(t,e)}var $t=function(t){function e(){var t;return Tt(this,e),t=At(this,Rt(e).apply(this,arguments)),t.participant={},t.invoices=[],t.invoicesReady=!0,t.invoiceNo="",t.remitterName="",t.registrationNo="",t.startDate="",t.endDate="",t.jursCode="",t.totalData=0,t.totalBalance=0,t.remittanceAppEnabled=!1,t.defaultFilter="",t.filter="",t}return xt(e,t),Et(e,[{key:"mounted",value:function(){var t=Pt(s.a.mark((function t(){return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.getInvoicesData(),t.next=3,this.get("participants",this.participantId);case 3:this.participant=t.sent,this.remittanceAppEnabled=!0;case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getInvoicesData",value:function(){var t=Pt(s.a.mark((function t(){var e,i,n,a,r,o,c,l=arguments;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=l.length>0&&void 0!==l[0]?l[0]:0,i=l.length>1&&void 0!==l[1]?l[1]:"",n=l.length>2&&void 0!==l[2]&&l[2],this.invoicesReady){t.next=5;break}return t.abrupt("return");case 5:return n&&(this.invoices=[]),a="",i?a=i:this.defaultStatus===this.INVOICE_STATUS_NOT_PAID?a="&ordering=participant__remitter__jurisdiction__code":this.defaultStatus===this.INVOICE_STATUS_PAID&&(a="&ordering=-date"),this.invoicesReady=!1,t.next=11,this.getList("invoices","".concat(this.filter,"status=").concat(this.defaultStatus,"&participant=").concat(this.participantId),e,this.TABLE_LIMIT,a);case 11:r=t.sent,o=r.data,c=r.count,this.totalData=c,this.formatInvoices(o),this.getTotalBalance(),this.invoicesReady=!0;case 18:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getTotalBalance",value:function(){this.totalBalance=0;for(var t=0;t<this.invoices.length;t+=1)this.totalBalance+=Number(this.invoices[t].balanceValue)}},{key:"formatInvoices",value:function(t){for(var e=0;e<t.length;e+=1){var i=t[e],n=this.INVOICE_TYPES[i.type];i.type===this.INVOICE_TYPES_SPECIAL&&(n=this.uFindInstruction(this.DISPLAY_SPECIAL_FILER)),i.reason&&(n+=" ".concat(this.INVOICE_REASONS_MASTER[i.reason])),this.invoices.push({id:i.id,invoiceNo:this.uFormatInvoiceNo(i),remitter:"".concat(this.uFormatRegistrationNo(i.participant.remitter))+" ".concat(i.participant.businessName),jurisdiction:i.participant.remitter.jurisdiction.code,type:n,filingPeriod:i.filing?i.filing.filingPeriod.name:z["a"].tc("unknown"),invoiceDate:i.date,amount:this.uFormatPrice(i.totalAmount),tax:this.uFormatPrice(i.modifiedTotalAmount-i.totalAmount),totalAmount:this.uFormatPrice(i.modifiedTotalAmount),balance:this.uFormatPrice(i.balance),balanceValue:i.balance,participant:i.participant,actions:[{actionCall:!0,download:!0}]})}}},{key:"downloadInvoiceData",value:function(t){this.downloadInvoice(t.id,t.invoiceNo,t.participant.remitter.jurisdiction.agency.code)}},{key:"toggleOptions",value:function(t){for(var e=t.showOptions,i=0;i<this.invoices.length;i+=1)this.invoices[i].showOptions=!1;t.showOptions=!e}},{key:"createFilter",value:function(){var t=Pt(s.a.mark((function t(){var e;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e="",this.invoiceNo&&(e+="invoice_no=".concat(this.invoiceNo,"&")),this.remitterName&&(e+="business_name=".concat(this.remitterName,"&")),this.registrationNo&&(e+="registration_no=".concat(this.registrationNo,"&")),this.startDate&&(e+="start_date=".concat(this.startDate,"&")),this.endDate&&(e+="end_date=".concat(this.endDate,"&")),this.jursCode&&(e+="jurisdiction_code=".concat(this.jursCode,"&")),this.filter=e;case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"removeFilter",value:function(){var t=Pt(s.a.mark((function t(){return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.invoices=[],this.invoiceNo="",this.remitterName="",this.registrationNo="",this.jursCode="",this.startDate="",this.endDate="",this.filter="";case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}]),e}(Object(c["c"])(v["a"],K["a"]));Object(o["a"])([Object(l["b"])()],$t.prototype,"participantId",void 0),Object(o["a"])([Object(l["b"])()],$t.prototype,"defaultStatus",void 0),$t=Object(o["a"])([Object(l["a"])({components:{Datepicker:wt.a,Alert:X["a"],CustomTable:Z["a"]}})],$t);var Lt=$t,Ut=Lt,Gt=(i("4e7a"),Object(P["a"])(Ut,St,Ct,!1,null,"f937ef58",null)),Mt=Gt.exports,Yt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"table-header"},[t.participant?i("p",{staticClass:"table-title"},[t._v(" "+t._s(t.participant.businessName)+" "),i("font-awesome-icon",{attrs:{icon:"circle"}}),t._v(" "+t._s(t.$t("approveFilings"))+" ")],1):t._e()]),t.currentUser.agencyUser&&t.uHasGroup(t.USER_GROUP_AGENCY_FILING)?i("Alert",{attrs:{text:t.$t("usingFilingAsAgencyUser")}}):t._e(),i("div",{staticClass:"custom-table custom-table-blocked custom-table-selectable"},[i("div",{staticClass:"custom-table-header"},[i("div",{staticClass:"custom-table-header-data left-align"},[i("a",{staticClass:"ordering-link",on:{click:function(e){return t.setOrdering("filing_no")}}},[t._v(" "+t._s(t.$t("filingNo"))+" ")])]),i("div",{staticClass:"custom-table-header-data left-align",style:{flex:"1.5"}},[i("a",{staticClass:"ordering-link",on:{click:function(e){return t.setOrdering("participant__business_name")}}},[t._v(" "+t._s(t.$t("remitter"))+" ")])]),t.uConfig(t.IS_MULTI_JURISDICTIONAL)?i("div",{staticClass:"custom-table-header-data left-align",style:{flex:"0.7"}},[i("a",{staticClass:"ordering-link",on:{click:function(e){return t.setOrdering("participant__remitter__jurisdiction__code")}}},[t._v(" "+t._s(t.uFindInstruction(this.DISPLAY_JURISDICTION))+" ")])]):t._e(),i("div",{staticClass:"custom-table-header-data left-align"},[i("a",{staticClass:"ordering-link",on:{click:function(e){return t.setOrdering("filing_period__end_date",!0)}}},[t._v(" "+t._s(t.uFindInstruction(this.DISPLAY_FILING_PERIOD_NAME))+" ")])]),i("div",{staticClass:"custom-table-header-data left-align"},[t._v(" "+t._s(t.$t("type"))+" ")]),i("div",{staticClass:"custom-table-header-data right-align"},[t._v(" "+t._s(t.$t("amount"))+" ")]),i("div",{staticClass:"custom-table-header-data table-data-icon-width"},[i("b-form-checkbox",{staticClass:"form-check-input",attrs:{type:"checkbox"},on:{change:function(e){return t.selectAllFilings()}},model:{value:t.selectAll,callback:function(e){t.selectAll=e},expression:"selectAll"}})],1)]),i("div",{staticClass:"custom-table-body"},t._l(t.filings,(function(e,n){return i("div",{key:e.id,staticClass:"custom-table-body-row",class:{bottomBlock:n+1<t.filings.length&&e.participant.remitter.jurisdiction.id!==t.filings[n+1].participant.remitter.jurisdiction.id,selectedRow:t.selectedFilings.includes(e.id)},on:{click:function(i){return t.toggleSelected(e.id)}}},[i("div",{staticClass:"custom-table-body-data left-align"},[i("router-link",{staticClass:"table-link",attrs:{to:{name:"filing",params:{filingId:e.id}}}},[t._v(" "+t._s(t.uFormatFilingNo(e))+" ")])],1),i("div",{staticClass:"custom-table-body-data left-align",style:{flex:"1.5"}},[t._v(" "+t._s(t.uFormatRegistrationNo(e.participant.remitter))+" Â· "+t._s(e.participant.businessName)+" ")]),t.uConfig(t.IS_MULTI_JURISDICTIONAL)?i("div",{staticClass:"custom-table-body-data left-align",style:{flex:"0.7"}},[t._v(" "+t._s(e.participant.remitter.jurisdiction.code)+" ")]):t._e(),i("div",{staticClass:"custom-table-body-data left-align"},[t._v(" "+t._s(e.filingPeriod.name)+" ")]),i("div",{staticClass:"custom-table-body-data left-align"},[e.type===t.FILING_TYPES_SPECIAL?[t._v(" "+t._s(t.uFindInstruction(t.DISPLAY_SPECIAL_FILER))+" ")]:[t._v(" "+t._s(t.FILING_TYPES[e.type])+" ")],e.reason?[t._v(" "+t._s(t.INVOICE_REASONS_MASTER[e.reason])+" ")]:t._e()],2),e.isNil?t._e():i("div",{staticClass:"custom-table-body-data right-align"},[t._v(" "+t._s(t.uFormatPrice(e.totalAmount))+" ")]),e.isNil?i("div",{staticClass:"custom-table-body-data right-align"},[i("span",{staticClass:"generic-warning-message"},[t._v(t._s(t.$t("isNilReturn")))])]):t._e(),t.uHasFilingType(e.type)?i("div",{staticClass:"custom-table-body-data form-check-table-data table-data-icon-width"},[i("b-form-checkbox",{staticClass:"form-check-input",attrs:{type:"checkbox",checked:t.selectedFilings.includes(e.id)},on:{change:function(i){return t.toggleSelected(e.id)}}})],1):t._e(),t.uHasFilingType(e.type)?t._e():i("div",{staticClass:"flex-spacer",style:{flex:"0",flexBasis:"52px"}})])})),0),i("div",{staticClass:"table-empty-loading-state"},[t.filingsReady?t._e():i("div",{staticClass:"table-loading"},[i("LoadingIcon")],1),0===t.filings.length&&t.filingsReady?i("div",{staticClass:"table-empty-state large-text"},[t._v(" "+t._s(t.$t("emptyState.filingsApprove"))+" ")]):t._e()]),0!==t.filings.length?i("div",{staticClass:"custom-table-body-row custom-table-body-footer"},[i("div",{staticClass:"custom-table-body-data left-align"},[t._v(" "+t._s(t.$t("amountBeforeTax"))+" ")]),i("div",{staticClass:"custom-table-body-data right-align"},[t._v(" "+t._s(t.uGetTotalAmountFromFilings(t.listSelectedFilings()))+" ")])]):t._e()]),i("div",{staticClass:"table-action-form"},[i("div",{staticClass:"instruction-text",domProps:{innerHTML:t._s(t.uFindInstruction(this.FILINGREVIEWPAGE_INSTRUC_DECLA))}}),i("div",{staticClass:"filing-approve-block"},[i("span",{staticClass:"instruction-text",domProps:{innerHTML:t._s(t.uFindInstruction(this.FILINGREVIEWPAGE_INSTRUC_APPRO))}}),i("b-form-checkbox",{staticClass:"form-check-input custom-control-inline",attrs:{type:"checkbox"},model:{value:t.certifyChecked,callback:function(e){t.certifyChecked=e},expression:"certifyChecked"}})],1),i("div",[i("div",{staticClass:"table-footer-options"},[i("button",{staticClass:"btn primary-action-btn",attrs:{disabled:t.submitted||!t.certifyChecked||0==t.selectedFilings.length||!(t.uHasGroup(t.USER_GROUP_PARTICIPANT_APPROVER)||t.uHasGroup(t.USER_GROUP_AGENCY_FILING))},on:{click:function(e){return t.approveSelectedFilings()}}},[t._v(" "+t._s(t.$t("approve"))+" ")]),i("button",{staticClass:"btn secondary-action-btn",attrs:{disabled:t.submitted||0==t.selectedFilings.length||!(t.uHasGroup(t.USER_GROUP_PARTICIPANT_APPROVER)||t.uHasGroup(t.USER_GROUP_AGENCY_FILING)),type:"submit"},on:{click:function(e){return e.preventDefault(),t.rejectSelectedFilings()}}},[t._v(" "+t._s(t.$t("rejectFiling"))+" ")]),t.submitted?i("LoadingIcon",{style:{position:"relative",top:"7px"},attrs:{buttonLoader:!0}}):t._e()],1)])]),t.uHasGroup(t.USER_GROUP_PARTICIPANT_APPROVER)||t.uHasGroup(t.USER_GROUP_AGENCY_FILING)?t._e():i("div",{staticClass:"form-error-message--permissions message-no-top-padding"},[t._v(" "+t._s(t.$t("higherPermissionsRequiredApprove"))+" ")]),i("ConfirmationModal",{attrs:{showModal:t.showNilFilingsModal,hideCancel:!0},on:{ok:t.closeModal}},[i("h3",{attrs:{slot:"header"},slot:"header"},[t._v(t._s(t.$t("nilFilingsApproveSuccess")))]),i("div",{attrs:{slot:"body"},slot:"body"},[i("p",[t._v(t._s(t.$t("nilFilingsApproveSuccessMessage")))]),i("p",[t._v(t._s(t.$t("invoicesCreatedSuccessfully"))+": ")]),i("ul",t._l(t.invoices,(function(e){return i("li",{key:e.id},[t._v(" "+t._s(e.invoiceNo)+" "),i("span",{on:{click:function(i){return i.preventDefault(),t.downloadInvoice(e.id,e.invoiceNo,e.participant.remitter.jurisdiction.agency.code)}}},[i("font-awesome-icon",{attrs:{icon:"download",title:t.$t("downloadInvoice")}})],1)])})),0)])])],1)},Vt=[],Ht=i("c5af"),Bt=i("0f7b");function Jt(t){return Jt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jt(t)}function qt(t,e,i,n,a,r,s){try{var o=t[r](s),c=o.value}catch(l){return void i(l)}o.done?e(c):Promise.resolve(c).then(n,a)}function Wt(t){return function(){var e=this,i=arguments;return new Promise((function(n,a){var r=t.apply(e,i);function s(t){qt(r,n,a,s,o,"next",t)}function o(t){qt(r,n,a,s,o,"throw",t)}s(void 0)}))}}function zt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Xt(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Kt(t,e,i){return e&&Xt(t.prototype,e),i&&Xt(t,i),t}function Qt(t,e){return!e||"object"!==Jt(e)&&"function"!==typeof e?Zt(t):e}function Zt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function te(t){return te=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},te(t)}function ee(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ie(t,e)}function ie(t,e){return ie=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},ie(t,e)}var ne=function(t){function e(){var t;return zt(this,e),t=Qt(this,te(e).apply(this,arguments)),t.filings=[],t.selectedFilings=[],t.selectAll=!1,t.submitted=!1,t.participant={},t.certifyChecked=!1,t.filingsReady=!1,t.ordering="ordering=",t.approvedFilings=[],t.invoices=[],t.showNilFilingsModal=!1,t}return ee(e,t),Kt(e,[{key:"mounted",value:function(){var t=Wt(s.a.mark((function t(){return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.getFilingData(),t.next=3,this.get("participants",this.participantId);case 3:this.participant=t.sent;case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getFilingData",value:function(){var t=Wt(s.a.mark((function t(){var e,i;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.filingsReady=!1,t.next=3,this.getList("filings","status=".concat(this.FILING_STATUS_SUBMITTED,"&participant=").concat(this.participantId),0,0,"".concat(this.ordering));case 3:e=t.sent,i=e.data,this.filings=i,this.filingsReady=!0;case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"toggleSelected",value:function(t){if(this.selectedFilings.includes(t)){var e=this.selectedFilings.indexOf(t);e>-1&&this.selectedFilings.splice(e,1)}else this.selectedFilings.push(t)}},{key:"selectAllFilings",value:function(){var t=this;this.selectAll=!this.selectAll,this.selectAll?(this.selectedFilings=[],this.filings.forEach((function(e){t.uHasFilingType(e.type)&&t.selectedFilings.push(e.id)}))):this.selectedFilings=[]}},{key:"listSelectedFilings",value:function(){for(var t=[],e=0;e<this.selectedFilings.length;e+=1)for(var i=this.selectedFilings[e],n=0;n<this.filings.length;n+=1)this.filings[n].id===i&&t.push(this.filings[n]);return t}},{key:"getNilInvoice",value:function(){var t=Wt(s.a.mark((function t(e){var i,n;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getList("invoices","filing=".concat(e));case 2:i=t.sent,n=i.data,this.invoices=this.invoices.concat(n);case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"approveSelectedFilings",value:function(){var t=Wt(s.a.mark((function t(){var e,i,n,a,r=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.submitted=!0,e=0;case 2:if(!(e<this.selectedFilings.length)){t.next=9;break}return i=this.selectedFilings[e],t.next=6,h.a.patch("".concat("http://localhost:8000/api","/filings/").concat(i,"/"),{status:this.FILING_STATUS_APPROVED,approved_by:this.currentUser.id}).then((function(t){t.data.is_nil&&(r.approvedFilings=r.approvedFilings.concat(r.uRecursiveCamel(t.data)))})).catch((function(t){r.submitted=!1,r.uRequestErrorHandler(t)}));case 6:e+=1,t.next=2;break;case 9:if(this.selectedFilings=[],this.selectAll=!1,this.approvedFilings.length>=1&&this.uConfig(this.SHOW_NIL_INVOICES_CREATED)){for(n=0;n<this.approvedFilings.length;n+=1)a=this.approvedFilings[n].id,this.getNilInvoice(a);this.showNilFilingsModal=!0}else this.$router.push({name:"filingStart",params:{menuState:"3",participantId:String(this.participantId)}});case 12:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"closeModal",value:function(){this.showNilFilingsModal=!1,this.$router.push({name:"filingStart",params:{menuState:"3",participantId:String(this.participantId)}})}},{key:"rejectSelectedFilings",value:function(){var t=Wt(s.a.mark((function t(){var e,i,n,a=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(e=[],i=0;i<this.selectedFilings.length;i+=1)n=this.selectedFilings[i],e.push(h.a.patch("".concat("http://localhost:8000/api","/filings/").concat(n,"/"),{status:this.FILING_STATUS_IN_PROGRESS,submitted_by:null}));h.a.all(e).then((function(){a.selectedFilings=[],a.selectAll=!1,a.getFilingData()})).catch((function(t){a.uRequestErrorHandler(t)}));case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"setOrdering",value:function(t,e){this.ordering=this.uSetOrdering(this.ordering,t,e),this.getFilingData()}}]),e}(Object(c["c"])(v["a"],K["a"]));Object(o["a"])([Object(l["b"])()],ne.prototype,"participantId",void 0),ne=Object(o["a"])([Object(l["a"])({components:{LoadingIcon:Ht["a"],Alert:X["a"],ConfirmationModal:Bt["a"]},computed:Object(u["b"])(["currentUser"])})],ne);var ae=ne,re=ae,se=(i("e11a"),Object(P["a"])(re,Yt,Vt,!1,null,"8f0d954e",null)),oe=se.exports,ce=i("d178");function le(t){return le="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},le(t)}function ue(t,e,i,n,a,r,s){try{var o=t[r](s),c=o.value}catch(l){return void i(l)}o.done?e(c):Promise.resolve(c).then(n,a)}function pe(t){return function(){var e=this,i=arguments;return new Promise((function(n,a){var r=t.apply(e,i);function s(t){ue(r,n,a,s,o,"next",t)}function o(t){ue(r,n,a,s,o,"throw",t)}s(void 0)}))}}function de(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fe(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function he(t,e,i){return e&&fe(t.prototype,e),i&&fe(t,i),t}function ve(t,e){return!e||"object"!==le(e)&&"function"!==typeof e?me(t):e}function me(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function be(t){return be=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},be(t)}function ge(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_e(t,e)}function _e(t,e){return _e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},_e(t,e)}var ye=function(t){function e(){var t;return de(this,e),t=ve(this,be(e).apply(this,arguments)),t.menuState=1,t.participantId=0,t.remittanceAppEnabled=!1,t.parentParticipant={},t.participant={},t}return ge(e,t),he(e,[{key:"created",value:function(){this.menuState=Number(this.$route.params.menuState)||1,this.participantId=Number(this.$route.params.participantId),this.setState(this.menuState)}},{key:"updateProduct",value:function(t){this.menuState=Number(t.params.menuState),this.participantId=Number(t.params.participantId),this.setState(this.menuState),this.getParticipantData()}},{key:"mounted",value:function(){this.remittanceAppEnabled=!0,this.getParticipantData()}},{key:"getParticipantData",value:function(){var t=pe(s.a.mark((function t(){return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.get("participants",this.participantId);case 2:if(this.participant=t.sent,!this.participant||this.participant.type!==this.PARTICIPANT_TYPES_REMITTER){t.next=7;break}return t.next=6,this.get("participants",this.participant.participant);case 6:this.parentParticipant=t.sent;case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"setState",value:function(t){switch(this.menuState=t,this.$router.currentRoute.params.menuState!==String(t)&&this.$router.replace({name:"filingStart",params:{menuState:String(t),participantId:String(this.participantId)}}),t){case 2:this.uSetSupportToggle(this.FILINGREVIEWPAGE_INSTRUC_INTRO);break;case 3:this.uSetSupportToggle(this.FILINGOPEN_INSTRUC_INTRO);break;case 4:this.uSetSupportToggle(this.FILINGCLOSED_INSTRUC_INFO);break;default:this.uSetSupportToggle(this.FILINGHOMEPAGE_INSTRUC_INTRO)}}}]),e}(Object(c["c"])(v["a"],K["a"]));Object(o["a"])([Object(l["d"])("$route")],ye.prototype,"updateProduct",null),ye=Object(o["a"])([Object(l["a"])({components:{Navbar:ce["a"],FilingsTable:It,InvoicesTable:Mt,SubmittedFilingsTable:oe},computed:Object(u["b"])(["currentUser","instructions"])})],ye);var Ie=ye,Se=Ie,Ce=(i("eb99"),Object(P["a"])(Se,n,a,!1,null,"07342ae0",null));e["default"]=Ce.exports},eb99:function(t,e,i){"use strict";var n=i("37b5"),a=i.n(n);a.a},f67b:function(t,e,i){}}]);