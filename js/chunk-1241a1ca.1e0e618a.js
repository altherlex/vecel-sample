(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1241a1ca"],{"1f24":function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.tooltip?n("div",{staticClass:"toggle-tooltip"},[n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.html",modifiers:{hover:!0,html:!0}}],class:{"error-tooltip":t.error},attrs:{title:t.tooltip}},[t.error?t._e():n("font-awesome-icon",{attrs:{icon:"question-circle"}}),t.error?n("font-awesome-icon",{attrs:{icon:"exclamation-circle"}}):t._e()],1)],1):t._e()},r=[],a=n("9ab4"),i=n("2b0e"),c=n("60a3");function s(t){return s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){return!e||"object"!==s(e)&&"function"!==typeof e?d(t):e}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(t){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},p(t)}function f(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&v(t,e)}function v(t,e){return v=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},v(t,e)}var h=function(t){function e(){return u(this,e),l(this,p(e).apply(this,arguments))}return f(e,t),e}(i["default"]);Object(a["a"])([Object(c["b"])()],h.prototype,"tooltip",void 0),Object(a["a"])([Object(c["b"])()],h.prototype,"error",void 0),h=Object(a["a"])([Object(c["a"])({})],h);var _=h,m=_,b=(n("e793"),n("2877")),y=Object(b["a"])(m,o,r,!1,null,"2ae22277",null);e["a"]=y.exports},3712:function(t,e,n){},7358:function(t,e,n){"use strict";var o=n("9ab4"),r=n("60a3"),a=n("bc3a"),i=n.n(a),c=n("2fe1"),s=n("2ef0"),u=n.n(s),l=n("2e75");function d(t){return d="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function v(t,e,n){return e&&f(t.prototype,e),n&&f(t,n),t}function h(t,e){return!e||"object"!==d(e)&&"function"!==typeof e?_(t):e}function _(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function m(t){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},m(t)}function b(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}function y(t,e){return y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},y(t,e)}var g=function(t){function e(){return p(this,e),h(this,m(e).apply(this,arguments))}return b(e,t),v(e,[{key:"removeUndefined",value:function(t){return Object.keys(t).forEach((function(e){void 0===t[e]&&delete t[e]})),t}},{key:"toQuery",value:function(t){return t=this.removeUndefined(t),Object.keys(t).map((function(e){return"".concat(u.a.snakeCase(e),"=").concat(encodeURIComponent(t[e]))})).join("&")}},{key:"getList",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";return i.a.get("".concat("http://localhost:8000/api","/").concat(e,"/?").concat(n,"&limit=").concat(r,"&offset=").concat(o*r,"&").concat(a)).then((function(e){return r>0?{data:t.uRecursiveCamel(e.data.results),count:e.data.count}:{data:t.uRecursiveCamel(e.data),count:e.data.length}})).catch((function(e){return t.uRequestErrorHandler(e),{data:[],count:0}}))}},{key:"get",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0;return i.a.get("".concat("http://localhost:8000/api","/").concat(e,"/").concat(n,"/")).then((function(e){return t.uRecursiveCamel(e.data)})).catch((function(e){t.uRequestErrorHandler(e)}))}},{key:"delete",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0;return i.a.delete("".concat("http://localhost:8000/api","/").concat(e,"/").concat(n,"/")).then().catch((function(e){t.uRequestErrorHandler(e)}))}},{key:"post",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0;return i.a.post("".concat("http://localhost:8000/api","/").concat(e,"/"),n).then((function(e){return t.uRecursiveCamel(e.data)})).catch((function(e){t.uRequestErrorHandler(e)}))}},{key:"put",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0;return i.a.put("".concat("http://localhost:8000/api","/").concat(e,"/").concat(n,"/"),o).then((function(e){return t.uRecursiveCamel(e.data)})).catch((function(e){t.uRequestErrorHandler(e)}))}},{key:"patch",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0;return i.a.patch("".concat("http://localhost:8000/api","/").concat(e,"/").concat(n,"/"),o).then((function(e){return t.uRecursiveCamel(e.data)})).catch((function(e){t.uRequestErrorHandler(e)}))}},{key:"downloadInvoice",value:function(t,e,n){var o=this;i()({method:"get",url:"".concat("http://localhost:8000/api","/report-invoice/").concat(t,"/"),responseType:"blob"}).then((function(t){o.uDownloadBlobRequest(t.data,"".concat(n," Invoice #").concat(e,".pdf"))})).catch((function(t){o.uRequestErrorHandler(t)}))}}]),e}(Object(c["c"])(l["a"]));g=Object(o["a"])([Object(r["a"])({})],g),e["a"]=g},9568:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.financialProduct?n("div",[!t.updating&&t.uHasGroup(t.USER_GROUP_AGENCY_MASTER)?n("p",{staticClass:"form-title"},[t._v(" "+t._s(t.$t("createFinancialProduct"))+" ")]):t.updating&&t.uHasGroup(t.USER_GROUP_AGENCY_MASTER)?n("p",{staticClass:"form-title"},[t._v(" "+t._s(t.$t("updateFinancialProduct"))+" ")]):n("p",{staticClass:"form-title"},[t._v(" "+t._s(t.$t("viewFinancialProduct"))+" ")])]):n("div",[!t.updating&&t.uHasGroup(t.USER_GROUP_AGENCY_MASTER)?n("p",{staticClass:"form-title"},[t._v(" "+t._s(t.uFindInstruction(this.DISPLAY_CREATE_JURISDICTIONAL_PRODUCT))+" ")]):t.updating&&t.uHasGroup(t.USER_GROUP_AGENCY_MASTER)?n("p",{staticClass:"form-title"},[t._v(" "+t._s(t.uFindInstruction(this.DISPLAY_UPDATE_JURISDICTIONAL_PRODUCT))+" ")]):n("p",{staticClass:"form-title"},[t._v(" "+t._s(t.uFindInstruction(this.DISPLAY_VIEW_JURISDICTIONAL_PRODUCT))+" ")])]),n("form",[t.updating?t._e():n("div",{staticClass:"form-group"},[n("label",[t._v(" "+t._s(t.$t("product"))+" "),n("Tooltip",{attrs:{tooltip:t.uFindInstruction(this.VARIANTFORM_INFOTIP_PROD_DROPDOWN)}})],1),n("select",{directives:[{name:"model",rawName:"v-model",value:t.product,expression:"product"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"custom-select",attrs:{name:"product"},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.product=e.target.multiple?n:n[0]}}},[n("option",{attrs:{disabled:"",value:""}},[t._v(t._s(t.$t("selectProduct")))]),t._l(t.products,(function(e){return n("option",{key:e.id,domProps:{value:e}},[t._v(" "+t._s(e.name[t.uLangFromLocale(t.$i18n.locale)])+" ")])}))],2),n("span",{staticClass:"form-error-message"},[t._v(t._s(t.errors.first("product")))])]),t.updating?n("div",{staticClass:"form-group"},[n("label",[t._v(t._s(t.$t("endDate")))]),n("Datepicker",{attrs:{"not-before":t.uCurrentDateTimePlusDays(1),lang:"en",disabled:t.disableEndDateField,"value-type":"format",type:"text",name:"End Date",placeholder:t.$t("dateFormat")},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}})],1):t._e(),t.updating||1===t.jurisdictions.length?t._e():n("div",{staticClass:"form-group"},[n("label",[t._v(" "+t._s(t.uFindInstruction(this.DISPLAY_JURISDICTION))+" ")]),n("select",{directives:[{name:"model",rawName:"v-model",value:t.jurisdiction,expression:"jurisdiction"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"custom-select",attrs:{name:"jurisdiction"},on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.jurisdiction=e.target.multiple?n:n[0]},function(e){return t.resetTaxCodes()}]}},[n("option",{attrs:{disabled:"",value:""}},[t._v(" "+t._s(t.uFindInstruction(this.DISPLAY_SELECT_JURISDICTION))+" ")]),t._l(t.jurisdictions,(function(e){return n("option",{key:e.id,domProps:{value:e}},[t._v(" "+t._s(e.name[t.uLangFromLocale(t.$i18n.locale)])+" ")])}))],2),n("span",{staticClass:"form-error-message"},[t._v(t._s(t.errors.first("jurisdiction")))])]),n("div",{staticClass:"form-group"},[n("label",[t._v(" "+t._s(t.$t("taxCode"))+" ")]),n("select",{directives:[{name:"model",rawName:"v-model",value:t.taxCode,expression:"taxCode"}],staticClass:"custom-select",attrs:{disabled:!t.jurisdiction,name:"taxCode"},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.taxCode=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"-1"}},[t._v(" "+t._s(t.$t("selectTaxCode")))]),t._l(t.taxCodes,(function(e){return n("option",{key:e.id,domProps:{value:e.id}},[t._v(" "+t._s(e.name[t.uLangFromLocale(t.$i18n.locale)])+" ")])}))],2)]),n("div",[1===t.jurisdictions.length?n("div",{staticClass:"detail-list"},[n("p",[n("span",{staticClass:"list-label"},[t._v(t._s(t.uFindInstruction(this.DISPLAY_JURISDICTION))+":")]),t._v(" "+t._s(t.jurisdiction.name[t.uLangFromLocale(t.$i18n.locale)]))])]):t._e(),t.product.name?n("div",{staticClass:"detail-list"},[n("p",[n("span",{staticClass:"list-label"},[t._v(t._s(t.$t("name"))+":")]),t._v(" "+t._s(t.product.name[t.uLangFromLocale(t.$i18n.locale)]))]),n("p",[n("span",{staticClass:"list-label"},[t._v(t._s(t.$t("category"))+":")]),t._v(" "+t._s(t.product.productCategory.name[t.uLangFromLocale(t.$i18n.locale)])+" ")]),n("p",[n("span",{staticClass:"list-label"},[t._v(t._s(t.$t("code"))+":")]),t._v(" "+t._s(t.product.code))]),n("p",[n("span",{staticClass:"list-label"},[t._v(t._s(t.$t("unit"))+":")]),t._v(" "+t._s(t.PRODUCT_UNITS_MASTER[t.product.quantityUnit])+" ")]),n("p",[n("span",{staticClass:"list-label"},[t._v(t._s(t.$t("description"))+": ")]),n("span",{staticStyle:{"white-space":"pre-wrap"},domProps:{innerHTML:t._s(t.product.description[t.uLangFromLocale(t.$i18n.locale)])}})]),t.updating?n("span",[n("p",[n("span",{staticClass:"list-label"},[t._v(" "+t._s(t.uFindInstruction(this.DISPLAY_JURISDICTION))+": ")]),t._v(" "+t._s(t.jurisdiction.name[t.uLangFromLocale(t.$i18n.locale)])+" ")])]):t._e()]):t._e()]),n("button",{staticClass:"btn primary-action-btn",attrs:{disabled:t.submitted||t.errors.any()||!t.uHasGroup(t.USER_GROUP_AGENCY_MASTER)||t.disableEndDateField,type:"submit"},on:{click:function(e){return e.preventDefault(),t.submitForm()}}},[t._v(" "+t._s(t.updating?t.$t("update"):t.$t("create"))+" ")]),n("router-link",{staticClass:"btn secondary-action-btn",attrs:{tag:"button",to:{name:"variants"}}},[t._v(" "+t._s(t.$t("cancel"))+" ")]),t.disableEndDateField&&t.uHasGroup(t.USER_GROUP_AGENCY_MASTER)?n("div",{staticClass:"form-error-message--permissions"},[t._v(" "+t._s(t.$t("editDisabledWhileEndDate"))+" ")]):t._e(),t.uHasGroup(t.USER_GROUP_AGENCY_MASTER)?t._e():n("div",{staticClass:"form-error-message--permissions"},[t._v(" "+t._s(t.$t("higherPermissionsRequired"))+" ")])],1)])},r=[],a=n("a34a"),i=n.n(a),c=n("9ab4"),s=n("2fe1"),u=n("60a3"),l=n("bc3a"),d=n.n(l),p=n("2f62"),f=n("ea76"),v=n.n(f),h=n("1f24"),_=n("2e75"),m=n("7358");function b(t){return b="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b(t)}function y(t,e){return R(t)||j(t,e)||C(t,e)||g()}function g(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function C(t,e){if(t){if("string"===typeof t)return O(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(t,e):void 0}}function O(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function j(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var n=[],o=!0,r=!1,a=void 0;try{for(var i,c=t[Symbol.iterator]();!(o=(i=c.next()).done);o=!0)if(n.push(i.value),e&&n.length===e)break}catch(s){r=!0,a=s}finally{try{o||null==c["return"]||c["return"]()}finally{if(r)throw a}}return n}}function R(t){if(Array.isArray(t))return t}function E(t,e,n,o,r,a,i){try{var c=t[a](i),s=c.value}catch(u){return void n(u)}c.done?e(s):Promise.resolve(s).then(o,r)}function w(t){return function(){var e=this,n=arguments;return new Promise((function(o,r){var a=t.apply(e,n);function i(t){E(a,o,r,i,c,"next",t)}function c(t){E(a,o,r,i,c,"throw",t)}i(void 0)}))}}function P(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function S(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function I(t,e,n){return e&&S(t.prototype,e),n&&S(t,n),t}function D(t,e){return!e||"object"!==b(e)&&"function"!==typeof e?T(t):e}function T(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function x(t){return x=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},x(t)}function A(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&U(t,e)}function U(t,e){return U=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},U(t,e)}var k=function(t){function e(){var t;return P(this,e),t=D(this,x(e).apply(this,arguments)),t.submitted=!1,t.disableEndDateField=!1,t.products=[],t.jurisdictions=[],t.taxCodes=[],t.jurisdiction="",t.taxCode=-1,t.endDate="",t.product="",t}return A(e,t),I(e,[{key:"mounted",value:function(){var t=w(i.a.mark((function t(){var e;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.updating&&this.variantId&&this.getVariant(),this.updating||(this.jurisdictions=this.currentUser.agencyUserJurisdictions,1===this.jurisdictions.length&&(e=y(this.jurisdictions,1),this.jurisdiction=e[0],this.getTaxCodes()),this.getProducts());case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"resetTaxCodes",value:function(){this.taxCode=-1,this.getTaxCodes()}},{key:"getTaxCodes",value:function(){var t=w(i.a.mark((function t(){var e,n;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getList("tax-codes","jurisdiction=".concat(this.jurisdiction.id));case 2:e=t.sent,n=e.data,this.taxCodes=n;case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getVariant",value:function(){var t=this;d.a.get("".concat("http://localhost:8000/api","/variants/").concat(this.variantId,"/")).then((function(e){var n=t.uRecursiveCamel(e.data);t.jurisdiction=n.jurisdiction,t.product=n.product,t.endDate=n.endDate,t.taxCode=n.taxCode?n.taxCode.id:-1,t.getTaxCodes(),t.endDate&&(t.disableEndDateField=!0)})).catch((function(e){t.uRequestErrorHandler(e)}))}},{key:"getProducts",value:function(){var t=this,e=this.financialProduct?this.PRODUCT_CATEGORY_FINANCIAL:this.PRODUCT_CATEGORY_REGULAR;d.a.get("".concat("http://localhost:8000/api","/products/?category_type=").concat(e)).then((function(e){t.products=t.uRecursiveCamel(e.data)})).catch((function(e){t.uRequestErrorHandler(e)}))}},{key:"submitForm",value:function(){var t=w(i.a.mark((function t(){var e,n,o=this;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.submitted=!0,t.next=3,this.$validator.validate();case 3:e=t.sent,e?(n={jurisdiction_id:this.jurisdiction.id,product_id:this.product.id,end_date:""===this.endDate?null:this.endDate,tax_code_id:this.taxCode>0?this.taxCode:null},this.updating?d.a.put("".concat("http://localhost:8000/api","/variants/").concat(this.variantId,"/"),n).then((function(){o.$router.push({name:"variants"})})).catch((function(t){o.submitted=!1,o.uRequestErrorHandler(t)})):d.a.post("".concat("http://localhost:8000/api","/variants/"),n).then((function(t){var e=o.financialProduct?"financialProduct":"variant";o.$router.push({name:e,params:{variantId:t.data.id}})})).catch((function(t){o.submitted=!1,o.uRequestErrorHandler(t)}))):this.submitted=!1;case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}]),e}(Object(s["c"])(_["a"],m["a"]));Object(c["a"])([Object(u["b"])()],k.prototype,"updating",void 0),Object(c["a"])([Object(u["b"])()],k.prototype,"variantId",void 0),Object(c["a"])([Object(u["b"])()],k.prototype,"financialProduct",void 0),k=Object(c["a"])([Object(u["a"])({components:{Tooltip:h["a"],Datepicker:v.a},computed:Object(p["b"])(["currentUser"])})],k);var $=k,L=$,F=(n("dc59"),n("2877")),N=Object(F["a"])(L,o,r,!1,null,"e83e5fa0",null);e["a"]=N.exports},dc59:function(t,e,n){"use strict";var o=n("e52b"),r=n.n(o);r.a},e52b:function(t,e,n){},e793:function(t,e,n){"use strict";var o=n("3712"),r=n.n(o);r.a}}]);