(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0ca15068"],{"24e1":function(t,e,i){},"283e":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"container parent-page-container"},[i("div",{staticClass:"table-header"},[i("div",{staticClass:"table-title"},[i("label",[t._v(t._s(t.$t("enterAPayment")))]),i("label",{staticClass:"property"},[t._v(" "+t._s(t.$t("cutOffDate"))+": "+t._s(t.cutOffDate||t.$t("notDefined"))+" ")])])]),i("div",{staticClass:"body-content"},[i("div",{staticClass:"horizontal-form enter-payment-form"},[i("form",[i("div",{staticClass:"form-group"},[i("label",[t._v(t._s(t.$t("organizationWithRemitter")))]),i("multiselect",{attrs:{"track-by":"businessName",customLabel:t.uCustomLabel,placeholder:t.$t("selectParticipant"),"options-limit":t.filteredRemitterList.length,options:t.filteredRemitterList,name:"participant"},on:{input:function(e){return t.getInvoiceData()}},model:{value:t.remitter,callback:function(e){t.remitter=e},expression:"remitter"}})],1),i("div",{staticClass:"form-group"},[i("label",[t._v(t._s(t.$t("depositDate")))]),i("Datepicker",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{lang:"en","value-type":"format","data-vv-name":"Effective Date",type:"text","not-before":!!t.cutOffDate&&t.uCurrentDateTimePlusDays(1,t.cutOffDate),"not-after":t.uCurrentDateTimePlusDays(0),placeholder:t.$t("dateFormat")},model:{value:t.depositDate,callback:function(e){t.depositDate=e},expression:"depositDate"}}),i("span",{staticClass:"form-error-message"},[t._v(t._s(t.errors.first("Effective Date")))])],1),i("div",{staticClass:"form-group"},[i("label",[t._v(" "+t._s(t.$t("depositType"))+" ")]),i("b-form-select",{directives:[{name:"validate",rawName:"v-validate",value:"required|min_value:0",expression:"'required|min_value:0'"}],staticClass:"custom-select",attrs:{disabled:t.usingImportDeposit,options:t.uConstants(t.PAYMENT_TYPES,t.uJurConfig(t.J_PAYMENT_TYPES)),name:"paymentMethod"},scopedSlots:t._u([{key:"first",fn:function(){return[i("option",{attrs:{disabled:""},domProps:{value:-1}},[t._v(t._s(t.$t("selectDepositType")))])]},proxy:!0}]),model:{value:t.paymentMethod,callback:function(e){t.paymentMethod=e},expression:"paymentMethod"}}),i("span",{staticClass:"form-error-message"},[t._v(t._s(t.errors.first("paymentMethod")))])],1),i("div",{staticClass:"form-group"},[i("label",[t._v(t._s(t.$t("reference"))+" ")]),i("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.reference,expression:"reference"}],staticClass:"form-control",attrs:{disabled:t.usingImportDeposit,type:"text",name:"Reference"},domProps:{value:t.reference},on:{input:function(e){e.target.composing||(t.reference=e.target.value)}}}),i("span",{staticClass:"form-error-message"},[t._v(t._s(t.errors.first("Reference")))])]),i("div",{staticClass:"form-group"},[i("label",[t._v(t._s(t.$t("amount"))+" ")]),i("currency-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{disabled:t.usingImportDeposit,name:"Amount"},on:{change:function(e){return t.calculateAllocation()}},model:{value:t.paymentAmount,callback:function(e){t.paymentAmount=e},expression:"paymentAmount"}}),i("span",{staticClass:"form-error-message"},[t._v(t._s(t.errors.first("Amount")))])],1),i("div",{staticClass:"form-group"},[i("label",[t._v(t._s(t.$t("batchNumber"))+" ")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.batchNumber,expression:"batchNumber"}],staticClass:"form-control",attrs:{type:"text",name:"batchNumber"},domProps:{value:t.batchNumber},on:{input:function(e){e.target.composing||(t.batchNumber=e.target.value)}}}),i("span",{staticClass:"form-error-message"},[t._v(t._s(t.errors.first("batchNumber")))])])])]),i("CustomTable",{attrs:{data:t.invoices,columns:[[t.$t("remitter"),"","remitter",.6,"left"],[t.$t("invoiceNo"),"","invoiceNo",.6,"left"],[t.$t("type"),"","type",.6,"left"],[t.uFindInstruction(this.DISPLAY_FILING_PERIOD_NAME),"","filingPeriod",.8,"left"],[t.$t("dueDate"),"","dueDate",.6,"center"],[t.$t("total"),"","total",.8,"right"],[t.$t("remaining"),"","remaining",.8,"right"],[t.$t("allocation"),"","allocation",1,"right"]],loading:!t.invoicesReady,filter:t.filter,emptyStateMessage:t.$t("emptyState.invoices"),totalData:t.totalData,scrollWidth:1120,selectedRows:t.invoicesSelected.concat(t.creditsSelected)},on:{inputChange:t.setInputValue,toggleSelected:t.toggleSelected,selectAll:t.selectAllInvoices,dataRequest:t.getOpenInvoices}}),i("div",{staticClass:"table-footer-options"},[i("div",{staticClass:"detail-list"},[i("p",[i("span",{staticClass:"list-label"},[t._v(t._s(t.$t("invoices"))+": ")]),i("span",{staticClass:"list-value"},[t._v(" "+t._s(t.uFormatPrice(t.totalSelectedAmount))+" ")])]),i("p",[i("span",{staticClass:"list-label"},[t._v(t._s(t.$t("credits"))+": ")]),i("span",{staticClass:"list-value"},[t._v(" "+t._s(t.uFormatPrice(t.totalCreditAmount))+" ")])]),i("p",[i("span",{staticClass:"list-label"},[t._v(t._s(t.$t("payment"))+": ")]),i("span",{staticClass:"list-value"},[t._v(" "+t._s(t.uFormatPrice(t.paymentAmount))+" ")])]),i("p",[i("span",{staticClass:"list-label"},[t._v(t._s(t.$t("unallocated"))+": ")]),i("span",{staticClass:"list-value"},[t._v(" "+t._s(t.uFormatPrice(t.unallocated))+" ")])])]),i("div",{staticClass:"table-action-block"},[i("div",{staticClass:"flex-spacer"}),i("div",{staticClass:"table-action-block-form"},[i("form",[t.unallocated>0?i("div",{staticClass:"form-group"},[i("label",[t._v(" "+t._s(t.$t("selectRemitterForCredit"))+" ")]),i("select",{directives:[{name:"model",rawName:"v-model",value:t.creditRemitter,expression:"creditRemitter"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"custom-select",attrs:{name:"remitter"},on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.creditRemitter=e.target.multiple?i:i[0]}}},[i("option",{attrs:{disabled:"",value:""}},[t._v(t._s(t.$t("selectRemitter")))]),t._l(t.childRemitters,(function(e){return i("option",{key:e.id,domProps:{value:e.id}},[t._v(" "+t._s(e.registrationNo+" - "+e.businessName)+" ")])}))],2),i("span",{staticClass:"form-error-message"},[t._v(t._s(t.errors.first("remitter")))])]):t._e()])])]),i("button",{staticClass:"btn primary-action-btn",attrs:{disabled:t.submitted||t.errors.any()||t.unallocated<0||0!==t.unallocated&&t.paymentMethod===t.PAYMENT_TYPES_BAD_DEBT||!t.uHasGroup(t.USER_GROUP_AGENCY_FILING)},on:{click:function(e){return e.preventDefault(),t.checkForCrossRemitterCredit()}}},[t._v(" "+t._s(t.$t("submit"))+" ")]),t.submitted?i("LoadingIcon",{style:{marginTop:"18px"},attrs:{buttonLoader:!0}}):t._e(),t.uHasGroup(t.USER_GROUP_AGENCY_FILING)?t._e():i("div",{staticClass:"inline-button-message state--error"},[t._v(t._s(t.$t("higherPermissionsRequired")))]),!t.errors.any()&&(t.invoicesSelected.length>0&&t.paymentAmount>0||t.invoicesSelected.length>0&&t.creditsSelected.length>0)?i("div",{staticClass:"inline-button-message",class:{"state--warning":t.unallocated>0,"state--error":t.unallocated<0,"state--success":0===t.unallocated}},[t._v(t._s(t.actionMessage))]):t._e(),t.errors.any()?i("div",{staticClass:"inline-button-message state--error"},[t._v(" "+t._s(t.$t("formAboveErrors"))+" ")]):t._e()],1)],1)]),i("InvoicePaymentsModal",{attrs:{showModal:t.showInvoiceSummary,invoicePayments:t.completedPayments},on:{cancelModal:function(e){t.showInvoiceSummary=!1}}}),i("ConfirmationModal",{attrs:{showModal:t.showConfirmModal},on:{ok:t.submitPayment,cancel:t.cancelModal}},[i("h3",{attrs:{slot:"header"},slot:"header"},[t._v(t._s(t.$t("warning")))]),i("div",{attrs:{slot:"body"},slot:"body"},[t._v(" "+t._s(t.$t("remitterCreditTransferWarning"))+" ")])])],1)},s=[],n=i("a34a"),o=i.n(n),r=i("9ab4"),c=i("2fe1"),l=i("60a3"),u=i("2f62"),d=i("bc3a"),m=i.n(d),p=i("8e5f"),v=i.n(p),h=i("ea76"),f=i.n(h),b=i("2e75"),_=i("88c3"),y=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.showModal?i("div",[i("transition",{attrs:{name:"modal"}},[i("div",{staticClass:"modal-mask"},[i("div",{staticClass:"modal-wrapper modal-dialog"},[i("div",{staticClass:"modal-container modal-content large-modal"},[i("div",{staticClass:"modal-header"},[i("p",{staticClass:"modal-title"},[t._v(" "+t._s(t.$t("completedPayments"))+" ")])]),i("div",{staticClass:"modal-body"},[i("div",[i("div",{staticClass:"custom-table custom-table-blocked custom-table-selectable table-modal"},[i("div",{staticClass:"custom-table-header recipient-table-header"},[i("div",{staticClass:"custom-table-header-data left-align",style:{flex:1.4}},[t._v(" "+t._s(t.$t("remitter"))+" ")]),i("div",{staticClass:"custom-table-header-data left-align",style:{flex:.7}},[t._v(" "+t._s(t.$t("invoiceNo"))+" ")]),i("div",{staticClass:"custom-table-header-data left-align"},[t._v(" "+t._s(t.$t("reference"))+" ")]),i("div",{staticClass:"custom-table-header-data right-align"},[t._v(" "+t._s(t.$t("total"))+" ")]),i("div",{staticClass:"custom-table-header-data right-align"},[t._v(" "+t._s(t.$t("payment"))+" ")]),i("div",{staticClass:"custom-table-header-data right-align",style:{flex:.8}},[t._v(" "+t._s(t.$t("balance"))+" ")])]),i("div",{staticClass:"custom-table-body recipient-table-body"},t._l(t.invoicePayments,(function(e){return i("div",{key:e.id,staticClass:"custom-table-body-row"},[i("div",{staticClass:"custom-table-body-data left-align",style:{flex:1.4}},[t._v(" "+t._s(e.invoice.participant.businessName)+" ")]),i("div",{staticClass:"custom-table-body-data left-align",style:{flex:.7}},[t._v(" "+t._s(t.uFormatInvoiceNo(e.invoice))+" ")]),i("div",{staticClass:"custom-table-body-data left-align"},[t._v(" "+t._s(e.source)+" ")]),i("div",{staticClass:"custom-table-body-data right-align"},[t._v(" "+t._s(t.uFormatPrice(e.invoice.modifiedTotalAmount))+" ")]),i("div",{staticClass:"custom-table-body-data right-align"},[t._v(" "+t._s(t.uFormatPrice(e.amount))+" ")]),i("div",{staticClass:"custom-table-body-data right-align",style:{flex:.8}},[t._v(" "+t._s(t.uFormatPrice(e.invoice.balance))+" ")])])})),0)])])]),i("div",{staticClass:"modal-footer"},[i("button",{staticClass:"btn primary-action-btn",on:{click:function(e){return e.preventDefault(),t.$emit("cancelModal")}}},[t._v(" "+t._s(t.$t("close"))+" ")])])])])])])],1):t._e()},g=[];function C(t){return C="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},C(t)}function S(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function I(t,e){return!e||"object"!==C(e)&&"function"!==typeof e?N(t):e}function N(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function P(t){return P=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},P(t)}function w(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&A(t,e)}function A(t,e){return A=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},A(t,e)}var O=function(t){function e(){return S(this,e),I(this,P(e).apply(this,arguments))}return w(e,t),e}(Object(c["c"])(b["a"]));Object(r["a"])([Object(l["b"])()],O.prototype,"showModal",void 0),Object(r["a"])([Object(l["b"])()],O.prototype,"invoicePayments",void 0),O=Object(r["a"])([l["a"]],O);var R=O,x=R,E=(i("3475"),i("2877")),D=Object(E["a"])(x,y,g,!1,null,"048867be",null),T=D.exports,k=i("c5af"),M=i("7358"),$=i("0f7b"),F=i("25bf");function j(t){return j="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},j(t)}function L(t,e,i,a,s,n,o){try{var r=t[n](o),c=r.value}catch(l){return void i(l)}r.done?e(c):Promise.resolve(c).then(a,s)}function Y(t){return function(){var e=this,i=arguments;return new Promise((function(a,s){var n=t.apply(e,i);function o(t){L(n,a,s,o,r,"next",t)}function r(t){L(n,a,s,o,r,"throw",t)}o(void 0)}))}}function q(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function G(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function U(t,e,i){return e&&G(t.prototype,e),i&&G(t,i),t}function B(t,e){return!e||"object"!==j(e)&&"function"!==typeof e?V(t):e}function V(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function J(t){return J=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},J(t)}function W(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&H(t,e)}function H(t,e){return H=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},H(t,e)}var z=function(t){function e(){var t;return q(this,e),t=B(this,J(e).apply(this,arguments)),t.filteredRemitterList=[],t.invoices=[],t.submitted=!1,t.childRemitters=[],t.invoicesReady=!0,t.totalData=0,t.filter="",t.invoicesSelected=[],t.creditsSelected=[],t.totalSelectedAmount=0,t.totalCreditAmount=0,t.depositDate="",t.reference="",t.paymentAmount=0,t.paymentMethod=-1,t.remitter="",t.creditRemitter="",t.actionMessage="",t.unallocated=0,t.selectAll=!1,t.cutOffDate="",t.batchNumber="",t.usingImportDeposit=!1,t.completedPayments=[],t.showInvoiceSummary=!1,t.showConfirmModal=!1,t}return W(e,t),U(e,[{key:"mounted",value:function(){var t=Y(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.cutOffDate=this.uConfig(this.DEPOSIT_EDIT_CUT_OFF_DATE),this.updateRemitterList(this.allRemitters),this.batchNumber=this.paymentBatchId,this.uSetSupportToggle(this.SUPPORT_PANEL_DEPOSIT_PAYMENT_PAGE),this.depositImportId&&this.setDepositImportInfo();case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"updateRemitterList",value:function(){var t=Y(o.a.mark((function t(e){var i,a,s;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.filteredRemitterList=[],!this.uConfig(this.REMIT_BY_JURISDICTION)){t.next=10;break}return i=this.uGetAgencyJurisdictionFilter(),t.next=5,this.getList("remitter-participants",i);case 5:a=t.sent,s=a.data,this.filteredRemitterList=s,t.next=11;break;case 10:this.filteredRemitterList=e;case 11:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"setDepositImportInfo",value:function(){var t=Y(o.a.mark((function t(){var e,i,a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.usingImportDeposit=!0,t.prev=1,t.next=4,m.a.get("".concat("http://localhost:8000/api","/deposit-imports/").concat(this.depositImportId,"/"));case 4:return e=t.sent,i=this.uRecursiveCamel(e.data),this.depositDate=i.receivedDate,this.reference=i.confirmationCode,this.paymentAmount=i.amount,this.paymentMethod=i.depositType,t.next=12,m.a.get("".concat("http://localhost:8000/api","/remitter-participants/?registration_no=").concat(Number(i.accountNumber)));case 12:a=t.sent,a.data[0]&&(this.remitter=this.uRecursiveCamel(a.data[0]),this.getInvoiceData()),t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](1),this.uRequestErrorHandler(t.t0);case 19:case"end":return t.stop()}}),t,this,[[1,16]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"setInputValue",value:function(t,e,i){this.invoices[e][i].value=t,this.calculateAllocation()}},{key:"getInvoiceData",value:function(){this.invoicesSelected=[],this.creditsSelected=[],this.calculateAllocation();var t="participant=".concat(this.remitter.participant);Number(this.uConfig(this.PAYMENT_GET_INVOICES))===this.PAYMENT_GET_INVOICES_REMITTER&&(t="participant=".concat(this.remitter.id)),this.filter="".concat(t,"&status=").concat(this.INVOICE_STATUS_NEW)+"&status=".concat(this.INVOICE_STATUS_NOT_PAID),this.getChildRemitters()}},{key:"getChildRemitters",value:function(){var t=Y(o.a.mark((function t(){var e,i,a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e="",this.uConfig(this.REMIT_BY_JURISDICTION)&&(e=this.uGetAgencyJurisdictionFilter()),t.next=4,this.getList("remitter-participants","parent_participant=".concat(this.remitter.participant,"&").concat(e));case 4:i=t.sent,a=i.data,this.childRemitters=a,this.getOpenInvoices(0,"",!0);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getOpenInvoices",value:function(){var t=Y(o.a.mark((function t(){var e,i,a,s,n,r,c=arguments;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=c.length>0&&void 0!==c[0]?c[0]:0,i=c.length>1&&void 0!==c[1]?c[1]:"",a=c.length>2&&void 0!==c[2]&&c[2],this.invoicesReady){t.next=5;break}return t.abrupt("return");case 5:return a&&(this.invoices=[]),this.invoicesReady=!1,t.next=9,this.getList("invoices",this.filter,e,this.TABLE_LIMIT,i);case 9:s=t.sent,n=s.data,r=s.count,this.totalData=r,this.formatInvoices(n),this.invoicesReady=!0;case 15:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"formatInvoices",value:function(t){for(var e=0;e<t.length;e+=1){var i=t[e],a=this.INVOICE_TYPES[i.type];i.type===this.INVOICE_TYPES_SPECIAL&&(a=this.uFindInstruction(this.DISPLAY_SPECIAL_FILER)),i.reason&&(a+=" ".concat(this.INVOICE_REASONS_MASTER[i.reason])),this.invoices.push({id:i.id,remitter:this.uFormatRegistrationNo(i.participant.remitter),invoiceNo:this.uFormatInvoiceNo(i),type:a,filingPeriod:i.filing?i.filing.filingPeriod.name:_["a"].tc("unknown"),dueDate:i.filing?i.filing.filingPeriod.endDate:_["a"].tc("unknown"),total:this.uFormatPrice(i.modifiedTotalAmount),remaining:this.uFormatPrice(i.balance),balance:i.balance,participant:i.participant,allocation:{input:!0,currency:!0,validate:i.balance>=0?"decimal:2|min_value:0|max_value:".concat(i.balance):"decimal:2|max_value:0|min_value:".concat(i.balance),name:"quantity-".concat(i.id),value:0},actions:[{checkbox:!0}]})}}},{key:"checkForCrossRemitterCredit",value:function(){for(var t=0;t<this.invoicesSelected.length;t+=1)for(var e=0;e<this.creditsSelected.length;e+=1)if(this.invoicesSelected[t].participant.remitter.id!==this.creditsSelected[e].participant.remitter.id)return void(this.showConfirmModal=!0);this.submitPayment()}},{key:"submitPayment",value:function(){var t=Y(o.a.mark((function t(){var e,i,a,s,n=this;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.submitted=!0,this.showConfirmModal=!1,t.next=4,this.$validator.validate();case 4:if(e=t.sent,e){for(i=[],a=0;a<this.invoicesSelected.length;a+=1)i.push({invoice:this.invoicesSelected[a].id,allocation:(Number(this.invoicesSelected[a].allocation.value)||0).toFixed(2)});for(s=0;s<this.creditsSelected.length;s+=1)i.push({invoice:this.creditsSelected[s].id,allocation:(Number(this.creditsSelected[s].allocation.value)||0).toFixed(2)});m.a.post("".concat("http://localhost:8000/api","/invoice-payments/"),{amount:this.unallocated,deposit_date:this.depositDate,confirmation_code:this.reference,batch_number:this.batchNumber,payment_type:this.paymentMethod,credit_remitter:this.creditRemitter,payment_amount:this.paymentAmount,allocations:i,import_deposit:this.depositImportId}).then((function(t){n.completedPayments=n.uRecursiveCamel(t.data),n.uConfig(n.SHOW_PAYMENT_CONFIRMATION)?n.showInvoiceSummary=!0:n.usingImportDeposit&&n.$router.push({name:"depositMatch"}),n.invoices=[],n.remitter="",n.reference="",n.paymentMethod=-1,n.paymentAmount=0,n.creditRemitter="",n.unallocated=0,n.totalCreditAmount=0,n.totalSelectedAmount=0,n.$store.dispatch("update_payment_batch_id",n.batchNumber)})).catch((function(t){n.uRequestErrorHandler(t)})).finally((function(){n.submitted=!1,n.$validator.reset()}))}else this.submitted=!1;case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"calculateAllocation",value:function(){this.totalSelectedAmount=0,this.totalCreditAmount=0;for(var t=0;t<this.invoicesSelected.length;t+=1)this.totalSelectedAmount+=Number((Number(this.invoicesSelected[t].allocation.value)||0).toFixed(2));for(var e=0;e<this.creditsSelected.length;e+=1)this.totalCreditAmount+=Number((Number(this.creditsSelected[e].allocation.value)||0).toFixed(2));this.unallocated=Number((Number((this.paymentAmount||0).toFixed(2))-this.totalSelectedAmount-this.totalCreditAmount).toFixed(2)),this.unallocated>0?this.actionMessage=_["a"].tc("createCreditInvoiceWithRemaining"):this.unallocated<0?this.actionMessage=_["a"].tc("unallocatedCannotBeLessThanZero"):this.actionMessage=_["a"].tc("invoicesWillBalance")}},{key:"selectAllInvoices",value:function(){if(this.selectAll=!this.selectAll,this.selectAll)for(var t=0;t<this.invoices.length;t+=1)this.toggleSelected(this.invoices[t],!0);else{this.invoicesSelected=[],this.creditsSelected=[];for(var e=0;e<this.invoices.length;e+=1)this.invoices[e].allocation.value="0"}this.calculateAllocation()}},{key:"toggleSelected",value:function(t,e){if(t.balance>0)if(this.invoicesSelected.includes(t)&&!e){var i=this.invoicesSelected.indexOf(t);i>-1&&(this.invoicesSelected.splice(i,1),t.allocation["value"]=0)}else this.invoicesSelected.push(t),t.allocation["value"]=Number(t.balance.toFixed(2));else if(t.balance<=0)if(this.creditsSelected.includes(t)&&!e){var a=this.creditsSelected.indexOf(t);a>-1&&(this.creditsSelected.splice(a,1),t.allocation["value"]=0)}else this.creditsSelected.push(t),t.allocation["value"]=Number(t.balance.toFixed(2));this.calculateAllocation()}},{key:"cancelModal",value:function(){this.showConfirmModal=!1}},{key:"participantSelected",get:function(){return this.remitter.businessName&&this.remitter.constructor===Object}}]),e}(Object(c["c"])(b["a"],M["a"]));Object(r["a"])([Object(l["b"])()],z.prototype,"depositImportId",void 0),Object(r["a"])([Object(l["d"])("allRemitters")],z.prototype,"updateRemitterList",null),z=Object(r["a"])([Object(l["a"])({components:{ConfirmationModal:$["a"],LoadingIcon:k["a"],Multiselect:v.a,Datepicker:f.a,CustomTable:F["a"],InvoicePaymentsModal:T},computed:Object(u["b"])(["allRemitters","currentUser","paymentBatchId"])})],z);var Z=z,K=Z,Q=(i("60bc"),i("99e3"),Object(E["a"])(K,a,s,!1,null,"29701fed",null));e["default"]=Q.exports},3475:function(t,e,i){"use strict";var a=i("24e1"),s=i.n(a);s.a},"99e3":function(t,e,i){"use strict";var a=i("ddeb"),s=i.n(a);s.a},ddeb:function(t,e,i){}}]);